!function(a,b){function c(b,d){var e,f;if("\x2e"!=b[0]&&"\x2f"!=b[0])return a(b);if(d=d||"\x72\x6f\x6f\x74",e=c.resolve(b),!e&&/\.json$/i.test(b))return a("\x2e\x2f"+c.basename(b));if(f=c.cache[e],!f)try{return a(b)}catch(g){throw Error("\x66\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x72\x65\x71\x75\x69\x72\x65\x20\x22"+b+"\x22\x20\x66\x72\x6f\x6d\x20"+d+"\n"+g.message+"\n"+g.stack)}return f.exports||(f.exports={},f.call(f.exports,f,f.exports,c.relative(e))),f.exports}c.cache={},c.basename=a("\x70\x61\x74\x68").basename,c.resolve=function(b){var d,e,f,g;if("\x2e"!=b[0])return a.resolve(b);for(d="\x2f"===b.slice(-1)?b:b+"\x2f",e=[b,b+"\x2e\x6a\x73",d+"\x69\x6e\x64\x65\x78\x2e\x6a\x73",b+"\x2e\x6a\x73\x6f\x6e",d+"\x69\x6e\x64\x65\x78\x2e\x6a\x73\x6f\x6e"],f=0;g=e[f];f++)if(c.cache[g])return g},c.register=function(a,b){c.cache[a]=b},c.relative=function(a){function b(b){var d,e,f,g,h;if("\x2e"!=b[0])return c(b);for(d=a.split("\x2f"),e=b.split("\x2f"),d.pop(),f=0,g=e.length;g>f;f+=1)h=e[f],"\x2e\x2e"==h?d.pop():"\x2e"!=h&&d.push(h);return c(d.join("\x2f"),a)}return b.resolve=c.resolve,b.cache=c.cache,b},c.register("\x2e\x2f\x6c\x6f\x67\x67\x65\x72\x2e\x6a\x73",function(a,b,c){"use strict";var d=c("\x73\x74\x72\x66\x74\x69\x6d\x65").utc(),e=c("\x66\x73"),f=c("\x75\x74\x69\x6c");c("\x63\x6f\x6c\x6f\x72\x73"),a.exports=function(a){function g(a){for(var b in a)b.search(/secret/i)>-1&&(a[b]="\x58\x58\x58\x58\x58\x58\x58\x58\x58\x58");return a}var b,c;return a=a||{},b={},a.levels=a.levels||{trace:0,debug:1,log:2,info:3,warn:4,error:5,fatal:6},a.level_abbr=a.level_abbr||{trace:"\x74\x72\x63",debug:"\x64\x62\x67",log:"\x6c\x6f\x67",info:"\x69\x6e\x66",warn:"\x57\x52\x4e",error:"\x45\x52\x52",fatal:"\x46\x54\x4c"},a.filename=a.filename||__dirname+"\x2f\x6c\x6f\x67\x73\x2e\x6c\x6f\x67",a.errorLevel=a.errorLevel||"\x6c\x6f\x67",c=e.createWriteStream(a.filename,{flags:"\x61"}),b.setLevel=function(b){a.errorLevel=b},Object.keys(a.levels).forEach(function(e){function h(b,h){var i={level:e,timestamp:d("\x25\x46\x20\x25\x54",new Date)};b instanceof Error?i.message=b.stack:i.message=b,h&&f.isObject(h)?i.data=JSON.stringify(g(h)):i.data=h,i.symbol=a.level_abbr[i.level]?a.level_abbr[i.level]:"\x3f\x3f\x3f",a.levels[a.errorLevel]<=a.levels[i.level]&&(i.data?c.write(f.format("\x5b\x25\x73\x5d\x20\x25\x73\x20\x7c\x20\x25\x73\x20\x2d\x20\x25\x73\n",i.symbol,i.timestamp,i.message,i.data)):c.write(f.format("\x5b\x25\x73\x5d\x20\x25\x73\x20\x7c\x20\x25\x73\n",i.symbol,i.timestamp,i.message))),a.echo&&a.levels[a.echo]<=a.levels[i.level]&&(i.data?console.log("\x5b"+i.symbol.bgYellow.black+"\x5d",i.timestamp.grey,"\x7c",i.message,"\x2d",i.data):console.log("\x5b"+i.symbol.bgYellow.black+"\x5d",i.timestamp.grey,"\x7c",i.message))}b[e]=h}),b}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x62\x69\x67\x6e\x75\x6d\x2e\x6a\x73",function(a){function u(a,b){var c,d,e,h,i,m,n=this;if(!(n instanceof u))return new u(a,b);if(a instanceof u){if(q=0,b===c)return n.s=a.s,n.e=a.e,void(n.c=(a=a.c)?a.slice():a);a+=""}if("\x73\x74\x72\x69\x6e\x67"!=typeof a&&(a=(e="\x6e\x75\x6d\x62\x65\x72"==typeof a||"\x5b\x6f\x62\x6a\x65\x63\x74\x20\x4e\x75\x6d\x62\x65\x72\x5d"==Object.prototype.toString.call(a))&&0===a&&0>1/a?"\x2d\x30":a+""),m=a,b===c&&r.test(a))n.s="\x2d"==a.charAt(0)?(a=a.slice(1),-1):1;else{if(10==b)return A(a,f,g);if(a=s.call(a).replace(/^\+(?!-)/,""),n.s="\x2d"==a.charAt(0)?(a=a.replace(/^-(?!-)/,""),-1):1,null!=b?b!=(0|b)&&l||(p=!(b>=2&&65>b))?(v(b,2),i=r.test(a)):(h="\x5b"+o.slice(0,b=0|b)+"\x5d\x2b",a=a.replace(/\.$/,"").replace(/^\./,"\x30\x2e"),(i=RegExp("\x5e"+h+"\x28\x3f\x3a\."+h+"\x29\x3f\x24",37>b?"\x69":"").test(a))?(e&&(a.replace(/^0\.0*|\./,"").length>15&&v(m,0),e=!e),a=w(a,10,b,n.s)):"\x49\x6e\x66\x69\x6e\x69\x74\x79"!=a&&"\x4e\x61\x4e"!=a&&(v(m,1,b),a="\x4e\x61\x4e")):i=r.test(a),!i)return n.c=n.e=null,"\x49\x6e\x66\x69\x6e\x69\x74\x79"!=a&&("\x4e\x61\x4e"!=a&&v(m,3),n.s=null),void(q=0)}for((c=a.indexOf("\x2e"))>-1&&(a=a.replace("\x2e","")),(d=a.search(/e/i))>0?(0>c&&(c=d),c+=+a.slice(d+1),a=a.substring(0,d)):0>c&&(c=a.length),d=0;"\x30"==a.charAt(d);d++);if(b=a.length,e&&b>15&&a.slice(d).length>15&&v(m,0),q=0,(c-=d+1)>k)n.c=n.e=null;else if(d==b||j>c)n.c=[n.e=0];else{for(;"\x30"==a.charAt(--b););for(n.e=c,n.c=[],c=0;b>=d;n.c[c++]=+a.charAt(d++));}}function v(a,b,c,d,e,f){if(l){var g,h=["\x6e\x65\x77\x20\x42\x69\x67\x4e\x75\x6d\x62\x65\x72","\x63\x6d\x70","\x64\x69\x76","\x65\x71","\x67\x74","\x67\x74\x65","\x6c\x74","\x6c\x74\x65","\x6d\x69\x6e\x75\x73","\x6d\x6f\x64","\x70\x6c\x75\x73","\x74\x69\x6d\x65\x73","\x74\x6f\x46\x72"][q?0>q?-q:q:0>1/q?1:0]+"\x28\x29",i=p?"\x20\x6f\x75\x74\x20\x6f\x66\x20\x72\x61\x6e\x67\x65":"\x20\x6e\x6f\x74\x20\x61"+(e?"\x20\x6e\x6f\x6e\x2d\x7a\x65\x72\x6f":"\x6e")+"\x20\x69\x6e\x74\x65\x67\x65\x72";throw i=([h+"\x20\x6e\x75\x6d\x62\x65\x72\x20\x74\x79\x70\x65\x20\x68\x61\x73\x20\x6d\x6f\x72\x65\x20\x74\x68\x61\x6e\x20\x31\x35\x20\x73\x69\x67\x6e\x69\x66\x69\x63\x61\x6e\x74\x20\x64\x69\x67\x69\x74\x73",h+"\x20\x6e\x6f\x74\x20\x61\x20\x62\x61\x73\x65\x20"+c+"\x20\x6e\x75\x6d\x62\x65\x72",h+"\x20\x62\x61\x73\x65"+i,h+"\x20\x6e\x6f\x74\x20\x61\x20\x6e\x75\x6d\x62\x65\x72"][b]||c+"\x28\x29\x20"+b+(f?"\x20\x6e\x6f\x74\x20\x61\x20\x62\x6f\x6f\x6c\x65\x61\x6e\x20\x6f\x72\x20\x62\x69\x6e\x61\x72\x79\x20\x64\x69\x67\x69\x74":i+(d?"\x20\x6f\x72\x20\x6e\x6f\x74\x20\x5b"+(p?"\x20\x6e\x65\x67\x61\x74\x69\x76\x65\x2c\x20\x70\x6f\x73\x69\x74\x69\x76\x65":"\x20\x69\x6e\x74\x65\x67\x65\x72\x2c\x20\x69\x6e\x74\x65\x67\x65\x72")+"\x20\x5d":"")))+"\x3a\x20"+a,p=q=0,g=Error(i),g.name="\x42\x69\x67\x4e\x75\x6d\x62\x65\x72\x20\x45\x72\x72\x6f\x72",g}}function w(a,b,c,d){function k(a,d){var e,h,f=0,g=a.length,i=[0];for(d=d||c;g>f;f++){for(h=i.length,e=0;h>e;i[e]*=d,e++);for(i[0]+=o.indexOf(a.charAt(f)),e=0;e<i.length;e++)i[e]>b-1&&(null==i[e+1]&&(i[e+1]=0),i[e+1]+=i[e]/b^0,i[e]%=b)}return i.reverse()}function l(a){for(var b=0,c=a.length,d="";c>b;d+=o.charAt(a[b++]));return d}var e,f,g,h,i,j;if(37>c&&(a=a.toLowerCase()),(e=a.indexOf("\x2e"))>-1)if(e=a.length-e-1,f=k(new u(c).pow(e).toF(),10),h=a.split("\x2e"),g=k(h[1]),h=k(h[0]),j=x(g,f,g.length-f.length,d,b,1&h[h.length-1]),i=j.c,e=j.e){for(;++e;i.unshift(0));a=l(h)+"\x2e"+l(i)}else i[0]?h[e=h.length-1]<b-1?(++h[e],a=l(h)):a=new u(l(h),b).plus(t).toS(b):a=l(h);else a=l(k(a));return a}function x(a,b,c,d,e,g){var h,i,l,m,n,o=b.slice(),p=h=b.length,q=a.length,r=a.slice(0,h),s=r.length,v=new u(t),w=v.c=[],x=0,y=f+(v.e=c)+1;for(v.s=d,d=0>y?0:y;s++<h;r.push(0));o.unshift(0);do{for(l=0;e>l;l++){if(h!=(s=r.length))m=h>s?1:-1;else for(n=-1,m=0;++n<h;)if(b[n]!=r[n]){m=b[n]>r[n]?1:-1;break}if(!(0>m))break;for(i=s==h?b:o;s;){if(r[--s]<i[s]){for(n=s;n&&!r[--n];r[n]=e-1);--r[n],r[s]+=e}r[s]-=i[s]}for(;!r[0];r.shift());}w[x++]=m?l:++l,r[0]&&m?r[s]=a[p]||0:r=[a[p]]}while((p++<q||null!=r[0])&&d--);return w[0]||1==x||(--v.e,w.shift()),x>y&&z(v,f,e,g,null!=r[0]),v.e>k?v.c=v.e=null:v.e<j&&(v.c=[v.e=0]),v}function y(a,b,c){var d=b-(a=new u(a)).e,e=a.c;if(!e)return a.toS();for(e.length>++b&&z(a,d,10),d=0==e[0]?d+1:c?b:a.e+d+1;e.length<d;e.push(0));return d=a.e,1==c||2==c&&(--b<d||h>=d)?(a.s<0&&e[0]?"\x2d":"")+(e.length>1?(e.splice(1,0,"\x2e"),e.join("")):e[0])+(0>d?"\x65":"\x65\x2b")+d:a.toS()}function z(a,b,c,d,e){var f=a.c,h=a.s<0,i=c/2,j=a.e+b+1,k=f[j],l=e||0>j||null!=f[j+1];if(e=4>g?(null!=k||l)&&(0==g||2==g&&!h||3==g&&h):k>i||k==i&&(4==g||l||6==g&&(1&f[j-1]||!b&&d)||7==g&&!h||8==g&&h),1>j||!f[0])return f.length=0,f.push(0),e?(f[0]=1,a.e=-b):a.e=0,a;if(f.length=j--,e)for(--c;++f[j]>c;)f[j]=0,j--||(++a.e,f.unshift(1));for(j=f.length;!f[--j];f.pop());return a}function A(a,b,c){var d=g;return g=c,a=new u(a),a.c&&z(a,b,10),g=d,a}var p,d=1e9,e=1e6,f=20,g=4,h=-7,i=21,j=-d,k=d,l=!0,m=parseInt,n=u.prototype,o="\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x61\x62\x63\x64\x65\x66\x67\x68\x69\x6a\x6b\x6c\x6d\x6e\x6f\x70\x71\x72\x73\x74\x75\x76\x77\x78\x79\x7a\x41\x42\x43\x44\x45\x46\x47\x48\x49\x4a\x4b\x4c\x4d\x4e\x4f\x50\x51\x52\x53\x54\x55\x56\x57\x58\x59\x5a\x24\x5f",q=0,r=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,s=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},t=u(1);u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.fromBuffer=function(a,b){var c,d,e,f,g,h;if(b||(b={}),c={1:"\x62\x69\x67","-1":"\x6c\x69\x74\x74\x6c\x65"}[b.endian]||b.endian||"\x62\x69\x67",d="\x61\x75\x74\x6f"===b.size?Math.ceil(a.length):b.size||1,a.length%d!==0)throw new RangeError("\x42\x75\x66\x66\x65\x72\x20\x6c\x65\x6e\x67\x74\x68\x20\x28"+a.length+"\x29\x20\x6d\x75\x73\x74\x20\x62\x65\x20\x61\x20\x6d\x75\x6c\x74\x69\x70\x6c\x65\x20\x6f\x66\x20\x73\x69\x7a\x65\x20\x28"+d+"\x29");for(e=[],f=0;f<a.length;f+=d){for(g=[],h=0;d>h;h++)g.push(a[f+("\x62\x69\x67"===c?h:d-h-1)]);e.push(g.map(function(a){return(16>a?"\x30":"")+a.toString(16)}).join(""))}return u(e.join(""),16)},u.config=function(){var a,b,c=0,e={},n=arguments,o=n[0],r="\x63\x6f\x6e\x66\x69\x67",s=function(a,b,c){return!((p=b>a||a>c)||m(a)!=a&&0!==a)},t=o&&"\x6f\x62\x6a\x65\x63\x74"==typeof o?function(){return o.hasOwnProperty(b)?null!=(a=o[b]):void 0}:function(){return n.length>c?null!=(a=n[c++]):void 0};return t(b="\x44\x45\x43\x49\x4d\x41\x4c\x5f\x50\x4c\x41\x43\x45\x53")&&(s(a,0,d)?f=0|a:v(a,b,r)),e[b]=f,t(b="\x52\x4f\x55\x4e\x44\x49\x4e\x47\x5f\x4d\x4f\x44\x45")&&(s(a,0,8)?g=0|a:v(a,b,r)),e[b]=g,t(b="\x45\x58\x50\x4f\x4e\x45\x4e\x54\x49\x41\x4c\x5f\x41\x54")&&(s(a,-d,d)?h=-(i=~~(0>a?-a:+a)):!p&&a&&s(a[0],-d,0)&&s(a[1],0,d)?(h=~~a[0],i=~~a[1]):v(a,b,r,1)),e[b]=[h,i],t(b="\x52\x41\x4e\x47\x45")&&(s(a,-d,d)&&~~a?j=-(k=~~(0>a?-a:+a)):!p&&a&&s(a[0],-d,-1)&&s(a[1],1,d)?(j=~~a[0],k=~~a[1]):v(a,b,r,1,1)),e[b]=[j,k],t(b="\x45\x52\x52\x4f\x52\x53")&&(a===!!a||1===a||0===a?(p=q=0,m=(l=!!a)?parseInt:parseFloat):v(a,b,r,0,0,1)),e[b]=l,e},n.abs=n.absoluteValue=function(){var a=new u(this);return a.s<0&&(a.s=1),a},n.bitLength=function(){return this.toString(2).length},n.ceil=function(){return A(this,0,2)},n.comparedTo=n.cmp=function(a,b){var c,d=this,e=d.c,f=(q=-q,a=new u(a,b)).c,g=d.s,h=a.s,i=d.e,j=a.e;if(!g||!h)return null;if(c=e&&!e[0],b=f&&!f[0],c||b)return c?b?0:-h:g;if(g!=h)return g;if(c=0>g,b=i==j,!e||!f)return b?0:!e^c?1:-1;if(!b)return i>j^c?1:-1;for(g=-1,h=(i=e.length)<(j=f.length)?i:j;++g<h;)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1},n.dividedBy=n.div=function(a,b){var c=this.c,d=this.e,e=this.s,f=(q=2,a=new u(a,b)).c,g=a.e,h=a.s,i=e==h?1:-1;return(d||c&&c[0])&&(g||f&&f[0])?x(c,f,d-g,i,10):new u(e&&h&&(c?!f||c[0]!=f[0]:f)?c&&0==c[0]||!f?0*i:i/0:NaN)},n.equals=n.eq=function(a,b){return q=3,0===this.cmp(a,b)},n.floor=function(){return A(this,0,3)},n.greaterThan=n.gt=function(a,b){return q=4,this.cmp(a,b)>0},n.greaterThanOrEqualTo=n.gte=function(a,b){return q=5,1==(b=this.cmp(a,b))||0===b},n.isFinite=n.isF=function(){return!!this.c},n.isNaN=function(){return!this.s},n.isNegative=n.isNeg=function(){return this.s<0},n.isZero=n.isZ=function(){return!!this.c&&0==this.c[0]},n.lessThan=n.lt=function(a,b){return q=6,this.cmp(a,b)<0},n.lessThanOrEqualTo=n.lte=n.le=function(a,b){return q=7,-1==(b=this.cmp(a,b))||0===b},n.minus=n.sub=function(a,b){var c,d,e,f,k,l,m,n,h=this,i=h.s;if(b=(q=8,a=new u(a,b)).s,!i||!b)return new u(NaN);if(i!=b)return a.s=-b,h.plus(a);if(k=h.c,l=h.e,m=a.c,n=a.e,!l||!n){if(!k||!m)return k?(a.s=-b,a):new u(m?h:NaN);if(!k[0]||!m[0])return m[0]?(a.s=-b,a):new u(k[0]?h:3==g?-0:0)}if(k=k.slice(),i=l-n){for(c=(f=0>i)?(i=-i,k):(n=l,m),c.reverse(),b=i;b--;c.push(0));c.reverse()}else for(e=((f=k.length<m.length)?k:m).length,i=b=0;e>b;b++)if(k[b]!=m[b]){f=k[b]<m[b];break}if(f&&(c=k,k=m,m=c,a.s=-a.s),(b=-((e=k.length)-m.length))>0)for(;b--;k[e++]=0);for(b=m.length;b>i;){if(k[--b]<m[b]){for(d=b;d&&!k[--d];k[d]=9);--k[d],k[b]+=10}k[b]-=m[b]}for(;0==k[--e];k.pop());for(;0==k[0];k.shift(),--n);return(j>n||!k[0])&&(k[0]||(a.s=3==g?-1:1),k=[n=0]),a.c=k,a.e=n,a},n.modulo=n.mod=function(a,b){var c=this,d=c.c,e=(q=9,a=new u(a,b)).c,h=c.s,i=a.s;return b=!h||!i||e&&!e[0],b||d&&!d[0]?new u(b?NaN:c):(c.s=a.s=1,b=1==a.cmp(c),c.s=h,a.s=i,b?new u(c):(h=f,i=g,f=0,g=1,c=c.div(a),f=h,g=i,this.minus(c.times(a))))},n.negated=n.neg=function(){var a=new u(this);return a.s=-a.s||null,a},n.plus=n.add=function(a,b){var c,f,g,h,i,d=this,e=d.s;if(b=(q=10,a=new u(a,b)).s,!e||!b)return new u(NaN);if(e!=b)return a.s=-b,d.minus(a);if(f=d.e,g=d.c,h=a.e,i=a.c,!f||!h){if(!g||!i)return new u(e/0);if(!g[0]||!i[0])return i[0]?a:new u(g[0]?d:0*e)}if(g=g.slice(),e=f-h){for(c=e>0?(h=f,i):(e=-e,g),c.reverse();e--;c.push(0));c.reverse()}for(g.length-i.length<0&&(c=i,i=g,g=c),e=i.length,b=0;e;b=(g[--e]=g[e]+i[e]+b)/10^0,g[e]%=10);for(b&&(g.unshift(b),++h>k&&(g=h=null)),e=g.length;0==g[--e];g.pop());return a.c=g,a.e=h,a},n.toPower=n.pow=function(a){var b=0*a==0?0|a:a,c=new u(this),d=new u(t);if(((p=-e>a||a>e)&&(b=1*a/0)||m(a)!=a&&0!==a&&!(b=NaN))&&!v(a,"\x65\x78\x70\x6f\x6e\x65\x6e\x74","\x70\x6f\x77")||!b)return new u(Math.pow(c.toS(),b));for(b=0>b?-b:b;1&b&&(d=d.times(c)),b>>=1,b;)c=c.times(c);return 0>a?t.div(d):d},n.powm=function(a,b){return this.pow(a).mod(b)},n.round=function(a,b){return a=null==a||((p=0>a||a>d)||m(a)!=a)&&!v(a,"\x64\x65\x63\x69\x6d\x61\x6c\x20\x70\x6c\x61\x63\x65\x73","\x72\x6f\x75\x6e\x64")?0:0|a,b=null==b||((p=0>b||b>8)||m(b)!=b&&0!==b)&&!v(b,"\x6d\x6f\x64\x65","\x72\x6f\x75\x6e\x64")?g:0|b,A(this,a,b)},n.squareRoot=n.sqrt=function(){var a,b,c,d,e=this,h=e.c,i=e.s,j=e.e,k=f,l=g,m=new u("\x30\x2e\x35");if(1!==i||!h||!h[0])return new u(!i||0>i&&(!h||h[0])?NaN:h?e:1/0);for(i=Math.sqrt(e.toS()),g=1,0==i||i==1/0?(a=h.join(""),a.length+j&1||(a+="\x30"),b=new u(Math.sqrt(a)+""),b.c||(b.c=[1]),b.e=((j+1)/2|0)-(0>j||1&j)):b=new u(a=""+i),c=b.e,i=c+(f+=4),3>i&&(i=0),j=i;;)if(d=b,b=m.times(d.plus(e.div(d))),d.c.slice(0,i).join("")===b.c.slice(0,i).join("")){if(h=b.c,i-=a&&b.e<c,9!=h[i]||9!=h[i-1]||9!=h[i-2]||!(9==h[i-3]||a&&4==h[i-3])){if(!(h[j]||h[j-1]||h[j-2]||h[j-3]&&5!=h[j-3]||(h.length>j-2&&(h.length=j-2),b.times(b).eq(e)))){for(;h.length<j-3;)h.push(0);h[j-3]++}return g=l,z(b,f=k,10),b}if(a&&9==h[i-3]&&(d=b.round(k,0),d.times(d).eq(e)))return g=l,f=k,d;f+=4,i+=4,a=""}},n.times=n.mul=function(a,b){var c,d=this,e=d.c,f=(q=11,a=new u(a,b)).c,g=d.e,h=a.e,i=d.s;if(a.s=i==(b=a.s)?1:-1,!((g||e&&e[0])&&(h||f&&f[0])))return new u(!i||!b||e&&!e[0]&&!f||f&&!f[0]&&!e?NaN:e&&f?0*a.s:a.s/0);for(a.e=g+h,(i=e.length)<(b=f.length)&&(c=e,e=f,f=c,h=i,i=b,b=h),h=i+b,c=[];h--;c.push(0));for(g=b-1;g>-1;g--){for(b=0,h=i+g;h>g;b=c[h]+f[g]*e[h-g-1]+b,c[h--]=b%10|0,b=b/10|0);b&&(c[h]=(c[h]+b)%10)}for(b&&++a.e,!c[0]&&c.shift(),h=c.length;!c[--h];c.pop());return a.c=a.e>k?a.e=null:a.e<j?[a.e=0]:c,a},n.toBuffer=function(a){var b,c,d,e,f,g,h,i,j,k;if("\x73\x74\x72\x69\x6e\x67"==typeof a){if("\x6d\x70\x69\x6e\x74"!==a)return"\x55\x6e\x73\x75\x70\x70\x6f\x72\x74\x65\x64\x20\x42\x75\x66\x66\x65\x72\x20\x72\x65\x70\x72\x65\x73\x65\x6e\x74\x61\x74\x69\x6f\x6e";if(b=this.abs(),c=b.toBuffer({size:1,endian:"\x62\x69\x67"}),d=1===c.length&&0===c[0]?0:c.length,128&c[0]&&d++,e=new Buffer(4+d),d>0&&c.copy(e,4+(128&c[0]?1:0)),128&c[0]&&(e[4]=0),e[0]=d&255<<24,e[1]=d&255<<16,e[2]=65280&d,e[3]=255&d,f=this.lt(0))for(g=4;g<e.length;g++)e[g]=255-e[g];return e[4]=127&e[4]|(f?128:0),f&&e[e.length-1]++,e}if(a||(a={}),h={1:"\x62\x69\x67","-1":"\x6c\x69\x74\x74\x6c\x65"}[a.endian]||a.endian||"\x62\x69\x67",i=this.toString(16),"\x2d"===i.charAt(0))throw Error("\x63\x6f\x6e\x76\x65\x72\x74\x69\x6e\x67\x20\x6e\x65\x67\x61\x74\x69\x76\x65\x20\x6e\x75\x6d\x62\x65\x72\x73\x20\x74\x6f\x20\x42\x75\x66\x66\x65\x72\x73\x20\x6e\x6f\x74\x20\x73\x75\x70\x70\x6f\x72\x74\x65\x64\x20\x79\x65\x74");for(j="\x61\x75\x74\x6f"===a.size?Math.ceil(i.length/2):a.size||1,d=Math.ceil(i.length/(2*j))*j,c=new Buffer(d);i.length<2*d;)i="\x30"+i;return k=i.split(RegExp("\x28\x2e\x7b"+2*j+"\x7d\x29")).filter(function(a){return a.length>0}),k.forEach(function(a,b){var d,e;for(d=0;j>d;d++)e=b*j+("\x62\x69\x67"===h?d:j-d-1),c[e]=parseInt(a.slice(2*d,2*d+2),16)}),c},n.toExponential=n.toE=function(a){return y(this,(null==a||((p=0>a||a>d)||m(a)!=a&&0!==a)&&!v(a,"\x64\x65\x63\x69\x6d\x61\x6c\x20\x70\x6c\x61\x63\x65\x73","\x74\x6f\x45"))&&this.c?this.c.length-1:0|a,1)},n.toFixed=n.toF=function(a){var b,c,e,f=this;return null==a||((p=0>a||a>d)||m(a)!=a&&0!==a)&&!v(a,"\x64\x65\x63\x69\x6d\x61\x6c\x20\x70\x6c\x61\x63\x65\x73","\x74\x6f\x46")||(e=f.e+(0|a)),b=h,a=i,h=-(i=1/0),e==c?c=f.toS():(c=y(f,e),f.s<0&&f.c&&(f.c[0]?c.indexOf("\x2d")<0&&(c="\x2d"+c):c=c.replace(/^-/,""))),h=b,i=a,c},n.toFraction=n.toFr=function(a){var b,c,d,e,h,i,j,m=e=new u(t),n=d=new u("\x30"),o=this,r=o.c,s=k,w=f,x=g,y=new u(t);if(!r)return o.toS();for(j=y.e=r.length-o.e-1,(null==a||(!(q=12,i=new u(a)).s||(p=i.cmp(m)<0||!i.c)||l&&i.e<i.c.length-1)&&!v(a,"\x6d\x61\x78\x20\x64\x65\x6e\x6f\x6d\x69\x6e\x61\x74\x6f\x72","\x74\x6f\x46\x72")||(a=i).cmp(y)>0)&&(a=j>0?y:m),k=1/0,i=new u(r.join("")),f=0,g=1;b=i.div(y),h=e.plus(b.times(n)),1!=h.cmp(a);)e=n,n=h,m=d.plus(b.times(h=m)),d=h,y=i.minus(b.times(h=y)),i=h;return h=a.minus(e).div(n),d=d.plus(h.times(m)),e=e.plus(h.times(n)),d.s=m.s=o.s,f=2*j,g=x,c=m.div(n).minus(o).abs().cmp(d.div(e).minus(o).abs())<1?[m.toS(),n.toS()]:[d.toS(),e.toS()],k=s,f=w,c},n.toPrecision=n.toP=function(a){return null==a||((p=1>a||a>d)||m(a)!=a)&&!v(a,"\x70\x72\x65\x63\x69\x73\x69\x6f\x6e","\x74\x6f\x50")?this.toS():y(this,0|--a,2)},n.toString=n.toS=function(a){var b,c,d,e=this,f=e.e;if(null===f)c=e.s?"\x49\x6e\x66\x69\x6e\x69\x74\x79":"\x4e\x61\x4e";else{if(a===b&&(h>=f||f>=i))return y(e,e.c.length-1,1);if(c=e.c.join(""),0>f){for(;++f;c="\x30"+c);c="\x30\x2e"+c}else if(d=c.length,f>0)if(++f>d)for(f-=d;f--;c+="\x30");else d>f&&(c=c.slice(0,f)+"\x2e"+c.slice(f));else if(b=c.charAt(0),d>1)c=b+"\x2e"+c.slice(1);else if("\x30"==b)return b;if(null!=a)if((p=!(a>=2&&65>a))||a!=(0|a)&&l)v(a,"\x62\x61\x73\x65","\x74\x6f\x53");else if(c=w(c,0|a,10,e.s),"\x30"==c)return c}return e.s<0?"\x2d"+c:c},n.toNumber=function(){return parseInt(""+this,10)},n.valueOf=function(){return this.toS()},a.exports=u}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x68\x65\x63\x6b\x49\x70\x49\x6e\x4c\x69\x73\x74\x2e\x6a\x73",function(a,b,c){"use strict";function f(a,b,c){var f,g,h,i;if(d.isBoolean(c)||(c=!0),!d.isArray(a)||0===a.length)return c;if(!a._subNets)for(a._subNets=[],f=a.length-1;f>=0;f--){h=a[f],e.isV4Format(h)?h+="\x2f\x33\x32":e.isV6Format(h)&&(h+="\x2f\x31\x32\x38");try{i=e.cidrSubnet(h),a._subNets.push(i)}catch(j){console.error("\x43\x68\x65\x63\x6b\x49\x70\x49\x6e\x4c\x69\x73\x74\x3a",""+j)}}if(0===a._subNets.length)return c;for(f=0,g=a._subNets.length;g>f;f++)if(a._subNets[f].contains(b))return!0;return!1}var d=c("\x6c\x6f\x64\x61\x73\x68"),e=c("\x69\x70");a.exports=f}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73",function(a){"use strict";a.exports={activeDelegates:101,addressLength:208,blockHeaderLength:248,confirmationLength:77,epochTime:new Date(Date.UTC(2016,4,24,17,0,0,0)),fees:{send:1e7,vote:1e8,secondsignature:5e8,delegate:25e8,multisignature:5e8,dapp:25e8},feeStart:1,feeStartVolume:1e12,fixedPoint:Math.pow(10,8),forgingTimeOut:500,maxAddressesLength:26624,maxAmount:1e8,maxClientConnections:100,maxConfirmations:7700,maxPayloadLength:1048576,maxRequests:12e4,maxSignaturesLength:50176,maxTxsPerBlock:25,numberLength:1e8,requestLength:104,rewards:{milestones:[5e8,4e8,3e8,2e8,1e8],offset:2160,distance:3e6},signatureLength:196,totalAmount:1e16,unconfirmedTransactionTimeOut:10800}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x61\x70\x70\x43\x61\x74\x65\x67\x6f\x72\x69\x65\x73\x2e\x6a\x73",function(a){"use strict";a.exports={Education:0,Entertainment:1,Finance:2,Games:3,Miscellaneous:4,Networking:5,Science:6,Social:7,Utilities:8}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x61\x70\x70\x54\x79\x70\x65\x73\x2e\x6a\x73",function(a){"use strict";a.exports={DAPP:0,FILE:1}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x61\x74\x61\x62\x61\x73\x65\x2e\x6a\x73",function(a,b,c){"use strict";function h(a,b){this.checkMigrations=function(a){b.one("\x53\x45\x4c\x45\x43\x54\x20\x74\x6f\x5f\x72\x65\x67\x63\x6c\x61\x73\x73\x28\x27\x6d\x69\x67\x72\x61\x74\x69\x6f\x6e\x73\x27\x29").then(function(b){return a(null,!!b.to_regclass)})["\x63\x61\x74\x63\x68"](function(b){return a(b)})},this.getLastMigration=function(a,c){return a?void b.query("\x53\x45\x4c\x45\x43\x54\x20\x2a\x20\x46\x52\x4f\x4d\x20\x6d\x69\x67\x72\x61\x74\x69\x6f\x6e\x73\x20\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x22\x69\x64\x22\x20\x44\x45\x53\x43\x20\x4c\x49\x4d\x49\x54\x20\x31").then(function(a){return a[0]&&(a[0].id=e(a[0].id)),c(null,a[0])})["\x63\x61\x74\x63\x68"](function(a){return c(a)}):c(null,null)},this.readPendingMigrations=function(a,b){function h(a){var b=a.match(/_.+\.sql$/);return Array.isArray(b)?b[0].replace(/_/,"").replace(/\.sql$/,""):null}function i(a){var b=a.match(/^[0-9]+/);return Array.isArray(b)?e(b[0]):null}var c=g.join("\x73\x71\x6c","\x6d\x69\x67\x72\x61\x74\x69\x6f\x6e\x73"),d=[];f.readdir(c,function(e,j){return e?b(e):(j.map(function(a){return{id:i(a),name:h(a),path:g.join(c,a)}}).filter(function(a){return a.id&&a.name&&f.statSync(a.path).isFile()&&/\.sql$/.test(a.path)}).forEach(function(b){(!a||b.id.greaterThan(a.id))&&d.push(b)}),b(null,d))})},this.applyPendingMigrations=function(c,e){var f=[];d.eachSeries(c,function(c,d){var e=new a.QueryFile(c.path,{minify:!0});b.query(e).then(function(){return f.push(c),d()})["\x63\x61\x74\x63\x68"](function(a){return d(a)})},function(a){return e(a,f)})},this.insertAppliedMigrations=function(a,c){d.eachSeries(a,function(a,c){b.query("\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x6d\x69\x67\x72\x61\x74\x69\x6f\x6e\x73\x28\x69\x64\x2c\x20\x6e\x61\x6d\x65\x29\x20\x56\x41\x4c\x55\x45\x53\x28\x24\x31\x2c\x20\x24\x32\x29\x20\x4f\x4e\x20\x43\x4f\x4e\x46\x4c\x49\x43\x54\x20\x44\x4f\x20\x4e\x4f\x54\x48\x49\x4e\x47",[""+a.id,a.name]).then(function(){return c()})["\x63\x61\x74\x63\x68"](function(a){return c(a)})},function(a){return c(a)})},this.applyRuntimeQueryFile=function(c){var d=new a.QueryFile(g.join("\x73\x71\x6c","\x72\x75\x6e\x74\x69\x6d\x65\x2e\x73\x71\x6c"),{minify:!0});b.query(d).then(function(){return c()})["\x63\x61\x74\x63\x68"](function(a){return c(a)})}}var d=c("\x61\x73\x79\x6e\x63"),e=c("\x2e\x2f\x62\x69\x67\x6e\x75\x6d"),f=c("\x66\x73"),g=c("\x70\x61\x74\x68");a.exports.connect=function(a,b,e){var j,k,f={pgNative:!0},g=c("\x70\x67\x2d\x70\x72\x6f\x6d\x69\x73\x65")(f),i=c("\x70\x67\x2d\x6d\x6f\x6e\x69\x74\x6f\x72");i.attach(f,a.logEvents),i.setTheme("\x6d\x61\x74\x72\x69\x78"),i.log=function(a,c){b.log(c.event,c.text),c.display=!1},a.user=a.user||process.env.USER,j=g(a),k=new h(g,j),d.waterfall([k.checkMigrations,k.getLastMigration,k.readPendingMigrations,k.applyPendingMigrations,k.insertAppliedMigrations,k.applyRuntimeQueryFile],function(a){return e(a,j)})}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x69\x66\x66\x2e\x6a\x73",function(a){"use strict";a.exports={reverse:function(a){var c,d,b=a.slice();for(c=0;c<b.length;c++)d="\x2d"===b[c][0]?"\x2b":"\x2d",b[c]=d+b[c].slice(1);return b},merge:function(a,b){var d,e,f,g,c=a?a.slice():[];for(e=0;e<b.length;e++){if(f=b[e][0],g=b[e].slice(1),"\x2b"===f){if(c=c||[],d=-1,c&&(d=c.indexOf(g)),-1!==d)return!1;c.push(g)}if("\x2d"===f){if(d=-1,c&&(d=c.indexOf(g)),-1===d)return!1;c.splice(d,1),c.length||(c=null)}}return c}}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x65\x64\x2e\x6a\x73",function(a,b,c){"use strict";var d=c("\x6a\x73\x2d\x6e\x61\x63\x6c"),e={};d.instantiate(function(a){e.makeKeypair=function(b){var c=a.crypto_sign_keypair_from_seed(b);return{publicKey:new Buffer(c.signPk),privateKey:new Buffer(c.signSk)}},e.sign=function(b,c){var d=a.crypto_sign_detached(b,new Buffer(c.privateKey,"\x68\x65\x78"));return new Buffer(d)},e.verify=function(b,c,d){return a.crypto_sign_verify_detached(c,b,d)}}),a.exports=e}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x65\x78\x63\x65\x70\x74\x69\x6f\x6e\x73\x2e\x6a\x73",function(a){"use strict";a.exports={blockRewards:["\x31\x31\x38\x30\x37\x37\x34\x30\x36\x32\x32\x36\x38\x30\x32\x39\x39\x39\x32\x31","\x35\x37\x31\x34\x30\x31\x36\x31\x35\x31\x39\x38\x37\x30\x38\x30\x33\x35\x32"],senderPublicKey:["\x35\x32\x35\x32\x35\x32\x36\x32\x30\x37\x37\x33\x33\x35\x35\x33\x34\x39\x39"],signatures:["\x33\x32\x37\x34\x30\x37\x31\x34\x30\x32\x35\x38\x37\x30\x38\x34\x32\x34\x34","\x31\x30\x34\x30\x33\x31\x34\x31\x38\x37\x33\x31\x38\x39\x35\x38\x38\x30\x31\x32","\x31\x36\x38\x39\x36\x34\x39\x34\x35\x38\x34\x34\x34\x30\x30\x37\x38\x30\x37\x39"],votes:["\x31\x36\x32\x37\x32\x35\x30\x30\x36\x30\x30\x31\x36\x31\x38\x32\x35\x35\x30\x32","\x31\x37\x31\x39\x37\x33\x32\x38\x37\x36\x30\x31\x34\x39\x39\x38\x35\x39\x35\x31"]}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x69\x6e\x73\x65\x72\x74\x73\x2e\x6a\x73",function(a,b,c){"use strict";function e(a,b,c){if(!(this instanceof e))return new e(a,b,c);var f=this;if(!a||!a.table||!a.values)throw"\x49\x6e\x73\x65\x72\x74\x73\x3a\x20\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x63\x6f\x72\x64\x20\x61\x72\x67\x75\x6d\x65\x6e\x74";if(!b)throw"\x49\x6e\x73\x65\x72\x74\x73\x3a\x20\x49\x6e\x76\x61\x6c\x69\x64\x20\x76\x61\x6c\x75\x65\x73\x20\x61\x72\x67\x75\x6d\x65\x6e\x74";this.namedTemplate=function(){return a.fields.map(function(a){return"\x24\x7b"+a+"\x7d"}).join("\x2c")},this._template=this.namedTemplate(),this.template=function(){var b,e=a.fields.map(d.as.name).join("\x2c");return b=c?"\x24\x31":"\x28"+this.namedTemplate()+"\x29",d.as.format("\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x24\x31\x7e\x28\x24\x32\x5e\x29\x20\x56\x41\x4c\x55\x45\x53\x20\x24\x33\x5e",[a.table,e,b])},this._rawDBType=!0,this.formatDBType=function(){return b.map(function(a){return"\x28"+d.as.format(f._template,a)+"\x29"}).join("\x2c")}}var d=c("\x70\x67\x2d\x70\x72\x6f\x6d\x69\x73\x65");a.exports=e}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6a\x73\x6f\x6e\x2d\x73\x63\x68\x65\x6d\x61\x2f\x66\x69\x65\x6c\x64\x2e\x6a\x73",function(a,b,c){"use strict";function f(a,b,c,d,f){e.call(this,a,b,c,d,f)}var e,d=c("\x75\x74\x69\x6c");a.exports=f,e=c("\x2e\x2e\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72").prototype.Field,d.inherits(f,e)}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6a\x73\x6f\x6e\x2d\x73\x63\x68\x65\x6d\x61\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72\x2e\x6a\x73",function(a,b,c){"use strict";function g(a){e.call(this,a)}var e,f,d=c("\x2e\x2e\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72\x2f\x75\x74\x69\x6c\x73");a.exports=g,e=c("\x2e\x2e\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72"),f=c("\x2e\x2f\x66\x69\x65\x6c\x64"),d.inherits(g,e),g.prototype.Field=g.Field=f,g.prototype.rules=g.rules={},g.addRule=e.addRule,g.fieldProperty=e.fieldProperty,g.options=d.extend({},e.options),g.validate=e.validate,g.addRule("\x74\x79\x70\x65",{validate:function(a,b){switch(a){case"\x61\x72\x72\x61\x79":return Array.isArray(b);case"\x6f\x62\x6a\x65\x63\x74":return"\x6f\x62\x6a\x65\x63\x74"==typeof b&&null!==b;case"\x6e\x75\x6c\x6c":return null===b;case"\x69\x6e\x74\x65\x67\x65\x72":return"\x6e\x75\x6d\x62\x65\x72"==typeof b;default:return typeof b===a}}}),g.addRule("\x64\x65\x66\x61\x75\x6c\x74",{filter:function(a,b){return void 0===b?a:b}}),g.addRule("\x65\x6e\x75\x6d",{validate:function(a,b){return a.indexOf(b)>-1}}),g.addRule("\x63\x61\x73\x65",{validate:function(a,b){return"\x6c\x6f\x77\x65\x72"===a?(b+"").toLowerCase()===b+"":"\x75\x70\x70\x65\x72"===a?(b+"").toUpperCase()===b+"":!0}}),g.addRule("\x6d\x69\x6e\x4c\x65\x6e\x67\x74\x68",{validate:function(a,b){return(b+"").length>=a}}),g.addRule("\x6d\x61\x78\x4c\x65\x6e\x67\x74\x68",{validate:function(a,b){return(b+"").length<=a}}),g.addRule("\x70\x61\x74\x74\x65\x72\x6e",{validate:function(a,b){return a instanceof RegExp==!1&&(a=RegExp(a)),a.test(b)}}),g.addRule("\x6d\x69\x6e\x69\x6d\x75\x6d",{validate:function(a,b,c){return c.rules.exclusiveMinimum?b>a:b>=a}}),g.addRule("\x65\x78\x63\x6c\x75\x73\x69\x76\x65\x4d\x69\x6e\x69\x6d\x75\x6d",{}),g.addRule("\x6d\x61\x78\x69\x6d\x75\x6d",{validate:function(a,b,c){return c.rules.exclusiveMaximum?a>b:a>=b}}),g.addRule("\x65\x78\x63\x6c\x75\x73\x69\x76\x65\x4d\x61\x78\x69\x6d\x75\x6d",{}),g.addRule("\x64\x69\x76\x69\x73\x69\x62\x6c\x65\x42\x79",{validate:function(a,b){return b%a===0}}),g.addRule("\x70\x72\x6f\x70\x65\x72\x74\x69\x65\x73",{validate:function(a,b,c){c.isObject()&&c.async(function(d){function i(a){null!==g&&(--g,a&&(g=null),g||d(a))}var g,h,e={},f=Object.getOwnPropertyNames(a);Object.keys(b).forEach(function(a){f.indexOf(a)<0&&f.push(a)}),g=f.length,h=c.rules.additionalProperties||!1,f.forEach(function(d){var f,g;if(a.hasOwnProperty(d)){if(!b.hasOwnProperty(d))return f=a[d],f.hasOwnProperty("\x64\x65\x66\x61\x75\x6c\x74")&&(e[d]=f["\x64\x65\x66\x61\x75\x6c\x74"]),i();f=a[d]}else{if(h===!0)return e[d]=b[d],i();if(!h)return i();f=h}g=c.child(d,b[d],f,b),g.validate(function(a,b,c){e[d]=c,i(a)})})})}}),g.addRule("\x61\x64\x64\x69\x74\x69\x6f\x6e\x61\x6c\x50\x72\x6f\x70\x65\x72\x74\x69\x65\x73",{}),g.addRule("\x6d\x69\x6e\x50\x72\x6f\x70\x65\x72\x74\x69\x65\x73",{validate:function(a,b){return Object.keys(b).length>=a}}),g.addRule("\x6d\x61\x78\x50\x72\x6f\x70\x65\x72\x74\x69\x65\x73",{validate:function(a,b){return Object.keys(b).length<=a}}),g.addRule("\x72\x65\x71\x75\x69\x72\x65\x64",{validate:function(a,b,c){a.forEach(function(a){b.hasOwnProperty(a)||c.issue({path:a,rule:"\x72\x65\x71\x75\x69\x72\x65\x64"})})}}),g.addRule("\x69\x74\x65\x6d\x73",{validate:function(a,b,c){Array.isArray(b)&&c.async(function(d){function g(a){null!==f&&(--f,a&&(f=null),f||d(a))}var e=[],f=b.length;b.forEach(function(d,f){var h=c.child(f,d,a,b);h.validate(function(a,b,c){return a?g(a):(e[f]=c,void g())})})})}}),g.addRule("\x6d\x69\x6e\x49\x74\x65\x6d\x73",{validate:function(a,b){return Array.isArray(b)&&b.length>=a}}),g.addRule("\x6d\x61\x78\x49\x74\x65\x6d\x73",{validate:function(a,b){return Array.isArray(b)&&b.length<=a}}),g.addRule("\x75\x6e\x69\x71\x75\x65\x49\x74\x65\x6d\x73",{validate:function(a,b,c){var d,e,f,g;if(a&&Array.isArray(b)){for(d=-1,e=b.length,f=[];++d<e;)g=b[d],f.indexOf(g)>-1?c.issue({path:d,rule:"\x75\x6e\x69\x71\x75\x65\x49\x74\x65\x6d\x73",accept:!0}):f.push(g);return Array.isArray(b)&&b.length>=a}}})}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6d\x69\x6c\x65\x73\x74\x6f\x6e\x65\x42\x6c\x6f\x63\x6b\x73\x2e\x6a\x73",function(a){"use strict";a.exports={}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6f\x72\x64\x65\x72\x42\x79\x2e\x6a\x73",function(a){"use strict";function d(a,b){function f(a){return a?"\x73\x74\x72\x69\x6e\x67"==typeof b.fieldPrefix?b.fieldPrefix+a:"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.fieldPrefix?b.fieldPrefix(a):a:a}function g(a){return a&&b.quoteField?"\x22"+a+"\x22":a}var c,d,e,h,i;if(b="\x6f\x62\x6a\x65\x63\x74"==typeof b?b:{},b.sortField=b.sortField||null,b.sortMethod=b.sortMethod||null,b.sortFields=Array.isArray(b.sortFields)?b.sortFields:[],void 0===b.quoteField?b.quoteField=!0:b.quoteField=!!b.quoteField,a&&(e=(a+"").split("\x3a"),c=e[0].replace(/[^\w\s]/gi,""),2===e.length&&(d="\x64\x65\x73\x63"===e[1]?"\x44\x45\x53\x43":"\x41\x53\x43")),h=0===b.sortFields.length,i=b.sortFields.length>=1&&b.sortFields.indexOf(c)>-1,c){if(!h&&!i)return{error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x6f\x72\x74\x20\x66\x69\x65\x6c\x64"};c=f(c)}else c=f(b.sortField);return d||(d=b.sortMethod),{sortField:g(c),sortMethod:d}}a.exports=d}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x65\x71\x75\x65\x73\x74\x2d\x6c\x69\x6d\x69\x74\x65\x72\x2e\x6a\x73",function(a,b,c){"use strict";function f(a){return"\x6f\x62\x6a\x65\x63\x74"==typeof a?{max:Math.floor(a.max)||e.max,delayMs:Math.floor(a.delayMs)||e.delayMs,delayAfter:Math.floor(a.delayAfter)||e.delayAfter,windowMs:Math.floor(a.windowMs)||e.windowMs}:e}var d=c("\x65\x78\x70\x72\x65\x73\x73\x2d\x72\x61\x74\x65\x2d\x6c\x69\x6d\x69\x74"),e={
max:0,delayMs:0,delayAfter:0,windowMs:6e4};a.exports=function(a,b){b.trustProxy&&a.enable("\x74\x72\x75\x73\x74\x20\x70\x72\x6f\x78\x79"),b.api=b.api||{},b.api.options=b.api.options||{},b.peers=b.peers||{},b.peers.options=b.peers.options||{};var c={client:f(b.api.options.limits),peer:f(b.peers.options.limits)};return c.middleware={client:a.use("\x2f\x61\x70\x69\x2f",new d(c.client)),peer:a.use("\x2f\x70\x65\x65\x72\x2f",new d(c.peer))},c}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x65\x71\x75\x65\x73\x74\x2d\x73\x61\x6e\x69\x74\x69\x7a\x65\x72\x2e\x6a\x73",function(a,b,c){"use strict";function g(a){f.call(this,a)}function i(a){this.validator=a}function j(a,b){var c,d,e;for(b=b.slice(),d=-1,e=b.length-1;++d<e;){if(c=b[d],"\x6f\x62\x6a\x65\x63\x74"!=typeof a[c])return null;a=a[c]}return a[b[e]]}function k(a){var b={};return"\x21"===a.charAt(a.length-1)?(b.required=!0,a=a.slice(0,-1)):"\x3f"===a.charAt(a.length-1)&&(b.empty=!0,a=a.slice(0,-1)),b[a]=!0,b}var h,d=c("\x65\x78\x74\x65\x6e\x64"),e=c("\x75\x74\x69\x6c").inherits,f=c("\x2e\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72\x2e\x6a\x73");a.exports=g,e(g,f),g.prototype.rules={},d(g,f),g.options=d({reporter:i},f.options),g.addRule("\x65\x6d\x70\x74\x79",{validate:function(a,b,c){return a===!1?!c.isEmpty():void 0}}),g.addRule("\x73\x74\x72\x69\x6e\x67",{filter:function(a,b,c){return c.isEmpty()&&c.rules.empty?null:(b||"")+""}}),g.addRule("\x72\x65\x67\x65\x78\x70",{message:"\x76\x61\x6c\x75\x65\x20\x73\x68\x6f\x75\x6c\x64\x20\x6d\x61\x74\x63\x68\x20\x74\x65\x6d\x70\x6c\x61\x74\x65",validate:function(a,b){return"\x73\x74\x72\x69\x6e\x67"!=typeof b?!1:a.test(b)}}),g.addRule("\x62\x6f\x6f\x6c\x65\x61\x6e",{filter:function(a,b,c){if(c.isEmpty()&&c.rules.empty)return null;switch((b+"").toLowerCase()){case"\x66\x61\x6c\x73\x65":case"\x66":return!1;default:return!!b}}}),g.addRule("\x69\x6e\x74",{filter:function(a,b,c){return c.isEmpty()&&c.rules.empty?null:isNaN(b)||parseInt(b)!==b||isNaN(parseInt(b,10))?0:parseInt(b)}}),g.addRule("\x66\x6c\x6f\x61\x74",{filter:function(a,b,c){return c.isEmpty()&&c.rules.empty?null:(b=parseFloat(b),isNaN(b)?0:b)}}),g.addRule("\x6f\x62\x6a\x65\x63\x74",{filter:function(a,b,c){return c.isEmpty()&&c.rules.empty?null:"\x5b\x6f\x62\x6a\x65\x63\x74\x20\x4f\x62\x6a\x65\x63\x74\x5d"===Object.prototype.toString.call(b)?b:{}}}),g.addRule("\x61\x72\x72\x61\x79",{filter:function(a,b,c){return c.isEmpty()&&c.rules.empty?null:"\x73\x74\x72\x69\x6e\x67"==typeof b&&("\x73\x74\x72\x69\x6e\x67"==typeof a||a instanceof RegExp)?b.length?b.split(a):[]:Array.isArray(b)?b:[]}}),g.addRule("\x61\x72\x72\x61\x79\x4f\x66",{validate:function(a,b,c){var d,e;if(c.isEmpty()&&c.rules.empty)return null;if(!Array.isArray(b))return!1;for(d=b.length,e=-1;++e<d;)c.child(e,b[e],a,b).validate()}}),g.addRule("\x68\x65\x78",{filter:function(a,b,c){return c.isEmpty()&&c.rules.empty?null:b},validate:function(a,b,c){return c.isEmpty()&&c.rules.empty?void 0:/^([A-Fa-f0-9]{2})*$/.test((b||"")+"")}}),g.addRule("\x62\x75\x66\x66\x65\x72",{filter:function(a,b){"\x73\x74\x72\x69\x6e\x67"!=typeof a&&(a="\x75\x74\x66\x38");try{return new Buffer(b||"",a)}catch(c){return new Buffer}}}),g.addRule("\x76\x61\x72\x69\x61\x6e\x74",{filter:function(a,b,c){return c.isEmpty()&&c.rules.empty?null:void 0===b?"":b}}),g.addRule("\x72\x65\x71\x75\x69\x72\x65\x64",{message:"\x76\x61\x6c\x75\x65\x20\x69\x73\x20\x72\x65\x71\x75\x69\x72\x65\x64",validate:function(a,b){return void 0!==b===a}}),g.addRule("\x64\x65\x66\x61\x75\x6c\x74",{filter:function(a,b){return void 0===b?a:b}}),g.addRule("\x70\x72\x6f\x70\x65\x72\x74\x69\x65\x73",{validate:function(a,b,c){return c.isObject()?void Object.getOwnPropertyNames(a).forEach(function(d){var f,e=a[d];"\x73\x74\x72\x69\x6e\x67"==typeof e&&(e=k(e)),f=c.child(d,b[d],e,b),f.validate(function(a,c,e){if(a)throw a;b[d]=e})}):!1}}),g.addRule("\x6d\x69\x6e\x4c\x65\x6e\x67\x74\x68",{message:"\x6d\x69\x6e\x69\x6d\x75\x6d\x20\x6c\x65\x6e\x67\x74\x68\x20\x69\x73\x20\x24\x7b\x61\x63\x63\x65\x70\x74\x7d\x2e",validate:function(a,b){return b.length>=a}}),g.addRule("\x63\x61\x73\x65",{message:"\x63\x61\x73\x65\x20\x69\x73\x20\x24\x7b\x61\x63\x63\x65\x70\x74\x7d\x2e",validate:function(a,b){return"\x73\x74\x72\x69\x6e\x67"==typeof b&&("\x6c\x6f\x77\x65\x72"===a&&b===b.toLowerCase()||"\x75\x70\x70\x65\x72"===a&&b===b.toUpperCase())},filter:function(a,b,c){return c.isEmpty()&&c.rules.empty?null:"\x6c\x6f\x77\x65\x72"===a?((b||"")+"").toLowerCase():"\x75\x70\x70\x65\x72"===a?((b||"")+"").toUpperCase():void 0}}),g.addRule("\x6d\x61\x78\x4c\x65\x6e\x67\x74\x68",{message:"\x6d\x61\x78\x69\x6d\x75\x6d\x20\x6c\x65\x6e\x67\x74\x68\x20\x69\x73\x20\x24\x7b\x61\x63\x63\x65\x70\x74\x7d\x2e",validate:function(a,b){return b.length<=a}}),g.addRule("\x6d\x61\x78\x42\x79\x74\x65\x4c\x65\x6e\x67\x74\x68",{message:"\x6d\x61\x78\x69\x6d\x75\x6d\x20\x73\x69\x7a\x65\x20\x69\x73\x20\x24\x7b\x61\x63\x63\x65\x70\x74\x2e\x6c\x65\x6e\x67\x74\x68\x7d\x20\x62\x79\x74\x65\x73",accept:function(a){return"\x6f\x62\x6a\x65\x63\x74"!=typeof a&&(a={encoding:"\x75\x74\x66\x38",length:a}),a},validate:function(a,b,c){return c.isEmpty()&&c.rules.empty?void 0:("\x6f\x62\x6a\x65\x63\x74"==typeof b&&null!==b&&(b=JSON.stringify(b)),Buffer.byteLength(b,"\x75\x74\x66\x38")<=a.length)}}),g.addRule("\x6d\x69\x6e\x42\x79\x74\x65\x4c\x65\x6e\x67\x74\x68",{message:"\x6d\x69\x6e\x69\x6d\x75\x6d\x20\x73\x69\x7a\x65\x20\x69\x73\x20\x24\x7b\x61\x63\x63\x65\x70\x74\x2e\x6c\x65\x6e\x67\x74\x68\x7d\x20\x62\x79\x74\x65\x73",accept:function(a){return"\x6f\x62\x6a\x65\x63\x74"!=typeof a&&(a={encoding:"\x75\x74\x66\x38",length:a}),a},validate:function(a,b,c){return c.isEmpty()&&c.rules.empty?void 0:("\x6f\x62\x6a\x65\x63\x74"==typeof b&&null!==b&&(b=JSON.stringify(b)),Buffer.byteLength(b,"\x75\x74\x66\x38")>=a.length)}}),g.express=function(a){return a=d({},g.options,a),function(b,c,d){function e(c,d,e){var f={};return"\x73\x74\x72\x69\x6e\x67"==typeof c&&(c=b[c]||{}),Object.getOwnPropertyNames(d).forEach(function(a){f[a]=c.hasOwnProperty(a)?c[a]:void 0,"\x73\x74\x72\x69\x6e\x67"==typeof d[a]&&(d[a]=k(d[a]))}),new g(a).validate(f,{properties:d},e)}b.sanitize=e,d()}},h=g.prototype.rules,["\x73\x74\x72\x69\x6e\x67","\x62\x6f\x6f\x6c\x65\x61\x6e","\x69\x6e\x74","\x66\x6c\x6f\x61\x74","\x76\x61\x72\x69\x61\x6e\x74","\x61\x72\x72\x61\x79","\x6f\x62\x6a\x65\x63\x74","\x68\x65\x78","\x62\x75\x66\x66\x65\x72"].forEach(function(a){var b=h[a];"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.filter&&(a in g||(g[a]=function(b,e){var h,i,f={};if("\x6f\x62\x6a\x65\x63\x74"==typeof e?d(f,e):void 0!==e&&(f.empty=e),f[a]=!0,h=new g(g.options).validate(b,f),!h.isValid)throw i=Error(h.issues),i.name="\x56\x61\x6c\x69\x64\x61\x74\x69\x6f\x6e\x45\x72\x72\x6f\x72",i.issues=h.issues,i;return h.value}))}),g.options.reporter=i,i.prototype.format=function(a,b){return(a+"").replace(/\$\{([^}]+)}/g,function(a,c){return j(b,c.split("\x2e"))||""})},i.prototype.convert=function(a){var b=this,c=a.reduce(function(a,b){var c=b.path.join("\x2e");return c in a==!1&&(a[c]=[]),a[c].push(b),a},{}),d="";return Object.getOwnPropertyNames(c).forEach(function(a){d+="\x50\x72\x6f\x70\x65\x72\x74\x79\x20\x27"+a+"\x27\x3a\n",c[a].forEach(function(a){var c=b.validator.getRule(a.rule);d+="\t\x2d\x20",d+=c.hasOwnProperty("\x6d\x65\x73\x73\x61\x67\x65")?b.format(c.message,a)+"\n":"\x62\x72\x65\x61\x6b\x20\x72\x75\x6c\x65\x20\x27"+a.rule+"\x27\n"})}),d}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73",function(a,b,c){"use strict";function e(a,b){var c=this;Object.keys(b).forEach(function(e){var f=e.split("\x20");if(2!==f.length||-1===["\x70\x6f\x73\x74","\x67\x65\x74","\x70\x75\x74"].indexOf(f[0]))throw Error("\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x61\x70\x20\x63\x6f\x6e\x66\x69\x67");c[f[0]](f[1],function(c,g){a[b[e]]({body:"\x67\x65\x74"===f[0]?c.query:c.body},function(a,b){return a?void g.json({success:!1,error:a}):g.json(d({},{success:!0},b))})})})}var d=c("\x65\x78\x74\x65\x6e\x64"),f=function(){var a=c("\x65\x78\x70\x72\x65\x73\x73").Router();return a.use(function(a,b,c){b.header("\x41\x63\x63\x65\x73\x73\x2d\x43\x6f\x6e\x74\x72\x6f\x6c\x2d\x41\x6c\x6c\x6f\x77\x2d\x4f\x72\x69\x67\x69\x6e","\x2a"),b.header("\x41\x63\x63\x65\x73\x73\x2d\x43\x6f\x6e\x74\x72\x6f\x6c\x2d\x41\x6c\x6c\x6f\x77\x2d\x48\x65\x61\x64\x65\x72\x73","\x4f\x72\x69\x67\x69\x6e\x2c\x20\x58\x2d\x52\x65\x71\x75\x65\x73\x74\x65\x64\x2d\x57\x69\x74\x68\x2c\x20\x43\x6f\x6e\x74\x65\x6e\x74\x2d\x54\x79\x70\x65\x2c\x20\x41\x63\x63\x65\x70\x74"),c()}),a.map=e,a};a.exports=f}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73",function(a){"use strict";function d(a,b,c,d){if("\x66\x75\x6e\x63\x74\x69\x6f\x6e"!=typeof a[b])return d("\x46\x75\x6e\x63\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64\x20\x69\x6e\x20\x6d\x6f\x64\x75\x6c\x65\x3a\x20"+b);var e=[c,d];a[b].apply(null,e)}a.exports={callMethod:d}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x65\x71\x75\x65\x6e\x63\x65\x2e\x6a\x73",function(a,b,c){"use strict";function f(a){var c,b={onWarning:null,warningLimit:50};b=d(b,a),c=this,this.sequence=[],setImmediate(function e(){b.onWarning&&c.sequence.length>=b.warningLimit&&b.onWarning(c.sequence.length,b.warningLimit),c.__tick(function(){setTimeout(e,3)})})}var d=c("\x65\x78\x74\x65\x6e\x64"),e=c("\x75\x74\x69\x6c");f.prototype.__tick=function(a){var c,b=this.sequence.shift();return b?(c=[function(c,d){b.done&&setImmediate(b.done,c,d),setImmediate(a)}],b.args&&(c=c.concat(b.args)),void b.worker.apply(b.worker,c)):setImmediate(a)},f.prototype.add=function(a,b,c){if(!c&&b&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b&&(c=b,b=void 0),a&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof a){var d={worker:a,done:c};e.isArray(b)&&(d.args=b),this.sequence.push(d)}},f.prototype.count=function(){return this.sequence.length},a.exports=f}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73",function(a,b,c){"use strict";function e(){var a=d.epochTime;return a}function f(a){var b,c;return void 0===a&&(a=(new Date).getTime()),b=e(),c=b.getTime(),Math.floor((a-c)/1e3)}var d=c("\x2e\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73");a.exports={interval:10,delegates:d.activeDelegates,getTime:function(a){return f(a)},getRealTime:function(a){var b,c;return void 0===a&&(a=this.getTime()),b=e(),c=1e3*Math.floor(b.getTime()/1e3),c+1e3*a},getSlotNumber:function(a){return void 0===a&&(a=this.getTime()),Math.floor(a/this.interval)},getSlotTime:function(a){return a*this.interval},getNextSlot:function(){var a=this.getSlotNumber();return a+1},getLastSlot:function(a){return a+this.delegates},roundTime:function(a){return 1e3*Math.floor(a.getTime()/1e3)}}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x54\x79\x70\x65\x73\x2e\x6a\x73",function(a){"use strict";a.exports={SEND:0,SIGNATURE:1,DELEGATE:2,VOTE:3,MULTI:4,DAPP:5,IN_TRANSFER:6,OUT_TRANSFER:7}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72\x2f\x66\x69\x65\x6c\x64\x2e\x6a\x73",function(a){"use strict";function d(a,b,c,d,e){this.isAsync=!1,this.hasError=!1,this.rules=d,this.value=c,this.report=[],this.path=b||[],this.thisArg=e||null,this._stack=Object.keys(d),this.validator=a,this.inProgress=!1}a.exports=d,d.prototype.child=function(a,b,c,d){var e=this.validator.createField(this.path.concat(a),b,c,d);return e.report=this.report,e},d.prototype.validate=function(a){var e,f,g,h,i,b=this._stack,c=this.report,d=this.thisArg;for(this.inProgress=!0,"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof a?(this.callback=a,this.hasCallback=!0):(this.callback=null,this.hasCallback=!1);b.length;){i=b.shift(),h=this.value,g=this.rules[i];try{if(!this.validator.hasRule(i)&&!this.validator.skipMissed)throw Error("\x52\x75\x6c\x65\x20\x22"+i+"\x22\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64\x20\x66\x6f\x72\x20\x22"+this.path.join("\x2e")+"\x22\x2e");if(e=this.validator.getRule(i),this.validator.execRules&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof g&&(g=g.call(d,h)),e.accept&&(g=e.accept.call(d,g,h,this)),e.filter&&(h=this.value=e.filter.call(d,g,h,this)),e.validate&&(f=e.validate.call(d,g,h,this)),this.isAsync)return;f===!1&&(c.push({path:this.path,rule:i,accept:g}),this.hasError=!0,b.length=0)}catch(j){return j.field||Object.defineProperty(j,"\x66\x69\x65\x6c\x64",{enumerable:!1,value:this}),this.validator.onError(this,j),void this.end(j,c,h)}}this.inProgress=!1,b.length||this.end(null,c,h)},d.prototype.end=function(a){this._stack=[],this.hasError?this.validator.onInvalid(this):this.validator.onValid(this),this.hasCallback&&(this.callback(a,this.report,this.value),this.callback=null)},d.prototype.async=function(a){this.isAsync=!0;var b=this;a(function(a){arguments.length>1&&(b.value=arguments[1]),b.isAsync=!1,a?(a.hasOwnProperty("\x66\x69\x65\x6c\x64")||(Object.defineProperty(a,"\x66\x69\x65\x6c\x64",{enumerable:!1,value:b}),b.validator.onError(b,a)),b.end(a)):b.inProgress||b.validate(b.callback)})},d.prototype.issue=function(a){this.hasError=!0,a.path=this.path.concat(a.path),this.report.push(a)}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72\x2f\x75\x74\x69\x6c\x73\x2e\x6a\x73",function(a,b,c){"use strict";function e(a){return a&&"\x6f\x62\x6a\x65\x63\x74"==typeof a?(Array.prototype.slice.call(arguments).forEach(function(b){b&&"\x6f\x62\x6a\x65\x63\x74"==typeof b&&d._extend(a,b)}),a):a}function f(a){if(!a||"\x6f\x62\x6a\x65\x63\x74"!=typeof a)return a;if(Array.isArray(a))return a.map(f);if(a.constructor===Object){var b={};return Object.getOwnPropertyNames(a).forEach(function(c){b[c]=f(a[c])}),b}return a}var d=c("\x75\x74\x69\x6c");b.extend=e,b.copy=f,b.inherits=d.inherits}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72\x2f\x76\x61\x6c\x69\x64\x61\x74\x6f\x72\x2e\x6a\x73",function(a,b,c){"use strict";function g(a){a=a||{},this.hasError=!1,this.forceAsync=this.forceAsync||a.forceAsync,this.skipMissed=this.skipMissed||a.skipMissed,this.execRules=this.execRules||a.execRules,this.rules=e(Object.create(this.rules),a.rules);var b=this.reporter||a.reporter;"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b&&(b=new b(this)),this.reporter=b,this.onInit()}var d=c("\x2e\x2f\x75\x74\x69\x6c\x73\x2e\x6a\x73"),e=d.extend,f=c("\x2e\x2f\x66\x69\x65\x6c\x64\x2e\x6a\x73");a.exports=g,b.Field=f,g.prototype.forceAsync=!1,g.prototype.skipMissed=!1,g.prototype.execRules=!0,g.prototype.reporter=null,g.prototype.hasRule=function(a){return a in this.rules},g.prototype.getRule=function(a){if(a in this.rules==!1)throw Error("\x52\x75\x6c\x65\x20\x22"+a+"\x22\x20\x69\x73\x20\x6e\x6f\x74\x20\x64\x65\x66\x69\x6e\x65\x64");return this.rules[a]},g.prototype.validate=function(a,b,c){function i(a,e,i){if(g=!0,h.isValid=!e.length,d.reporter&&(e=d.reporter.convert(e,b)),h.isAsync=f,h.issues=e,h.rules=b,h.value=i,c)!f&&c&&d.forceAsync?setTimeout(function(){d.onEnd(),c.call(d,a,h,i)},1):(d.onEnd(),c.call(d,a,h,i));else{if(a)throw a;if(f)throw Error("\x41\x73\x79\x6e\x63\x20\x76\x61\x6c\x69\x64\x61\x74\x69\x6f\x6e\x20\x77\x69\x74\x68\x6f\x75\x74\x20\x63\x61\x6c\x6c\x62\x61\x63\x6b")}}var g,d=this,e=this.createField(null,a,b),h={},f=!1;if(e.validate(i),f=!0,!c&&!g)throw Error("\x56\x61\x6c\x69\x64\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x69\x6e\x69\x73\x68\x65\x64");return h},g.prototype.Field=f,g.prototype.createField=function(a,b,c,d){return new this.Field(this,a,b,c,d)},g.prototype.rules={},g.prototype.onInit=function(){},g.prototype.onError=function(){},g.prototype.onValid=function(){},g.prototype.onInvalid=function(){},g.prototype.onEnd=function(){},g.addRule=function(a,b){if("\x6f\x62\x6a\x65\x63\x74"!=typeof b)throw Error("\x52\x75\x6c\x65\x20\x64\x65\x73\x63\x72\x69\x70\x74\x6f\x72\x20\x73\x68\x6f\x75\x6c\x64\x20\x62\x65\x20\x61\x6e\x20\x6f\x62\x6a\x65\x63\x74");var c=this;this.prototype.rules[a]=b,b.hasOwnProperty("\x61\x6c\x69\x61\x73\x65\x73")&&b.aliases.forEach(function(b){c.addAlias(b,a)})},g.addAlias=function(a,b){Object.defineProperty(this.prototype.rules,a,{get:function(){return this[b]}})},g.fieldProperty=function(a,b){this.prototype.Field.prototype[a]=b},g.options={forceAsync:!1,skipMissed:!1,execRules:!0,reporter:null},g.validate=function(a,b,c,d){"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof c&&(d=c,c={});var f=new this(e({},this.options,{rules:c}));return f.validate(a,b,d)},g.addRule("\x64\x65\x66\x61\x75\x6c\x74\x73",{description:"\x53\x65\x74\x20\x64\x65\x66\x61\x75\x6c\x74\x20\x76\x61\x6c\x75\x65\x20\x69\x66\x20\x70\x61\x73\x73\x65\x64\x20\x76\x61\x6c\x75\x65\x20\x69\x73\x20\x75\x6e\x64\x65\x66\x69\x6e\x65\x64",filter:function(a,b){return void 0===b?a:b}}),g.addRule("\x74\x79\x70\x65",{description:"\x43\x68\x65\x63\x6b\x20\x76\x61\x6c\x75\x65\x20\x74\x79\x70\x65",validate:function(a,b){return typeof b===a}}),g.addRule("\x65\x71\x75\x61\x6c",{description:"\x43\x68\x65\x63\x6b\x20\x69\x66\x20\x76\x61\x6c\x75\x65\x20\x65\x71\x75\x61\x6c\x73\x20\x61\x63\x63\x65\x70\x74\x61\x62\x6c\x65\x20\x76\x61\x6c\x75\x65",validate:function(a,b){return b===a}}),g.addRule("\x6e\x6f\x74\x45\x71\x75\x61\x6c",{description:"\x43\x68\x65\x63\x6b\x20\x69\x66\x20\x76\x61\x6c\x75\x65\x20\x6e\x6f\x74\x20\x65\x71\x75\x61\x6c\x73\x20\x61\x63\x63\x65\x70\x74\x61\x62\x6c\x65\x20\x76\x61\x6c\x75\x65",validate:function(a,b){return typeof b!==a}}),g.addRule("\x67\x72\x65\x61\x74\x65\x72",{description:"\x43\x68\x65\x63\x6b\x20\x69\x66\x20\x76\x61\x6c\x75\x65\x20\x69\x73\x20\x67\x72\x65\x61\x74\x65\x72\x20\x74\x68\x65\x6e\x20\x61\x63\x63\x65\x70\x74\x61\x62\x6c\x65\x20\x76\x61\x6c\x75\x65",aliases:["\x3e","\x67\x74"],validate:function(a,b){return typeof b>a}}),g.addRule("\x67\x72\x65\x61\x74\x65\x72\x4f\x72\x45\x71\x75\x61\x6c",{description:"\x43\x68\x65\x63\x6b\x20\x69\x66\x20\x76\x61\x6c\x75\x65\x20\x69\x73\x20\x67\x72\x65\x61\x74\x65\x72\x20\x74\x68\x65\x6e\x20\x6f\x72\x20\x65\x71\x75\x61\x6c\x20\x61\x63\x63\x65\x70\x74\x61\x62\x6c\x65\x20\x76\x61\x6c\x75\x65",aliases:["\x3e\x3d","\x67\x74\x65"],validate:function(a,b){return typeof b>=a}}),g.addRule("\x6c\x65\x73\x73",{description:"\x43\x68\x65\x63\x6b\x20\x69\x66\x20\x76\x61\x6c\x75\x65\x20\x69\x73\x20\x6c\x65\x73\x73\x20\x74\x68\x65\x6e\x20\x61\x63\x63\x65\x70\x74\x61\x62\x6c\x65\x20\x76\x61\x6c\x75\x65",aliases:["\x3c","\x6c\x74"],validate:function(a,b){return a>typeof b}}),g.addRule("\x6c\x65\x73\x73\x4f\x72\x45\x71\x75\x61\x6c",{description:"\x43\x68\x65\x63\x6b\x20\x69\x66\x20\x76\x61\x6c\x75\x65\x20\x69\x73\x20\x6c\x65\x73\x73\x20\x74\x68\x65\x6e\x20\x6f\x72\x20\x65\x71\x75\x61\x6c\x20\x61\x63\x63\x65\x70\x74\x61\x62\x6c\x65\x20\x76\x61\x6c\x75\x65",aliases:["\x3c\x3d","\x6c\x74\x65"],validate:function(a,b){return a>=typeof b}}),g.fieldProperty("\x69\x73\x4f\x62\x6a\x65\x63\x74",function(){return null!==this.value&&"\x6f\x62\x6a\x65\x63\x74"==typeof this.value}),g.fieldProperty("\x69\x73\x4f\x62\x6a\x65\x63\x74\x49\x6e\x73\x74\x61\x6e\x63\x65",function(){return this.value&&"\x6f\x62\x6a\x65\x63\x74"==typeof this.value&&this.value.constructor===Object}),g.fieldProperty("\x69\x73\x44\x65\x66\x61\x75\x6c\x74",function(){return this.value===this.rules.defaults}),g.fieldProperty("\x69\x73\x55\x6e\x64\x65\x66\x69\x6e\x65\x64",function(){return void 0===this.value}),g.fieldProperty("\x69\x73\x45\x6d\x70\x74\x79",function(){return void 0===this.value||null===this.value||""===this.value})}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x7a\x5f\x73\x63\x68\x65\x6d\x61\x2d\x65\x78\x70\x72\x65\x73\x73\x2e\x6a\x73",function(a){"use strict";a.exports=function(a){return function(b,c,d){function e(b,c,d){return a.validate(b,c,function(a,c){return d(null,{isValid:c,issues:a?a[0].message+"\x3a\x20"+a[0].path:null},b)})}b.sanitize=e,d()}}}),c.register("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x7a\x5f\x73\x63\x68\x65\x6d\x61\x2e\x6a\x73",function(a,b,c){"use strict";var d=c("\x69\x70"),e=c("\x7a\x2d\x73\x63\x68\x65\x6d\x61");e.registerFormat("\x68\x65\x78",function(a){try{new Buffer(a,"\x68\x65\x78")}catch(b){return!1}return!0}),e.registerFormat("\x70\x75\x62\x6c\x69\x63\x4b\x65\x79",function(a){if(0===a.length)return!0;try{var b=new Buffer(a,"\x68\x65\x78");return 32===b.length}catch(c){return!1}}),e.registerFormat("\x63\x73\x76",function(a){try{var b=a.split("\x2c");return b.length>0&&b.length<=1e3?!0:!1}catch(c){return!1}}),e.registerFormat("\x73\x69\x67\x6e\x61\x74\x75\x72\x65",function(a){if(0===a.length)return!0;try{var b=new Buffer(a,"\x68\x65\x78");return 64===b.length}catch(c){return!1}}),e.registerFormat("\x71\x75\x65\x72\x79\x4c\x69\x73\x74",function(a){return a.limit=100,!0}),e.registerFormat("\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x4c\x69\x73\x74",function(a){return a.limit=101,!0}),e.registerFormat("\x70\x61\x72\x73\x65\x64\x49\x6e\x74",function(a){return isNaN(a)||parseInt(a)!=a||isNaN(parseInt(a,10))?!1:(a=parseInt(a),!0)}),e.registerFormat("\x69\x70",function(a){return d.isV4Format(a)||d.isV6Format(a)}),a.exports=e}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x6a\x73",function(a,b,c){"use strict";function s(a,b){o=b,p=this,q.attachApi();var d=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x76\x6f\x74\x65\x2e\x6a\x73");q.assetTypes[m.VOTE]=o.logic.transaction.attachAssetType(m.VOTE,new d),setImmediate(a,null,p)}var n,o,p,d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x62\x69\x67\x6e\x75\x6d\x2e\x6a\x73"),e=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x62\x6c\x6f\x63\x6b\x52\x65\x77\x61\x72\x64\x2e\x6a\x73"),f=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),g=c("\x63\x72\x79\x70\x74\x6f"),i=(c("\x65\x78\x74\x65\x6e\x64"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73")),j=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x6a\x73"),k=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),m=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x54\x79\x70\x65\x73\x2e\x6a\x73")),q={},r={};q.assetTypes={},q.blockReward=new e,q.attachApi=function(){var a=new i;a.use(function(a,b,c){return n?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.map(r,{"post /open":"\x6f\x70\x65\x6e","get /getBalance":"\x67\x65\x74\x42\x61\x6c\x61\x6e\x63\x65","get /getPublicKey":"\x67\x65\x74\x50\x75\x62\x6c\x69\x63\x6b\x65\x79","post /generatePublicKey":"\x67\x65\x6e\x65\x72\x61\x74\x65\x50\x75\x62\x6c\x69\x63\x4b\x65\x79","get /delegates":"\x67\x65\x74\x44\x65\x6c\x65\x67\x61\x74\x65\x73","get /delegates/fee":"\x67\x65\x74\x44\x65\x6c\x65\x67\x61\x74\x65\x73\x46\x65\x65","put /delegates":"\x61\x64\x64\x44\x65\x6c\x65\x67\x61\x74\x65\x73","get /":"\x67\x65\x74\x41\x63\x63\x6f\x75\x6e\x74"}),process.env.DEBUG&&"\x54\x52\x55\x45"===process.env.DEBUG.toUpperCase()&&a.get("\x2f\x67\x65\x74\x41\x6c\x6c\x41\x63\x63\x6f\x75\x6e\x74\x73",function(a,b){return b.json({success:!0,accounts:q.accounts})}),process.env.TOP&&"\x54\x52\x55\x45"===process.env.TOP.toUpperCase()&&a.get("\x2f\x74\x6f\x70",function(a,b,c){a.sanitize(a.query,j.top,function(a,d,e){return a?c(a):d.isValid?void p.getAccounts({sort:{balance:-1},offset:e.offset,limit:e.limit||100},function(a,c){if(a)return b.json({success:!1,error:a});var d=c.map(function(a){return{address:a.address,balance:a.balance,publicKey:a.publicKey}});b.json({success:!0,accounts:d})}):b.json({success:!1,error:d.issues})})}),a.get("\x2f\x63\x6f\x75\x6e\x74",function(a,b){return b.json({success:!0,count:Object.keys(q.accounts).length})}),a.use(function(a,b){b.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x6e\x64\x70\x6f\x69\x6e\x74\x20\x77\x61\x73\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})}),o.network.app.use("\x2f\x61\x70\x69\x2f\x61\x63\x63\x6f\x75\x6e\x74\x73",a),o.network.app.use(function(a,b,c,d){return a?(o.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},q.openAccount=function(a,b){var c=g.createHash("\x73\x68\x61\x32\x35\x36").update(a,"\x75\x74\x66\x38").digest(),d=o.ed.makeKeypair(c),e=d.publicKey.toString("\x68\x65\x78");p.getAccount({publicKey:e},function(a,c){return a?setImmediate(b,a):c?setImmediate(b,null,c):setImmediate(b,null,{address:p.generateAddressByPublicKey(e),u_balance:"\x30",balance:"\x30",publicKey:e,u_secondSignature:0,secondSignature:0,secondPublicKey:null,multisignatures:null,u_multisignatures:null})})},s.prototype.generateAddressByPublicKey=function(a){var e,f,b=g.createHash("\x73\x68\x61\x32\x35\x36").update(a,"\x68\x65\x78").digest(),c=new Buffer(8);for(e=0;8>e;e++)c[e]=b[7-e];if(f=""+d.fromBuffer(c)+"\x4c",!f)throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79\x3a\x20"+a;return f},s.prototype.getAccount=function(a,b,c){a.publicKey&&(a.address=p.generateAddressByPublicKey(a.publicKey),delete a.publicKey),o.logic.account.get(a,b,c)},s.prototype.getAccounts=function(a,b,c){o.logic.account.getAll(a,b,c)},s.prototype.setAccountAndGet=function(a,b){var c=a.address||null;if(null===c){if(!a.publicKey)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x61\x64\x64\x72\x65\x73\x73\x20\x6f\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79");c=p.generateAddressByPublicKey(a.publicKey)}return c?void o.logic.account.set(c,a,function(a){return a?setImmediate(b,a):o.logic.account.get({address:c},b)}):setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79")},s.prototype.mergeAccountAndGet=function(a,b){var c=a.address||null;if(null===c){if(!a.publicKey)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x61\x64\x64\x72\x65\x73\x73\x20\x6f\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79");c=p.generateAddressByPublicKey(a.publicKey)}return c?o.logic.account.merge(c,a,b):setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79")},s.prototype.sandboxApi=function(a,b,c){k.callMethod(r,a,b,c)},s.prototype.onBind=function(a){n=a,q.assetTypes[m.VOTE].bind({modules:n,library:o})},r.open=function(a,b){o.schema.validate(a.body,j.open,function(c){return c?setImmediate(b,c[0].message):void q.openAccount(a.body.secret,function(a,c){if(a)return setImmediate(b,a);var d={address:c.address,unconfirmedBalance:c.u_balance,balance:c.balance,publicKey:c.publicKey,unconfirmedSignature:c.u_secondSignature,secondSignature:c.secondSignature,secondPublicKey:c.secondPublicKey,multisignatures:c.multisignatures,u_multisignatures:c.u_multisignatures};return setImmediate(b,null,{account:d})})})},r.getBalance=function(a,b){o.schema.validate(a.body,j.getBalance,function(c){if(c)return setImmediate(b,c[0].message);var d=/^[0-9]{1,21}[L|l]$/g;return d.test(a.body.address)?void p.getAccount({address:a.body.address},function(a,c){var d,e;return a?setImmediate(b,a):(d=c?c.balance:"\x30",e=c?c.u_balance:"\x30",setImmediate(b,null,{balance:d,unconfirmedBalance:e}))}):setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x64\x64\x72\x65\x73\x73")})},r.getPublickey=function(a,b){o.schema.validate(a.body,j.getPublicKey,function(c){if(c)return setImmediate(b,c[0].message);var d=/^[0-9]{1,21}[L|l]$/g;return d.test(a.body.address)?void p.getAccount({address:a.body.address},function(a,c){return a?setImmediate(b,a):c&&c.publicKey?setImmediate(b,null,{publicKey:c.publicKey}):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x64\x64\x72\x65\x73\x73")})},r.generatePublicKey=function(a,b){o.schema.validate(a.body,j.generatePublicKey,function(c){return c?setImmediate(b,c[0].message):void q.openAccount(a.body.secret,function(a,c){var d=null;return!a&&c&&(d=c.publicKey),setImmediate(b,a,{publicKey:d})})})},r.getDelegates=function(a,b){o.schema.validate(a.body,j.getDelegates,function(c){return c?setImmediate(b,c[0].message):void p.getAccount({address:a.body.address},function(c,d){return c?setImmediate(b,c):d?d.delegates?void n.delegates.getDelegates(a.body,function(a,c){var e=c.delegates.filter(function(a){return-1!==d.delegates.indexOf(a.publicKey)});return setImmediate(b,null,{delegates:e})}):setImmediate(b,null,{delegates:[]}):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")})})},r.getDelegatesFee=function(a,b){return setImmediate(b,null,{fee:f.fees.delegate})},r.addDelegates=function(a,b){o.schema.validate(a.body,j.addDelegates,function(c){var d,e;return c?setImmediate(b,c[0].message):(d=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest(),e=o.ed.makeKeypair(d),a.body.publicKey&&e.publicKey.toString("\x68\x65\x78")!==a.body.publicKey?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"):void o.balancesSequence.add(function(b){a.body.multisigAccountPublicKey&&a.body.multisigAccountPublicKey!==e.publicKey.toString("\x68\x65\x78")?n.accounts.getAccount({publicKey:a.body.multisigAccountPublicKey},function(c,d){return c?setImmediate(b,c):d&&d.publicKey?d.multisignatures&&d.multisignatures?d.multisignatures.indexOf(e.publicKey.toString("\x68\x65\x78"))<0?setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x62\x65\x6c\x6f\x6e\x67\x20\x74\x6f\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x67\x72\x6f\x75\x70"):void n.accounts.getAccount({publicKey:e.publicKey},function(c,f){var h,i,j;if(c)return setImmediate(b,c);if(!f||!f.publicKey)return setImmediate(b,"\x52\x65\x71\x75\x65\x73\x74\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(f.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");if(f.publicKey===d.publicKey)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79");h=null,f.secondSignature&&(i=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),h=o.ed.makeKeypair(i));try{j=o.logic.transaction.create({type:m.VOTE,votes:a.body.delegates,sender:d,keypair:e,secondKeypair:h,requester:e})}catch(k){return setImmediate(b,""+k)}n.transactions.receiveTransactions([j],b)}):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x65\x6e\x61\x62\x6c\x65\x64"):setImmediate(b,"\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):p.setAccountAndGet({publicKey:e.publicKey.toString("\x68\x65\x78")},function(c,d){var f,h,i;if(c)return setImmediate(b,c);if(!d||!d.publicKey)return setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(d.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");f=null,d.secondSignature&&(h=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),f=o.ed.makeKeypair(h));try{i=o.logic.transaction.create({type:m.VOTE,votes:a.body.delegates,sender:d,keypair:e,secondKeypair:f})}catch(j){return setImmediate(b,""+j)}n.transactions.receiveTransactions([i],b)})},function(a,c){return a?setImmediate(b,a):setImmediate(b,null,{transaction:c[0]})}))})},r.getAccount=function(a,b){o.schema.validate(a.body,j.getAccount,function(c){if(c)return setImmediate(b,c[0].message);var d=/^[0-9]{1,21}[L|l]$/g;return d.test(a.body.address)?void p.getAccount({address:a.body.address},function(a,c){
return a?setImmediate(b,a):c?setImmediate(b,null,{account:{address:c.address,unconfirmedBalance:c.u_balance,balance:c.balance,publicKey:c.publicKey,unconfirmedSignature:c.u_secondSignature,secondSignature:c.secondSignature,secondPublicKey:c.secondPublicKey,multisignatures:c.multisignatures||[],u_multisignatures:c.u_multisignatures||[]}}):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x64\x64\x72\x65\x73\x73")})},a.exports=s}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x62\x6c\x6f\x63\x6b\x73\x2e\x6a\x73",function(a,b,c){"use strict";function z(a,b){v=b,k=v.genesisblock,w=this,x.attachApi(),x.saveGenesisBlock(function(b){return setImmediate(a,b,w)})}var u,v,w,d=c("\x6c\x6f\x64\x61\x73\x68"),e=c("\x61\x73\x79\x6e\x63"),f=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x62\x6c\x6f\x63\x6b\x52\x65\x77\x61\x72\x64\x2e\x6a\x73"),h=(c("\x62\x79\x74\x65\x62\x75\x66\x66\x65\x72"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73")),i=c("\x63\x72\x79\x70\x74\x6f"),j=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x65\x78\x63\x65\x70\x74\x69\x6f\x6e\x73\x2e\x6a\x73"),k=null,l=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x69\x6e\x73\x65\x72\x74\x73\x2e\x6a\x73"),n=(c("\x69\x70"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6f\x72\x64\x65\x72\x42\x79\x2e\x6a\x73")),o=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73"),p=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),q=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x62\x6c\x6f\x63\x6b\x73\x2e\x6a\x73"),r=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),s=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x62\x6c\x6f\x63\x6b\x73\x2e\x6a\x73"),t=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x54\x79\x70\x65\x73\x2e\x6a\x73"),x={},y={};x.lastBlock={},x.lastReceipt=null,x.blockReward=new f,x.blocksDataFields={b_id:String,b_version:Number,b_timestamp:Number,b_height:Number,b_previousBlock:String,b_numberOfTransactions:Number,b_totalAmount:String,b_totalFee:String,b_reward:String,b_payloadLength:Number,b_payloadHash:String,b_generatorPublicKey:String,b_blockSignature:String,t_id:String,t_type:Number,t_timestamp:Number,t_senderPublicKey:String,t_senderId:String,t_recipientId:String,t_amount:String,t_fee:String,t_signature:String,t_signSignature:String,s_publicKey:String,d_username:String,v_votes:String,m_min:Number,m_lifetime:Number,m_keysgroup:String,dapp_name:String,dapp_description:String,dapp_tags:String,dapp_type:Number,dapp_link:String,dapp_category:Number,dapp_icon:String,in_dappId:String,ot_dappId:String,ot_outTransactionId:String,t_requesterPublicKey:String,t_signatures:String},x.loaded=!1,x.cleanup=!1,x.isActive=!1,x.attachApi=function(){var a=new o;a.use(function(a,b,c){return u?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.map(y,{"get /get":"\x67\x65\x74\x42\x6c\x6f\x63\x6b","get /":"\x67\x65\x74\x42\x6c\x6f\x63\x6b\x73","get /getEpoch":"\x67\x65\x74\x45\x70\x6f\x63\x68","get /getHeight":"\x67\x65\x74\x48\x65\x69\x67\x68\x74","get /getNethash":"\x67\x65\x74\x4e\x65\x74\x68\x61\x73\x68","get /getFee":"\x67\x65\x74\x46\x65\x65","get /getFees":"\x67\x65\x74\x46\x65\x65\x73","get /getMilestone":"\x67\x65\x74\x4d\x69\x6c\x65\x73\x74\x6f\x6e\x65","get /getReward":"\x67\x65\x74\x52\x65\x77\x61\x72\x64","get /getSupply":"\x67\x65\x74\x53\x75\x70\x70\x6c\x79","get /getStatus":"\x67\x65\x74\x53\x74\x61\x74\x75\x73"}),a.use(function(a,b){b.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x6e\x64\x70\x6f\x69\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})}),v.network.app.use("\x2f\x61\x70\x69\x2f\x62\x6c\x6f\x63\x6b\x73",a),v.network.app.use(function(a,b,c,d){return a?(v.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},x.saveGenesisBlock=function(a){v.db.query(s.getGenesisBlockId,{id:k.block.id}).then(function(b){var c=b.length&&b[0].id;return c?setImmediate(a):void x.saveBlock(k.block,function(b){return setImmediate(a,b)})})["\x63\x61\x74\x63\x68"](function(b){return v.logger.error(b.stack),setImmediate(a,"\x42\x6c\x6f\x63\x6b\x73\x23\x73\x61\x76\x65\x47\x65\x6e\x65\x73\x69\x73\x42\x6c\x6f\x63\x6b\x20\x65\x72\x72\x6f\x72")})},x.deleteBlock=function(a,b){v.db.none(s.deleteBlock,{id:a}).then(function(){return setImmediate(b)})["\x63\x61\x74\x63\x68"](function(a){return v.logger.error(a.stack),setImmediate(b,"\x42\x6c\x6f\x63\x6b\x73\x23\x64\x65\x6c\x65\x74\x65\x42\x6c\x6f\x63\x6b\x20\x65\x72\x72\x6f\x72")})},x.list=function(a,b){var e,c={},d=[];return a.generatorPublicKey&&(d.push("\x22\x62\x5f\x67\x65\x6e\x65\x72\x61\x74\x6f\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x3a\x3a\x62\x79\x74\x65\x61\x20\x3d\x20\x24\x7b\x67\x65\x6e\x65\x72\x61\x74\x6f\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x7d"),c.generatorPublicKey=a.generatorPublicKey),a.numberOfTransactions&&(d.push("\x22\x62\x5f\x6e\x75\x6d\x62\x65\x72\x4f\x66\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x22\x20\x3d\x20\x24\x7b\x6e\x75\x6d\x62\x65\x72\x4f\x66\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x7d"),c.numberOfTransactions=a.numberOfTransactions),a.previousBlock&&(d.push("\x22\x62\x5f\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b\x22\x20\x3d\x20\x24\x7b\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b\x7d"),c.previousBlock=a.previousBlock),(0===a.height||a.height>0)&&(d.push("\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x20\x3d\x20\x24\x7b\x68\x65\x69\x67\x68\x74\x7d"),c.height=a.height),a.totalAmount>=0&&(d.push("\x22\x62\x5f\x74\x6f\x74\x61\x6c\x41\x6d\x6f\x75\x6e\x74\x22\x20\x3d\x20\x24\x7b\x74\x6f\x74\x61\x6c\x41\x6d\x6f\x75\x6e\x74\x7d"),c.totalAmount=a.totalAmount),a.totalFee>=0&&(d.push("\x22\x62\x5f\x74\x6f\x74\x61\x6c\x46\x65\x65\x22\x20\x3d\x20\x24\x7b\x74\x6f\x74\x61\x6c\x46\x65\x65\x7d"),c.totalFee=a.totalFee),a.reward>=0&&(d.push("\x22\x62\x5f\x72\x65\x77\x61\x72\x64\x22\x20\x3d\x20\x24\x7b\x72\x65\x77\x61\x72\x64\x7d"),c.reward=a.reward),a.limit?c.limit=Math.abs(a.limit):c.limit=100,a.offset?c.offset=Math.abs(a.offset):c.offset=0,c.limit>100?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6c\x69\x6d\x69\x74\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x31\x30\x30"):(e=n(a.orderBy||"\x68\x65\x69\x67\x68\x74\x3a\x64\x65\x73\x63",{sortFields:s.sortFields,fieldPrefix:"\x62\x5f"}),e.error?setImmediate(b,e.error):void v.db.query(s.countList({where:d}),c).then(function(a){var f=a[0].count;v.db.query(s.list({where:d,sortField:e.sortField,sortMethod:e.sortMethod}),c).then(function(a){var d,e,c=[];for(d=0;d<a.length;d++)c.push(v.logic.block.dbRead(a[d]));return e={blocks:c,count:f},setImmediate(b,null,e)})["\x63\x61\x74\x63\x68"](function(a){return v.logger.error(a.stack),setImmediate(b,"\x42\x6c\x6f\x63\x6b\x73\x23\x6c\x69\x73\x74\x20\x65\x72\x72\x6f\x72")})})["\x63\x61\x74\x63\x68"](function(a){return v.logger.error(a.stack),setImmediate(b,"\x42\x6c\x6f\x63\x6b\x73\x23\x6c\x69\x73\x74\x20\x65\x72\x72\x6f\x72")}))},x.getById=function(a,b){v.db.query(s.getById,{id:a}).then(function(a){if(!a.length)return setImmediate(b,"\x42\x6c\x6f\x63\x6b\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");var c=v.logic.block.dbRead(a[0]);return setImmediate(b,null,c)})["\x63\x61\x74\x63\x68"](function(a){return v.logger.error(a.stack),setImmediate(b,"\x42\x6c\x6f\x63\x6b\x73\x23\x67\x65\x74\x42\x79\x49\x64\x20\x65\x72\x72\x6f\x72")})},x.saveBlock=function(a,b){v.db.tx(function(b){var c=v.logic.block.dbSave(a),d=new l(c,c.values),e=[b.none(d.template(),c.values)];b=x.promiseTransactions(b,a,e),b.batch(e)}).then(function(){return x.afterSave(a,b)})["\x63\x61\x74\x63\x68"](function(a){return v.logger.error(a.stack),setImmediate(b,"\x42\x6c\x6f\x63\x6b\x73\x23\x73\x61\x76\x65\x42\x6c\x6f\x63\x6b\x20\x65\x72\x72\x6f\x72")})},x.promiseTransactions=function(a,b){var e,f,g,h;return d.isEmpty(b.transactions)?a:(e=function(a){return a.blockId=b.id,v.logic.transaction.dbSave(a)},f=function(a){if(a&&a.table)return a.table;throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x72\x6f\x6d\x69\x73\x65"},g=function(b){var e,c=[];d.each(b,function(a){if(!a||!a.values)throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x72\x6f\x6d\x69\x73\x65";c=c.concat(a.values)}),e=new l(b[0],c,!0),a.none(e.template(),e)},h=d.flatMap(b.transactions,e),d.each(d.groupBy(h,f),g),a)},x.afterSave=function(a,b){e.eachSeries(a.transactions,function(a,b){return v.logic.transaction.afterSave(a,b)},function(a){return setImmediate(b,a)})},x.popLastBlock=function(a,b){v.balancesSequence.add(function(b){w.loadBlocksPart({id:a.previousBlock},function(c,d){return c||!d.length?setImmediate(b,c||"\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b\x20\x69\x73\x20\x6e\x75\x6c\x6c"):(d=d[0],void e.eachSeries(a.transactions.reverse(),function(b,c){e.series([function(c){u.accounts.getAccount({publicKey:b.senderPublicKey},function(d,e){return d?setImmediate(c,d):void u.transactions.undo(b,a,e,c)})},function(a){u.transactions.undoUnconfirmed(b,a)},function(a){return u.transactions.pushHiddenTransaction(b),setImmediate(a)}],c)},function(){u.rounds.backwardTick(a,d,function(){x.deleteBlock(a.id,function(a){return a?setImmediate(b,a):setImmediate(b,null,d)})})}))})},b)},x.getIdSequence=function(a,b){v.db.query(s.getIdSequence,{height:a,limit:5,delegates:r.delegates,activeDelegates:h.activeDelegates}).then(function(c){var e,f;return 0===c.length?setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x69\x64\x20\x73\x65\x71\x75\x65\x6e\x63\x65\x20\x66\x6f\x72\x20\x68\x65\x69\x67\x68\x74\x3a\x20"+a):(e=[],k&&k.block&&(f={id:k.block.id,height:k.block.height},d.includes(c,f.id)||c.push(f)),x.lastBlock&&!d.includes(c,x.lastBlock.id)&&c.unshift({id:x.lastBlock.id,height:x.lastBlock.height}),c.forEach(function(a){d.includes(e,a.id)||e.push(a.id)}),setImmediate(b,null,{firstHeight:c[0].height,ids:e.join("\x2c")}))})["\x63\x61\x74\x63\x68"](function(a){return v.logger.error(a.stack),setImmediate(b,"\x42\x6c\x6f\x63\x6b\x73\x23\x67\x65\x74\x49\x64\x53\x65\x71\x75\x65\x6e\x63\x65\x20\x65\x72\x72\x6f\x72")})},x.readDbRows=function(a){var d,e,f,g,b={},c=[];for(d=0,e=a.length;e>d;d++)f=v.logic.block.dbRead(a[d]),f&&(b[f.id]||(f.id===k.block.id&&(f.generationSignature=Array(65).join("\x30")),c.push(f.id),b[f.id]=f),g=v.logic.transaction.dbRead(a[d]),b[f.id].transactions=b[f.id].transactions||{},g&&(b[f.id].transactions[g.id]||(b[f.id].transactions[g.id]=g)));return b=c.map(function(a){return b[a].transactions=Object.keys(b[a].transactions).map(function(c){return b[a].transactions[c]}),b[a]})},x.applyTransaction=function(a,b,c,d){u.transactions.applyUnconfirmed(b,c,function(e){return e?setImmediate(d,{message:e,transaction:b,block:a}):void u.transactions.apply(b,a,c,function(c){return c?setImmediate(d,{message:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x61\x70\x70\x6c\x79\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x3a\x20"+b.id,transaction:b,block:a}):setImmediate(d)})})},z.prototype.lastReceipt=function(a){if(a&&(x.lastReceipt=a),x.lastReceipt){var b=new Date;x.lastReceipt.secondsAgo=Math.floor((b.getTime()-x.lastReceipt.getTime())/1e3),x.lastReceipt.stale=x.lastReceipt.secondsAgo>120}return x.lastReceipt},z.prototype.getCommonBlock=function(a,b,c){e.waterfall([function(a){x.getIdSequence(b,function(b,c){return setImmediate(a,b,c)})},function(b,c){var d=b.ids;u.transport.getFromPeer(a,{api:"\x2f\x62\x6c\x6f\x63\x6b\x73\x2f\x63\x6f\x6d\x6d\x6f\x6e\x3f\x69\x64\x73\x3d"+d,method:"\x47\x45\x54"},function(b,e){return b||e.body.error?setImmediate(c,b||""+e.body.error):e.body.common?setImmediate(c,null,e):setImmediate(c,["\x43\x68\x61\x69\x6e\x20\x63\x6f\x6d\x70\x61\x72\x69\x73\x6f\x6e\x20\x66\x61\x69\x6c\x65\x64\x20\x77\x69\x74\x68\x20\x70\x65\x65\x72\x3a",a.string,"\x75\x73\x69\x6e\x67\x20\x69\x64\x73\x3a",d].join("\x20"))})},function(b,c){v.db.query(s.getCommonBlock(b.body.common.previousBlock),{id:b.body.common.id,previousBlock:b.body.common.previousBlock,height:b.body.common.height}).then(function(d){return d.length&&d[0].count?setImmediate(c,null,b.body.common):setImmediate(c,["\x43\x68\x61\x69\x6e\x20\x63\x6f\x6d\x70\x61\x72\x69\x73\x6f\x6e\x20\x66\x61\x69\x6c\x65\x64\x20\x77\x69\x74\x68\x20\x70\x65\x65\x72\x3a",a.string,"\x75\x73\x69\x6e\x67\x20\x62\x6c\x6f\x63\x6b\x3a",JSON.stringify(b.body.common)].join("\x20"))})["\x63\x61\x74\x63\x68"](function(a){return v.logger.error(a.stack),setImmediate(c,"\x42\x6c\x6f\x63\x6b\x73\x23\x67\x65\x74\x43\x6f\x6d\x6d\x6f\x6e\x42\x6c\x6f\x63\x6b\x20\x65\x72\x72\x6f\x72")})}],function(a,b){return setImmediate(c,a,b)})},z.prototype.count=function(a){v.db.query(s.countByRowId).then(function(b){var c=b.length?b[0].count:0;return setImmediate(a,null,c)})["\x63\x61\x74\x63\x68"](function(b){return v.logger.error(b.stack),setImmediate(a,"\x42\x6c\x6f\x63\x6b\x73\x23\x63\x6f\x75\x6e\x74\x20\x65\x72\x72\x6f\x72")})},z.prototype.loadBlocksData=function(a,b,c){var d,e;return arguments.length<3&&(c=b,b={}),b=b||{},d={limit:a.limit||1},a.id&&a.lastId?setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x66\x69\x6c\x74\x65\x72\x3a\x20\x52\x65\x63\x65\x69\x76\x65\x64\x20\x62\x6f\x74\x68\x20\x69\x64\x20\x61\x6e\x64\x20\x6c\x61\x73\x74\x49\x64"):(a.id?d.id=a.id:a.lastId&&(d.lastId=a.lastId),e=x.blocksDataFields,void v.dbSequence.add(function(b){v.db.query(s.getHeightByLastId,{lastId:a.lastId||null}).then(function(c){var e=c.length?c[0].height:0,f=e+(parseInt(a.limit)||1);d.limit=f,d.height=e,v.db.query(s.loadBlocksData(a),d).then(function(a){return setImmediate(b,null,a)})})["\x63\x61\x74\x63\x68"](function(a){return v.logger.error(a.stack),setImmediate(b,"\x42\x6c\x6f\x63\x6b\x73\x23\x6c\x6f\x61\x64\x42\x6c\x6f\x63\x6b\x44\x61\x74\x61\x20\x65\x72\x72\x6f\x72")})},c))},z.prototype.loadBlocksPart=function(a,b){w.loadBlocksData(a,function(a,c){var d=[];return a||(d=x.readDbRows(c)),setImmediate(b,a,d)})},z.prototype.loadBlocksOffset=function(a,b,c,d){var f=a+(b||0),g={limit:f,offset:b||0};v.logger.debug("\x4c\x6f\x61\x64\x69\x6e\x67\x20\x62\x6c\x6f\x63\x6b\x73\x20\x6f\x66\x66\x73\x65\x74",{limit:a,offset:b,verify:c}),v.dbSequence.add(function(a){v.db.query(s.loadBlocksOffset,g).then(function(b){var d=x.readDbRows(b);e.eachSeries(d,function(a,b){if(x.cleanup)return setImmediate(b);if(v.logger.debug("\x50\x72\x6f\x63\x65\x73\x73\x69\x6e\x67\x20\x62\x6c\x6f\x63\x6b",a.id),c&&a.id!==k.block.id){var d=w.verifyBlock(a);if(!d.verified)return v.logger.error(["\x42\x6c\x6f\x63\x6b",a.id,"\x76\x65\x72\x69\x66\x69\x63\x61\x74\x69\x6f\x6e\x20\x66\x61\x69\x6c\x65\x64"].join("\x20"),d.errors.join("\x2c\x20")),setImmediate(b,d.errors[0])}a.id===k.block.id?x.applyGenesisBlock(a,b):x.applyBlock(a,!1,b,!1)},function(b){return setImmediate(a,b)})})["\x63\x61\x74\x63\x68"](function(b){return v.logger.error(b.stack),setImmediate(a,"\x42\x6c\x6f\x63\x6b\x73\x23\x6c\x6f\x61\x64\x42\x6c\x6f\x63\x6b\x73\x4f\x66\x66\x73\x65\x74\x20\x65\x72\x72\x6f\x72")})},d)},z.prototype.getLastBlock=function(){var a,b,c;return x.lastBlock&&(a=h.epochTime/1e3,b=a+x.lastBlock.timestamp,c=(new Date).getTime()/1e3,x.lastBlock.secondsAgo=c-b,x.lastBlock.fresh=x.lastBlock.secondsAgo<120),x.lastBlock},z.prototype.verifyBlock=function(a){var e,f,g,k,l,m,n,o,p,q,s,b={verified:!1,errors:[]};try{a.id=v.logic.block.getId(a)}catch(c){b.errors.push(""+c)}a.height=x.lastBlock.height+1,a.previousBlock||1===a.height?a.previousBlock!==x.lastBlock.id&&(u.delegates.fork(a,1),b.errors.push(["\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x20\x62\x6c\x6f\x63\x6b\x3a",a.previousBlock,"\x65\x78\x70\x65\x63\x74\x65\x64\x3a",x.lastBlock.id].join("\x20"))):b.errors.push("\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x20\x62\x6c\x6f\x63\x6b"),e=x.blockReward.calcReward(a.height),1===a.height||e===a.reward||d.includes(j.blockRewards,a.id)||b.errors.push(["\x49\x6e\x76\x61\x6c\x69\x64\x20\x62\x6c\x6f\x63\x6b\x20\x72\x65\x77\x61\x72\x64\x3a",a.reward,"\x65\x78\x70\x65\x63\x74\x65\x64\x3a",e].join("\x20"));try{f=v.logic.block.verifySignature(a)}catch(c){b.errors.push(""+c)}f||b.errors.push("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x62\x6c\x6f\x63\x6b\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65"),a.version>0&&b.errors.push("\x49\x6e\x76\x61\x6c\x69\x64\x20\x62\x6c\x6f\x63\x6b\x20\x76\x65\x72\x73\x69\x6f\x6e"),g=r.getSlotNumber(a.timestamp),k=r.getSlotNumber(x.lastBlock.timestamp),(g>r.getSlotNumber()||k>=g)&&b.errors.push("\x49\x6e\x76\x61\x6c\x69\x64\x20\x62\x6c\x6f\x63\x6b\x20\x74\x69\x6d\x65\x73\x74\x61\x6d\x70"),a.payloadLength>h.maxPayloadLength&&b.errors.push("\x50\x61\x79\x6c\x6f\x61\x64\x20\x6c\x65\x6e\x67\x74\x68\x20\x69\x73\x20\x74\x6f\x6f\x20\x68\x69\x67\x68"),a.transactions.length!==a.numberOfTransactions&&b.errors.push("\x49\x6e\x76\x61\x6c\x69\x64\x20\x6e\x75\x6d\x62\x65\x72\x20\x6f\x66\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73"),a.transactions.length>h.maxTxsPerBlock&&b.errors.push("\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x20\x6c\x65\x6e\x67\x74\x68\x20\x69\x73\x20\x74\x6f\x6f\x20\x68\x69\x67\x68"),l=0,m=0,n=i.createHash("\x73\x68\x61\x32\x35\x36"),o={};for(p in a.transactions){q=a.transactions[p];try{s=v.logic.transaction.getBytes(q)}catch(c){b.errors.push(""+c)}o[q.id]&&b.errors.push("\x45\x6e\x63\x6f\x75\x6e\x74\x65\x72\x65\x64\x20\x64\x75\x70\x6c\x69\x63\x61\x74\x65\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x3a\x20"+q.id),o[q.id]=q,s&&n.update(s),l+=q.amount,m+=q.fee}return n.digest().toString("\x68\x65\x78")!==a.payloadHash&&b.errors.push("\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x79\x6c\x6f\x61\x64\x20\x68\x61\x73\x68"),l!==a.totalAmount&&b.errors.push("\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x6f\x74\x61\x6c\x20\x61\x6d\x6f\x75\x6e\x74"),m!==a.totalFee&&b.errors.push("\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x6f\x74\x61\x6c\x20\x66\x65\x65"),b.verified=0===b.errors.length,b},x.applyBlock=function(a,b,c,d){var f,g;x.isActive=!0,f={},v.balancesSequence.add(function(c){e.series({undoUnconfirmedList:function(a){u.transactions.undoUnconfirmedList(function(b,c){return b?(x.isActive=!1,process.exit(0)):(g=c,setImmediate(a))})},applyUnconfirmed:function(b){e.eachSeries(a.transactions,function(a,b){u.accounts.setAccountAndGet({publicKey:a.senderPublicKey},function(c,d){u.transactions.applyUnconfirmed(a,d,function(c){if(c)return c=["\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x61\x70\x70\x6c\x79\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x3a",a.id,"\x2d",c].join("\x20"),v.logger.error(c),v.logger.error("\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",a),setImmediate(b,c);f[a.id]=a;var d=g.indexOf(a.id);return d>=0&&g.splice(d,1),setImmediate(b)})})},function(c){return c?void e.eachSeries(a.transactions,function(a,b){u.accounts.getAccount({publicKey:a.senderPublicKey},function(c,d){return f[a.id]?void v.logic.transaction.undoUnconfirmed(a,d,b):setImmediate(b)})},function(a){return setImmediate(b,a)}):setImmediate(b)})},applyConfirmed:function(b){e.eachSeries(a.transactions,function(b,c){u.accounts.getAccount({publicKey:b.senderPublicKey},function(d,e){d&&(d=["\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x61\x70\x70\x6c\x79\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x3a",b.id,"\x2d",d].join("\x20"),v.logger.error(d),v.logger.error("\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",b),process.exit(0)),u.transactions.apply(b,a,e,function(a){return a&&(a=["\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x61\x70\x70\x6c\x79\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x3a",b.id,"\x2d",a].join("\x20"),v.logger.error(a),v.logger.error("\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",b),process.exit(0)),u.transactions.removeUnconfirmedTransaction(b.id),setImmediate(c)})})},function(){return setImmediate(b)})},saveBlock:function(c){x.lastBlock=a,d?x.saveBlock(a,function(d){d&&(v.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x73\x61\x76\x65\x20\x62\x6c\x6f\x63\x6b\x2e\x2e\x2e"),v.logger.error("\x42\x6c\x6f\x63\x6b",a),process.exit(0)),v.logger.debug("\x42\x6c\x6f\x63\x6b\x20\x61\x70\x70\x6c\x69\x65\x64\x20\x63\x6f\x72\x72\x65\x63\x74\x6c\x79\x20\x77\x69\x74\x68\x20"+a.transactions.length+"\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73"),v.bus.message("\x6e\x65\x77\x42\x6c\x6f\x63\x6b",a,b),u.rounds.tick(a,c)}):(v.bus.message("\x6e\x65\x77\x42\x6c\x6f\x63\x6b",a,b),u.rounds.tick(a,c))},applyUnconfirmedList:function(a){u.transactions.applyUnconfirmedList(g,function(){return setImmediate(a)})}},function(b){return x.isActive=!1,f=g=a=null,"\x53\x6e\x61\x70\x73\x68\x6f\x74\x20\x66\x69\x6e\x69\x73\x68\x65\x64"===b&&(v.logger.info(b),process.emit("\x53\x49\x47\x54\x45\x52\x4d")),setImmediate(c,b)})},c)},x.applyGenesisBlock=function(a,b){a.transactions=a.transactions.sort(function(a){return a.type===t.VOTE?1:0}),e.eachSeries(a.transactions,function(b,c){u.accounts.setAccountAndGet({publicKey:b.senderPublicKey},function(d,e){return d?setImmediate(c,{message:d,transaction:b,block:a}):void x.applyTransaction(a,b,e,c)})},function(c){return c?process.exit(0):(x.lastBlock=a,void u.rounds.tick(x.lastBlock,b))})},z.prototype.processBlock=function(a,b,c,d){if(x.cleanup)return setImmediate(c,"\x43\x6c\x65\x61\x6e\x69\x6e\x67\x20\x75\x70");if(!x.loaded)return setImmediate(c,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67");try{a=v.logic.block.objectNormalize(a)}catch(f){return setImmediate(c,f)}var g=w.verifyBlock(a);return g.verified?void v.db.query(s.getBlockId,{id:a.id}).then(function(f){return f.length>0?setImmediate(c,["\x42\x6c\x6f\x63\x6b",a.id,"\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x78\x69\x73\x74\x73"].join("\x20")):void u.delegates.validateBlockSlot(a,function(f){return f?(u.delegates.fork(a,3),setImmediate(c,f)):void e.eachSeries(a.transactions,function(b,c){e.waterfall([function(c){try{b.id=v.logic.transaction.getId(b)}catch(d){return setImmediate(c,""+d)}b.blockId=a.id,v.db.query(s.getTransactionId,{id:b.id}).then(function(d){d.length>0?(u.delegates.fork(a,2),setImmediate(c,["\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",b.id,"\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x78\x69\x73\x74\x73"].join("\x20"))):u.accounts.getAccount({publicKey:b.senderPublicKey},c)})["\x63\x61\x74\x63\x68"](function(a){v.logger.error(a.stack),setImmediate(c,"\x42\x6c\x6f\x63\x6b\x73\x23\x70\x72\x6f\x63\x65\x73\x73\x42\x6c\x6f\x63\x6b\x20\x65\x72\x72\x6f\x72")})},function(a,c){v.logic.transaction.verify(b,a,c)}],function(a){return setImmediate(c,a)})},function(e){return e?setImmediate(c,e):void x.applyBlock(a,b,c,d)})})}):(v.logger.error(["\x42\x6c\x6f\x63\x6b",a.id,"\x76\x65\x72\x69\x66\x69\x63\x61\x74\x69\x6f\x6e\x20\x66\x61\x69\x6c\x65\x64"].join("\x20"),g.errors.join("\x2c\x20")),setImmediate(c,g.errors[0]))},z.prototype.simpleDeleteAfterBlock=function(a,b){v.db.query(s.simpleDeleteAfterBlock,{id:a}).then(function(a){return setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return v.logger.error(a.stack),setImmediate(b,"\x42\x6c\x6f\x63\x6b\x73\x23\x73\x69\x6d\x70\x6c\x65\x44\x65\x6c\x65\x74\x65\x41\x66\x74\x65\x72\x42\x6c\x6f\x63\x6b\x20\x65\x72\x72\x6f\x72")})},z.prototype.loadBlocksFromPeer=function(a,b){var c=x.lastBlock;a=u.peers.inspect(a),v.logger.info("\x4c\x6f\x61\x64\x69\x6e\x67\x20\x62\x6c\x6f\x63\x6b\x73\x20\x66\x72\x6f\x6d\x3a\x20"+a.string),u.transport.getFromPeer(a,{method:"\x47\x45\x54",api:"\x2f\x62\x6c\x6f\x63\x6b\x73\x3f\x6c\x61\x73\x74\x42\x6c\x6f\x63\x6b\x49\x64\x3d"+c.id},function(d,f){var g,h;return d||f.body.error?setImmediate(b,d,c):(g=v.schema.validate(f.body.blocks,q.loadBlocksFromPeer))?(h=x.readDbRows(f.body.blocks),0===h.length?setImmediate(b,null,c):void e.eachSeries(h,function(b,d){return x.cleanup?setImmediate(d):void w.processBlock(b,!1,function(e){if(e){var f=b?b.id:"\x6e\x75\x6c\x6c";v.logger.error(["\x42\x6c\x6f\x63\x6b",f].join("\x20"),""+e),b&&v.logger.error("\x42\x6c\x6f\x63\x6b",b),v.logger.warn(["\x42\x6c\x6f\x63\x6b",f,"\x69\x73\x20\x6e\x6f\x74\x20\x76\x61\x6c\x69\x64\x2c\x20\x62\x61\x6e\x20\x36\x30\x20\x6d\x69\x6e"].join("\x20"),a.string),u.peers.state(a.ip,a.port,0,3600)}else c=b,v.logger.info(["\x42\x6c\x6f\x63\x6b",b.id,"\x6c\x6f\x61\x64\x65\x64\x20\x66\x72\x6f\x6d\x3a",a.string].join("\x20"),"\x68\x65\x69\x67\x68\x74\x3a\x20"+b.height);return setImmediate(d,e)},!0)},function(a){return f=h=null,a?setImmediate(b,"\x45\x72\x72\x6f\x72\x20\x6c\x6f\x61\x64\x69\x6e\x67\x20\x62\x6c\x6f\x63\x6b\x73\x3a\x20"+(a.message||a),c):setImmediate(b,null,c)})):setImmediate(b,"\x52\x65\x63\x65\x69\x76\x65\x64\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x62\x6c\x6f\x63\x6b\x73\x20\x64\x61\x74\x61",c)})},z.prototype.deleteBlocksBefore=function(a,b){var c=[];e.whilst(function(){return a.height<x.lastBlock.height},function(a){c.unshift(x.lastBlock),x.popLastBlock(x.lastBlock,function(b,c){x.lastBlock=c,a(b)})},function(a){return setImmediate(b,a,c)})},z.prototype.generateBlock=function(a,b,c){var d=u.transactions.getUnconfirmedTransactionList(!1,h.maxTxsPerBlock),f=[];e.eachSeries(d,function(a,b){u.accounts.getAccount({publicKey:a.senderPublicKey},function(c,d){return c||!d?setImmediate(b,"\x53\x65\x6e\x64\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"):v.logic.transaction.ready(a,d)?void v.logic.transaction.verify(a,d,function(){return f.push(a),setImmediate(b)}):setImmediate(b)})},function(){var d;try{d=v.logic.block.create({keypair:a,timestamp:b,previousBlock:x.lastBlock,transactions:f})}catch(e){return v.logger.error(e.stack),setImmediate(c,e)}w.processBlock(d,!0,c,!0)})},z.prototype.sandboxApi=function(a,b,c){p.callMethod(y,a,b,c)},z.prototype.onReceiveBlock=function(a){return!x.loaded||u.loader.syncing()||u.rounds.ticking()?void v.logger.debug("\x43\x6c\x69\x65\x6e\x74\x20\x6e\x6f\x74\x20\x72\x65\x61\x64\x79\x20\x74\x6f\x20\x72\x65\x63\x65\x69\x76\x65\x20\x62\x6c\x6f\x63\x6b"):void v.sequence.add(function(b){return a.previousBlock!==x.lastBlock.id||x.lastBlock.height+1!==a.height?a.previousBlock!==x.lastBlock.id&&x.lastBlock.height+1===a.height?(u.delegates.fork(a,1),setImmediate(b,"\x46\x6f\x72\x6b")):a.previousBlock===x.lastBlock.previousBlock&&a.height===x.lastBlock.height&&a.id!==x.lastBlock.id?(u.delegates.fork(a,5),setImmediate(b,"\x46\x6f\x72\x6b")):setImmediate(b):(v.logger.info(["\x52\x65\x63\x65\x69\x76\x65\x64\x20\x6e\x65\x77\x20\x62\x6c\x6f\x63\x6b\x20\x69\x64\x3a",a.id,"\x68\x65\x69\x67\x68\x74\x3a",a.height,"\x72\x6f\x75\x6e\x64\x3a",u.rounds.calc(u.blocks.getLastBlock().height),"\x73\x6c\x6f\x74\x3a",r.getSlotNumber(a.timestamp),"\x72\x65\x77\x61\x72\x64\x3a",u.blocks.getLastBlock().reward].join("\x20")),w.lastReceipt(new Date),w.processBlock(a,!0,b,!0),void 0)})},z.prototype.onBind=function(a){u=a,x.loaded=!0},z.prototype.cleanup=function(a){return x.loaded=!1,x.cleanup=!0,x.isActive?void setImmediate(function b(){return x.isActive?(v.logger.info("\x57\x61\x69\x74\x69\x6e\x67\x20\x66\x6f\x72\x20\x62\x6c\x6f\x63\x6b\x20\x70\x72\x6f\x63\x65\x73\x73\x69\x6e\x67\x20\x74\x6f\x20\x66\x69\x6e\x69\x73\x68\x2e\x2e\x2e"),void setTimeout(b,1e3)):setImmediate(a)}):setImmediate(a)},y.getBlock=function(a,b){return x.loaded?void v.schema.validate(a.body,q.getBlock,function(c){return c?setImmediate(b,c[0].message):void v.dbSequence.add(function(b){x.getById(a.body.id,function(a,c){return!c||a?setImmediate(b,"\x42\x6c\x6f\x63\x6b\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"):setImmediate(b,null,{block:c})})},b)}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getBlocks=function(a,b){return x.loaded?void v.schema.validate(a.body,q.getBlocks,function(c){return c?setImmediate(b,c[0].message):void v.dbSequence.add(function(b){x.list(a.body,function(a,c){return a?setImmediate(b,a):setImmediate(b,null,{blocks:c.blocks,count:c.count})})},b)}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getEpoch=function(a,b){return x.loaded?setImmediate(b,null,{epoch:h.epochTime}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getHeight=function(a,b){return x.loaded?setImmediate(b,null,{height:x.lastBlock.height}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getFee=function(a,b){return x.loaded?setImmediate(b,null,{fee:v.logic.block.calculateFee()}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getFees=function(a,b){return x.loaded?setImmediate(b,null,{fees:h.fees}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getNethash=function(a,b){return x.loaded?setImmediate(b,null,{nethash:v.config.nethash}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getMilestone=function(a,b){return x.loaded?setImmediate(b,null,{milestone:x.blockReward.calcMilestone(x.lastBlock.height)}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getReward=function(a,b){return x.loaded?setImmediate(b,null,{reward:x.blockReward.calcReward(x.lastBlock.height)}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getSupply=function(a,b){return x.loaded?setImmediate(b,null,{supply:x.blockReward.calcSupply(x.lastBlock.height)}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},y.getStatus=function(a,b){return x.loaded?setImmediate(b,null,{epoch:h.epochTime,height:x.lastBlock.height,fee:v.logic.block.calculateFee(),milestone:x.blockReward.calcMilestone(x.lastBlock.height),nethash:v.config.nethash,reward:x.blockReward.calcReward(x.lastBlock.height),supply:x.blockReward.calcSupply(x.lastBlock.height)}):setImmediate(b,"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67")},a.exports=z}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x63\x72\x79\x70\x74\x6f\x2e\x6a\x73",function(a,b,c){"use strict";function l(a,b){h=b,i=this,setImmediate(a,null,i)}var g,h,i,f=(c("\x63\x72\x79\x70\x74\x6f"),c("\x66\x73"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73")),j={},k={};j.loaded=!1,l.prototype.sandboxApi=function(a,b,c){f.callMethod(k,a,b,c)},l.prototype.onBind=function(a){g=a},l.prototype.onBlockchainReady=function(){j.loaded=!0},a.exports=l}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x64\x61\x70\x70\x73\x2e\x6a\x73",function(a,b,c){function E(a,b){var d,f,g;A=b,B=this,C.attachApi(),d=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x64\x61\x70\x70\x2e\x6a\x73"),C.assetTypes[y.DAPP]=A.logic.transaction.attachAssetType(y.DAPP,new d),f=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x69\x6e\x54\x72\x61\x6e\x73\x66\x65\x72\x2e\x6a\x73"),C.assetTypes[y.IN_TRANSFER]=A.logic.transaction.attachAssetType(y.IN_TRANSFER,new f),g=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x6f\x75\x74\x54\x72\x61\x6e\x73\x66\x65\x72\x2e\x6a\x73"),C.assetTypes[y.OUT_TRANSFER]=A.logic.transaction.attachAssetType(y.OUT_TRANSFER,new g),process.on("\x65\x78\x69\x74",function(){var a=Object.keys(C.launched);e.eachSeries(a,function(a,b){return C.launched[a]?void C.stopDApp({transactionId:a},function(a){return setImmediate(b,a)}):setImmediate(b)},function(a){A.logger.error(a)})}),l.exists(p.join("\x2e","\x70\x75\x62\x6c\x69\x63","\x64\x61\x70\x70\x73"),function(b){b?r(p.join("\x2e","\x70\x75\x62\x6c\x69\x63","\x64\x61\x70\x70\x73"),function(b){b&&A.logger.error(b),C.createBasePaths(function(b){return setImmediate(a,b,B)})}):C.createBasePaths(function(){return setImmediate(a,null,B)})})}var z,A,B,d=c("\x6c\x6f\x64\x61\x73\x68"),e=c("\x61\x73\x79\x6e\x63"),g=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),c("\x63\x72\x79\x70\x74\x6f")),h=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x61\x70\x70\x43\x61\x74\x65\x67\x6f\x72\x69\x65\x73\x2e\x6a\x73"),j=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x61\x70\x70\x54\x79\x70\x65\x73\x2e\x6a\x73"),
c("\x64\x65\x63\x6f\x6d\x70\x72\x65\x73\x73\x2d\x7a\x69\x70")),l=(c("\x65\x78\x74\x65\x6e\x64"),c("\x66\x73")),n=(c("\x69\x70"),c("\x6e\x70\x6d")),o=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6f\x72\x64\x65\x72\x42\x79\x2e\x6a\x73"),p=c("\x70\x61\x74\x68"),q=c("\x70\x6f\x70\x73\x69\x63\x6c\x65"),r=c("\x72\x69\x6d\x72\x61\x66"),s=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73"),t=c("\x6c\x69\x73\x6b\x2d\x73\x61\x6e\x64\x62\x6f\x78"),u=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),v=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x64\x61\x70\x70\x73\x2e\x6a\x73"),x=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x64\x61\x70\x70\x73\x2e\x6a\x73")),y=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x54\x79\x70\x65\x73\x2e\x6a\x73"),C={},D={};C.assetTypes={},C.launched={},C.loading={},C.uninstalling={},C.appPath=process.cwd(),C.dappsPath=p.join(process.cwd(),"\x64\x61\x70\x70\x73"),C.sandboxes={},C.dappready={},C.routes={},C.attachApi=function(){var a=new s;a.use(function(a,b,c){return z?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.put("\x2f",function(a,b,c){a.sanitize(a.body,v.put,function(a,d,e){var f,h;return a?c(a):d.isValid?(f=g.createHash("\x73\x68\x61\x32\x35\x36").update(e.secret,"\x75\x74\x66\x38").digest(),h=A.ed.makeKeypair(f),e.publicKey&&h.publicKey.toString("\x68\x65\x78")!==e.publicKey?b.json({success:!1,error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"}):void A.balancesSequence.add(function(a){z.accounts.setAccountAndGet({publicKey:h.publicKey.toString("\x68\x65\x78")},function(b,c){var d,f,i;if(b)return setImmediate(a,b);if(!c||!c.publicKey)return setImmediate(a,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(c.secondSignature&&!e.secondSecret)return setImmediate(a,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");d=null,c.secondSignature&&(f=g.createHash("\x73\x68\x61\x32\x35\x36").update(e.secondSecret,"\x75\x74\x66\x38").digest(),d=A.ed.makeKeypair(f));try{i=A.logic.transaction.create({type:y.DAPP,sender:c,keypair:h,secondKeypair:d,category:e.category,name:e.name,description:e.description,tags:e.tags,dapp_type:e.type,link:e.link,icon:e.icon})}catch(j){return setImmediate(a,""+j)}z.transactions.receiveTransactions([i],a)})},function(a,c){return a?b.json({success:!1,error:a}):void b.json({success:!0,transaction:c[0]})})):b.json({success:!1,error:d.issues})})}),a.get("\x2f",function(a,b,c){a.sanitize(a.query,v.list,function(a,d,e){return a?c(a):d.isValid?void C.list(e,function(a,c){return a?b.json({success:!1,error:"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"}):void b.json({success:!0,dapps:c})}):b.json({success:!1,error:d.issues})})}),a.get("\x2f\x67\x65\x74",function(a,b,c){a.sanitize(a.query,v.get,function(a,d,e){return a?c(a):d.isValid?void C.get(e.id,function(a,c){return a?b.json({success:!1,error:a}):b.json({success:!0,dapp:c})}):b.json({success:!1,error:d.issues})})}),a.get("\x2f\x73\x65\x61\x72\x63\x68",function(a,b,c){a.sanitize(a.query,v.search,function(a,d,e){if(a)return c(a);if(!d.isValid)return b.json({success:!1,error:d.issues});var f={q:"\x25"+e.q+"\x25",limit:50};e.category&&(0===e.category||e.category>0)&&(f.category=e.category),A.db.query(x.search(f),f).then(function(a){return 0===a.length?b.json({success:!0,dapps:a}):null===e.installed||void 0===e.installed?b.json({success:!0,dapps:a}):void(1===e.installed?C.getInstalledIds(function(c,d){if(c)return b.json({success:!1,error:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64\x20\x69\x64\x73"});var e=[];return a.forEach(function(a){d.indexOf(a.transactionId)>=0&&e.push(a)}),b.json({success:!0,dapps:e})}):C.getInstalledIds(function(c,d){if(c)return b.json({success:!1,error:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64\x20\x69\x64\x73"});var e=[];return a.forEach(function(a){d.indexOf(a.transactionId)<0&&e.push(a)}),b.json({success:!0,dapps:e})}))})["\x63\x61\x74\x63\x68"](function(a){return A.logger.error(a.stack),b.json({success:!1,error:"\x44\x61\x74\x61\x62\x61\x73\x65\x20\x73\x65\x61\x72\x63\x68\x20\x66\x61\x69\x6c\x65\x64"})})})}),a.post("\x2f\x69\x6e\x73\x74\x61\x6c\x6c",function(a,b,c){a.sanitize(a.body,v.install,function(a,d,e){return a?c(a):d.isValid?A.config.dapp.masterpassword&&e.master!==A.config.dapp.masterpassword?b.json({success:!1,error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x61\x73\x74\x65\x72\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"}):void C.get(e.id,function(a,c){return a?(A.logger.error(a),b.json({success:!1,error:a})):void C.getInstalledIds(function(a,d){return a?(A.logger.error(a),b.json({success:!1,error:a})):d.indexOf(e.id)>=0?b.json({success:!1,error:"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x69\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64"}):C.loading[e.id]||C.uninstalling[e.id]?b.json({success:!1,error:"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67\x20\x6f\x72\x20\x62\x65\x69\x6e\x67\x20\x75\x6e\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64"}):(C.loading[e.id]=!0,void C.installDApp(c,function(a,d){return a?(C.loading[e.id]=!1,b.json({success:!1,error:a})):0!==c.type?(A.network.io.sockets.emit("\x64\x61\x70\x70\x73\x2f\x63\x68\x61\x6e\x67\x65",{}),C.loading[e.id]=!1,b.json({success:!0,path:d})):void C.installDependencies(c,function(a){return a?(A.logger.error(a),C.uninstalling[e.id]=!0,C.removeDApp(c,function(a){return C.uninstalling[e.id]=!1,a&&A.logger.error(a),C.loading[e.id]=!1,b.json({success:!1,error:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x69\x6e\x73\x74\x61\x6c\x6c\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x64\x65\x70\x65\x6e\x64\x65\x6e\x63\x69\x65\x73"})}),void 0):(A.network.io.sockets.emit("\x64\x61\x70\x70\x73\x2f\x63\x68\x61\x6e\x67\x65",{}),C.loading[e.id]=!1,b.json({success:!0,path:d}))})}))})}):b.json({success:!1,error:d.issues})})}),a.get("\x2f\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64",function(a,b){C.getInstalledIds(function(a,c){return a?(A.logger.error(a),b.json({success:!1,error:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x69\x64\x73"})):0===c.length?b.json({success:!0,dapps:[]}):void C.getByIds(c,function(a,c){return a?(A.logger.error(a),b.json({success:!1,error:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x20\x62\x79\x20\x69\x64"})):b.json({success:!0,dapps:c})})})}),a.get("\x2f\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64\x49\x64\x73",function(a,b){C.getInstalledIds(function(a,c){return a?(A.logger.error(a),b.json({success:!1,error:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x69\x64\x73"})):b.json({success:!0,ids:c})})}),a.get("\x2f\x69\x73\x6d\x61\x73\x74\x65\x72\x70\x61\x73\x73\x77\x6f\x72\x64\x65\x6e\x61\x62\x6c\x65\x64",function(a,b){return b.json({success:!0,enabled:!!A.config.dapp.masterpassword})}),a.post("\x2f\x75\x6e\x69\x6e\x73\x74\x61\x6c\x6c",function(a,b,c){a.sanitize(a.body,v.uninstall,function(a,d,e){return a?c(a):d.isValid?A.config.dapp.masterpassword&&e.master!==A.config.dapp.masterpassword?b.json({success:!1,error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x61\x73\x74\x65\x72\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"}):void C.get(e.id,function(a,c){return a?(A.logger.error(a),b.json({success:!1,error:a})):C.loading[e.id]||C.uninstalling[e.id]?b.json({success:!0,error:"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67\x20\x6f\x72\x20\x62\x65\x69\x6e\x67\x20\x75\x6e\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64"}):(C.uninstalling[e.id]=!0,void(C.launched[e.id]?C.stopDApp(c,function(a){return a?(A.logger.error(a),b.json({success:!1,error:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x73\x74\x6f\x70\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e"})):(C.launched[e.id]=!1,void C.removeDApp(c,function(a){return C.uninstalling[e.id]=!1,a?b.json({success:!1,error:a}):(A.network.io.sockets.emit("\x64\x61\x70\x70\x73\x2f\x63\x68\x61\x6e\x67\x65",{}),b.json({success:!0}))}))}):C.removeDApp(c,function(a){return C.uninstalling[e.id]=!1,a?b.json({success:!1,error:a}):(A.network.io.sockets.emit("\x64\x61\x70\x70\x73\x2f\x63\x68\x61\x6e\x67\x65",{}),b.json({success:!0}))})))}):b.json({success:!1,error:d.issues})})}),a.post("\x2f\x6c\x61\x75\x6e\x63\x68",function(a,b){return A.config.dapp.masterpassword&&a.body.master!==A.config.dapp.masterpassword?b.json({success:!1,error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x61\x73\x74\x65\x72\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"}):void C.launchDApp(a.body,function(a){return a?b.json({success:!1,error:a}):(A.network.io.sockets.emit("\x64\x61\x70\x70\x73\x2f\x63\x68\x61\x6e\x67\x65",{}),b.json({success:!0}))})}),a.get("\x2f\x69\x6e\x73\x74\x61\x6c\x6c\x69\x6e\x67",function(a,b){var e,d=[];for(e in C.loading)C.loading[e]&&d.push(e);return b.json({success:!0,installing:d})}),a.get("\x2f\x75\x6e\x69\x6e\x73\x74\x61\x6c\x6c\x69\x6e\x67",function(a,b){var e,d=[];for(e in C.uninstalling)C.uninstalling[e]&&d.push(e);return b.json({success:!0,uninstalling:d})}),a.get("\x2f\x6c\x61\x75\x6e\x63\x68\x65\x64",function(a,b){var e,d=[];for(e in C.launched)C.launched[e]&&d.push(e);return b.json({success:!0,launched:d})}),a.get("\x2f\x63\x61\x74\x65\x67\x6f\x72\x69\x65\x73",function(a,b){return b.json({success:!0,categories:h})}),a.post("\x2f\x73\x74\x6f\x70",function(a,b,c){a.sanitize(a.body,v.stop,function(a,d,e){return a?c(a):d.isValid?C.launched[e.id]?A.config.dapp.masterpassword&&e.master!==A.config.dapp.masterpassword?b.json({success:!1,error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x61\x73\x74\x65\x72\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"}):void C.get(e.id,function(a,c){return a?(A.logger.error(a),b.json({success:!1,error:"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})):void C.stopDApp(c,function(a){return a?(A.logger.error(a),b.json({success:!1,error:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x73\x74\x6f\x70\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e"})):(A.network.io.sockets.emit("\x64\x61\x70\x70\x73\x2f\x63\x68\x61\x6e\x67\x65",{}),C.launched[e.id]=!1,b.json({success:!0}))})}):b.json({success:!1,error:"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x6c\x61\x75\x6e\x63\x68\x65\x64"}):b.json({success:!1,error:d.issues})})}),a.map(C,{"put /transaction":"\x61\x64\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73","put /withdrawal":"\x73\x65\x6e\x64\x57\x69\x74\x68\x64\x72\x61\x77\x61\x6c"}),A.network.app.use("\x2f\x61\x70\x69\x2f\x64\x61\x70\x70\x73",a),A.network.app.use(function(a,b,c,d){return a?(A.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},C.get=function(a,b){A.db.query(x.get,{id:a}).then(function(a){return 0===a.length?setImmediate(b,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"):setImmediate(b,null,a[0])})["\x63\x61\x74\x63\x68"](function(a){return A.logger.error(a.stack),setImmediate(b,"\x44\x41\x70\x70\x23\x67\x65\x74\x20\x65\x72\x72\x6f\x72")})},C.getByIds=function(a,b){A.db.query(x.getByIds,[a]).then(function(a){return setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return A.logger.error(a.stack),setImmediate(b,"\x44\x41\x70\x70\x23\x67\x65\x74\x42\x79\x49\x64\x73\x20\x65\x72\x72\x6f\x72")})},C.list=function(a,b){var e,f,c={},d=[];if(a.type>=0&&(d.push("\x22\x74\x79\x70\x65\x22\x20\x3d\x20\x24\x7b\x74\x79\x70\x65\x7d"),c.type=a.type),a.name&&(d.push("\x22\x6e\x61\x6d\x65\x22\x20\x3d\x20\x24\x7b\x6e\x61\x6d\x65\x7d"),c.name=a.name),a.category){if(e=h[a.category],null==e||void 0===e)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x63\x61\x74\x65\x67\x6f\x72\x79");d.push("\x22\x63\x61\x74\x65\x67\x6f\x72\x79\x22\x20\x3d\x20\x24\x7b\x63\x61\x74\x65\x67\x6f\x72\x79\x7d"),c.category=e}return a.link&&(d.push("\x22\x6c\x69\x6e\x6b\x22\x20\x3d\x20\x24\x7b\x6c\x69\x6e\x6b\x7d"),c.link=a.link),a.limit?c.limit=Math.abs(a.limit):c.limit=100,a.offset?c.offset=Math.abs(a.offset):c.offset=0,c.limit>100?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6c\x69\x6d\x69\x74\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x31\x30\x30"):(f=o(a.orderBy,{sortFields:x.sortFields}),f.error?setImmediate(b,f.error):void A.db.query(x.list({where:d,sortField:f.sortField,sortMethod:f.sortMethod}),c).then(function(a){return setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return A.logger.error(a.stack),setImmediate(b,a)}))},C.createBasePaths=function(a){var b=[C.dappsPath,p.join(C.appPath,"\x70\x75\x62\x6c\x69\x63","\x64\x61\x70\x70\x73"),p.join(A["\x70\x75\x62\x6c\x69\x63"],"\x69\x6d\x61\x67\x65\x73","\x64\x61\x70\x70\x73")];e.eachSeries(b,function(a,b){l.exists(a,function(c){return c?setImmediate(b):l.mkdir(a,b)})},function(b){return setImmediate(a,b)})},C.installDependencies=function(a,b){var c=p.join(C.dappsPath,a.transactionId),d=p.join(c,"\x70\x61\x63\x6b\x61\x67\x65\x2e\x6a\x73\x6f\x6e"),e=null;try{e=JSON.parse(l.readFileSync(d))}catch(f){return setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6f\x70\x65\x6e\x20\x70\x61\x63\x6b\x61\x67\x65\x2e\x6a\x73\x6f\x6e\x20\x66\x69\x6c\x65")}n.load(e,function(a){return a?setImmediate(b,a):(n.root=p.join(c,"\x6e\x6f\x64\x65\x5f\x6d\x6f\x64\x75\x6c\x65\x73"),n.prefix=c,void n.commands.install(function(){return setImmediate(b,null)}))})},C.getInstalledIds=function(a){l.readdir(C.dappsPath,function(b,c){if(b)return setImmediate(a,b);var e=RegExp(/[0-9]{18,20}/);return c=d.filter(c,function(a){return e.test(""+a)}),setImmediate(a,null,c)})},C.removeDApp=function(a,b){function e(a){a&&A.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x75\x6e\x69\x6e\x73\x74\x61\x6c\x6c\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e"),r(d,function(a){return a?setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x72\x65\x6d\x6f\x76\x65\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x66\x6f\x6c\x64\x65\x72"):setImmediate(b)})}var d=p.join(C.dappsPath,a.transactionId);l.exists(d,function(f){if(!f)return setImmediate(b,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");var g;try{g=c(p.join(d,"\x62\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x2e\x6a\x73\x6f\x6e"))}catch(h){return e(""+h)}z.sql.dropTables(a.transactionId,g,function(a){a&&A.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x64\x72\x6f\x70\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x74\x61\x62\x6c\x65\x73"),e(a)})})},C.downloadLink=function(a,b,c){var d="\x74\x6d\x70",f=p.join(C.appPath,d,a.transactionId+"\x2e\x7a\x69\x70");e.series({makeDirectory:function(a){l.exists(d,function(b){return b?setImmediate(a,null):void l.mkdir(d,function(b){return b?setImmediate(a,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6d\x61\x6b\x65\x20\x74\x6d\x70\x20\x64\x69\x72\x65\x63\x74\x6f\x72\x79"):setImmediate(a,null)})})},performDownload:function(b){function c(c){A.logger.error(a.transactionId,"\x44\x6f\x77\x6e\x6c\x6f\x61\x64\x20\x66\x61\x69\x6c\x65\x64\x3a\x20"+c.message),l.exists(f,function(a){return a&&l.unlink(f),setImmediate(b,c.message)})}A.logger.info(a.transactionId,"\x44\x6f\x77\x6e\x6c\x6f\x61\x64\x69\x6e\x67\x3a\x20"+a.link);var d=q.get({url:a.link,transport:q.createTransport({type:"\x73\x74\x72\x65\x61\x6d"})});d.then(function(d){if(200!==d.status)return setImmediate(b,["\x52\x65\x63\x65\x69\x76\x65\x64\x20\x62\x61\x64\x20\x72\x65\x73\x70\x6f\x6e\x73\x65\x20\x63\x6f\x64\x65",d.status].join("\x20"));var e=l.createWriteStream(f);e.on("\x65\x72\x72\x6f\x72",c),e.on("\x66\x69\x6e\x69\x73\x68",function(){A.logger.info(a.transactionId,"\x46\x69\x6e\x69\x73\x68\x65\x64\x20\x64\x6f\x77\x6e\x6c\x6f\x61\x64\x69\x6e\x67"),e.close(b)}),d.body.pipe(e)}),d["\x63\x61\x74\x63\x68"](c)},decompressZip:function(c){var d=new j(f);A.logger.info(a.transactionId,"\x44\x65\x63\x6f\x6d\x70\x72\x65\x73\x73\x69\x6e\x67\x20\x7a\x69\x70\x20\x66\x69\x6c\x65"),d.on("\x65\x72\x72\x6f\x72",function(b){A.logger.error(a.transactionId,"\x44\x65\x63\x6f\x6d\x70\x72\x65\x73\x73\x69\x6f\x6e\x20\x66\x61\x69\x6c\x65\x64\x3a\x20"+b.message),l.exists(f,function(a){return a&&l.unlink(f),setImmediate(c,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x64\x65\x63\x6f\x6d\x70\x72\x65\x73\x73\x20\x7a\x69\x70\x20\x66\x69\x6c\x65")})}),d.on("\x65\x78\x74\x72\x61\x63\x74",function(){A.logger.info(a.transactionId,"\x46\x69\x6e\x69\x73\x68\x65\x64\x20\x65\x78\x74\x72\x61\x63\x74\x69\x6e\x67"),l.exists(f,function(a){return a&&l.unlink(f),setImmediate(c,null)})}),d.on("\x70\x72\x6f\x67\x72\x65\x73\x73",function(b,c){A.logger.info(a.transactionId,["\x45\x78\x74\x72\x61\x63\x74\x65\x64\x20\x66\x69\x6c\x65",b+1,"\x6f\x66",c].join("\x20"))}),d.extract({path:b,strip:1})}},function(a){return setImmediate(c,a)})},C.installDApp=function(a,b){var c=p.join(C.dappsPath,a.transactionId);e.series({checkInstalled:function(a){l.exists(c,function(b){return b?setImmediate(a,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x69\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64"):setImmediate(a,null)})},makeDirectory:function(a){l.mkdir(c,function(b){return b?setImmediate(a,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6d\x61\x6b\x65\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x64\x69\x72\x65\x63\x74\x6f\x72\x79"):setImmediate(a,null)})},performInstall:function(b){return C.downloadLink(a,c,b)}},function(d){return d?setImmediate(b,a.transactionId+"\x20\x49\x6e\x73\x74\x61\x6c\x6c\x61\x74\x69\x6f\x6e\x20\x66\x61\x69\x6c\x65\x64\x3a\x20"+d):setImmediate(b,null,c)})},C.createSymlink=function(a,b){var c=p.join(C.dappsPath,a.transactionId),d=p.join(c,"\x70\x75\x62\x6c\x69\x63"),e=p.join(C.appPath,"\x70\x75\x62\x6c\x69\x63","\x64\x61\x70\x70\x73",a.transactionId);l.exists(d,function(a){return a?void l.exists(e,function(a){return a?setImmediate(b):void l.symlink(d,e,b)}):setImmediate(b)})},C.apiHandler=function(a,b){var c,d,e;try{if(c=a.call.split("\x23"),d=c[0],e=c[1],!z[d])return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x6f\x64\x75\x6c\x65\x20\x69\x6e\x20\x63\x61\x6c\x6c\x3a\x20"+a.call);if(!z[d].sandboxApi)return setImmediate(b,"\x4d\x6f\x64\x75\x6c\x65\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x73\x61\x6e\x64\x62\x6f\x78\x20\x61\x70\x69");z[d].sandboxApi(e,{body:a.args,dappid:a.dappid},b)}catch(f){return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x63\x61\x6c\x6c\x20"+f)}},C.createRoutes=function(a,b){var d=p.join(C.dappsPath,a.transactionId),e=p.join(d,"\x72\x6f\x75\x74\x65\x73\x2e\x6a\x73\x6f\x6e");l.exists(e,function(d){if(d){var f;try{f=c(e)}catch(g){return setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6f\x70\x65\x6e\x20\x72\x6f\x75\x74\x65\x73\x2e\x6a\x73\x6f\x6e\x20\x66\x69\x6c\x65")}return C.routes[a.transactionId]=new s,f.forEach(function(b){("\x67\x65\x74"===b.method||"\x70\x6f\x73\x74"===b.method||"\x70\x75\x74"===b.method)&&C.routes[a.transactionId][b.method](b.path,function(c,d){B.request(a.transactionId,b.method,b.path,"\x67\x65\x74"===b.method?c.query:c.body,function(a,b){!a&&b.error&&(a=b.error),a&&(b={error:a}),b.success=!a,d.json(b)})})}),A.network.app.use("\x2f\x61\x70\x69\x2f\x64\x61\x70\x70\x73\x2f"+a.transactionId+"\x2f\x61\x70\x69\x2f",C.routes[a.transactionId]),A.network.app.use(function(a,b,c,d){return a?(A.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()}),setImmediate(b)}return setImmediate(b)})},C.launchDApp=function(a,b){e.waterfall([function(b){A.schema.validate(a,v.launch,function(a){return a?setImmediate(b,a[0].message):setImmediate(b)})},function(b){return C.launched[a.id]?setImmediate(b,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x6c\x61\x75\x6e\x63\x68\x65\x64"):(a.params=a.params||[""],a.params.length>0&&a.params.push("\x6d\x6f\x64\x75\x6c\x65\x73\x2e\x66\x75\x6c\x6c\x2e\x6a\x73\x6f\x6e"),C.launched[a.id]=!0,setImmediate(b))},function(b){C.get(a.id,function(c,d){return c?(C.launched[a.id]=!1,setImmediate(b,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")):setImmediate(b,null,d)})},function(b,c){C.getInstalledIds(function(d,e){return d?(C.launched[a.id]=!1,setImmediate(c,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73")):e.indexOf(a.id)<0?(C.launched[a.id]=!1,setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x69\x6e\x73\x74\x61\x6c\x6c\x65\x64")):setImmediate(c,null,b)})},function(b,c){C.createSymlink(b,function(d){return d?(C.launched[a.id]=!1,setImmediate(c,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x63\x72\x65\x61\x74\x65\x20\x70\x75\x62\x6c\x69\x63\x20\x6c\x69\x6e\x6b")):setImmediate(c,null,b)})},function(b,c){C.createSandbox(b,a.params||["","\x6d\x6f\x64\x75\x6c\x65\x73\x2e\x66\x75\x6c\x6c\x2e\x6a\x73\x6f\x6e"],function(d){return d?(C.launched[a.id]=!1,setImmediate(c,d)):setImmediate(c,null,b)})},function(b,c){C.createRoutes(b,function(d){return d?(C.launched[a.id]=!1,void C.stopDApp(b,function(a){return a?setImmediate(c,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x73\x74\x6f\x70\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e"):setImmediate(c,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x63\x72\x65\x61\x74\x65\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x72\x6f\x75\x74\x65\x73")})):setImmediate(c,null,b)})}],function(a){return a?A.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6c\x61\x75\x6e\x63\x68\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e",a):A.logger.info("\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6c\x61\x75\x6e\x63\x68\x65\x64\x20\x73\x75\x63\x63\x65\x73\x73\x66\x75\x6c\x6c\x79"),setImmediate(b,a)})},C.createSandbox=function(a,b,d){var i,f=p.join(C.dappsPath,a.transactionId);p.join(f,"\x70\x75\x62\x6c\x69\x63"),p.join(C.appPath,"\x70\x75\x62\x6c\x69\x63","\x64\x61\x70\x70\x73",a.transactionId);try{i=c(p.join(f,"\x63\x6f\x6e\x66\x69\x67\x2e\x6a\x73\x6f\x6e"))}catch(j){return setImmediate(d,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6f\x70\x65\x6e\x20\x63\x6f\x6e\x66\x69\x67\x2e\x6a\x73\x6f\x6e\x20\x66\x69\x6c\x65")}e.eachSeries(i.peers,function(b,c){z.peers.addDapp({ip:b.ip,port:b.port,dappid:a.transactionId},c)},function(e){if(e)return setImmediate(d,e);var g;try{g=c(p.join(f,"\x62\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x2e\x6a\x73\x6f\x6e"))}catch(h){return setImmediate(d,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6f\x70\x65\x6e\x20\x62\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x2e\x6a\x73\x6f\x6e\x20\x66\x69\x6c\x65")}z.sql.createTables(a.transactionId,g,function(c){if(c)return setImmediate(d,c);var e=new t(p.join(f,"\x69\x6e\x64\x65\x78\x2e\x6a\x73"),a.transactionId,b,C.apiHandler,!0);return C.sandboxes[a.transactionId]=e,e.on("\x65\x78\x69\x74",function(){C.stopDApp(a,function(b){b?A.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x73\x74\x6f\x70\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e",a.transactionId):A.logger.info(["\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e",a.transactionId,"\x63\x6c\x6f\x73\x65\x64"].join("\x20"))})}),e.on("\x65\x72\x72\x6f\x72",function(b){A.logger.error(["\x45\x6e\x63\x6f\x75\x6e\x74\x65\x72\x65\x64\x20\x65\x72\x72\x6f\x72\x20\x69\x6e\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e",a.transactionId].join("\x20"),b),C.stopDApp(a,function(b){b?A.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x73\x74\x6f\x70\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e",a.transactionId):A.logger.info(["\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e",a.transactionId,"\x63\x6c\x6f\x73\x65\x64"].join("\x20"))})}),e.run(),setImmediate(d)})})},C.stopDApp=function(a,b){var c=p.join(C.appPath,"\x70\x75\x62\x6c\x69\x63","\x64\x61\x70\x70\x73",a.transactionId);e.series({checkInstalled:function(a){l.exists(c,function(b){return b?setImmediate(a):setImmediate(a,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")})},deleteSandbox:function(b){return C.sandboxes[a.transactionId]&&C.sandboxes[a.transactionId].exit(),delete C.sandboxes[a.transactionId],setImmediate(b)},deleteRoutes:function(b){return delete C.routes[a.transactionId],setImmediate(b)}},function(a){return setImmediate(b,a)})},C.addTransactions=function(a,b){A.schema.validate(a.body,v.addTransactions,function(c){var d,e,f;return c?setImmediate(b,c[0].message):(d=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest(),e=A.ed.makeKeypair(d),a.body.publicKey&&e.publicKey.toString("\x68\x65\x78")!==a.body.publicKey?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"):(f={},void A.balancesSequence.add(function(b){a.body.multisigAccountPublicKey&&a.body.multisigAccountPublicKey!==e.publicKey.toString("\x68\x65\x78")?z.accounts.getAccount({publicKey:a.body.multisigAccountPublicKey},function(c,d){return c?setImmediate(b,c):d&&d.publicKey?d.multisignatures&&d.multisignatures?d.multisignatures.indexOf(e.publicKey.toString("\x68\x65\x78"))<0?setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x62\x65\x6c\x6f\x6e\x67\x20\x74\x6f\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x67\x72\x6f\x75\x70"):void z.accounts.getAccount({publicKey:e.publicKey},function(c,f){var h,i,j;if(c)return setImmediate(b,c);if(!f||!f.publicKey)return setImmediate(b,"\x52\x65\x71\x75\x65\x73\x74\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(f.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");if(f.publicKey===d.publicKey)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79");h=null,f.secondSignature&&(i=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),h=A.ed.makeKeypair(i));try{j=A.logic.transaction.create({type:y.IN_TRANSFER,amount:a.body.amount,sender:d,keypair:e,requester:e,secondKeypair:h,dappId:a.body.dappId})}catch(k){return setImmediate(b,""+k)}z.transactions.receiveTransactions([j],b)}):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x65\x6e\x61\x62\x6c\x65\x64"):setImmediate(b,"\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):z.accounts.setAccountAndGet({publicKey:e.publicKey.toString("\x68\x65\x78")},function(c,d){var f,h,i;if(c)return setImmediate(b,c);if(!d||!d.publicKey)return setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(d.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");f=null,d.secondSignature&&(h=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),f=A.ed.makeKeypair(h));try{i=A.logic.transaction.create({type:y.IN_TRANSFER,amount:a.body.amount,sender:d,keypair:e,secondKeypair:f,dappId:a.body.dappId})}catch(j){return setImmediate(b,""+j)}z.transactions.receiveTransactions([i],b)})},function(a,c){return a?setImmediate(b,a):setImmediate(b,null,{transactionId:c[0].id})})))})},C.sendWithdrawal=function(a,b){A.schema.validate(a.body,v.sendWithdrawal,function(c){var d,e,f,h;return c?setImmediate(b,c[0].message):(d=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest(),e=A.ed.makeKeypair(d),f={},h=/^[0-9]{1,21}[L|l]$/g,h.test(a.body.recipientId)?void A.balancesSequence.add(function(b){a.body.multisigAccountPublicKey&&a.body.multisigAccountPublicKey!==e.publicKey.toString("\x68\x65\x78")?z.accounts.getAccount({publicKey:a.body.multisigAccountPublicKey},function(c,d){return c?setImmediate(b,c):d&&d.publicKey?d.multisignatures&&d.multisignatures?d.multisignatures.indexOf(e.publicKey.toString("\x68\x65\x78"))<0?setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x62\x65\x6c\x6f\x6e\x67\x20\x74\x6f\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x67\x72\x6f\x75\x70"):void z.accounts.getAccount({publicKey:e.publicKey},function(c,f){var h,i,j;if(c)return setImmediate(b,c);if(!f||!f.publicKey)return setImmediate(b,"\x52\x65\x71\x75\x65\x73\x74\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(f.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");if(f.publicKey===d.publicKey)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79");h=null,f.secondSignature&&(i=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),h=A.ed.makeKeypair(i));try{j=A.logic.transaction.create({type:y.OUT_TRANSFER,amount:a.body.amount,sender:d,recipientId:a.body.recipientId,keypair:e,secondKeypair:h,requester:e,dappId:a.body.dappId,transactionId:a.body.transactionId})}catch(k){return setImmediate(b,""+k)}z.transactions.receiveTransactions([j],b)}):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x65\x6e\x61\x62\x6c\x65\x64"):setImmediate(b,"\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):z.accounts.setAccountAndGet({publicKey:e.publicKey.toString("\x68\x65\x78")},function(c,d){var f,h,i;if(c)return setImmediate(b,c);if(!d||!d.publicKey)return setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(d.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");f=null,d.secondSignature&&(h=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),f=A.ed.makeKeypair(h));try{i=A.logic.transaction.create({type:y.OUT_TRANSFER,amount:a.body.amount,sender:d,recipientId:a.body.recipientId,keypair:e,secondKeypair:f,dappId:a.body.dappId,transactionId:a.body.transactionId})}catch(j){return setImmediate(b,""+j)}z.transactions.receiveTransactions([i],b)})},function(a,c){return a?setImmediate(b,a):setImmediate(b,null,{transactionId:c[0].id})}):setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x63\x69\x70\x69\x65\x6e\x74"))})},E.prototype.sandboxApi=function(a,b,c){u.callMethod(D,a,b,c)},E.prototype.message=function(a,b,c){B.request(a,"\x70\x6f\x73\x74","\x2f\x6d\x65\x73\x73\x61\x67\x65",b,c)},E.prototype.request=function(a,b,c,d,e){return C.sandboxes[a]?C.dappready[a]?void C.sandboxes[a].sendMessage({method:b,path:c,query:d},e):setImmediate(e,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x72\x65\x61\x64\x79"):setImmediate(e,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x73\x61\x6e\x64\x62\x6f\x78\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")},E.prototype.onBind=function(a){z=a,C.assetTypes[y.DAPP].bind({library:A}),C.assetTypes[y.IN_TRANSFER].bind({
modules:z,library:A,shared:D}),C.assetTypes[y.OUT_TRANSFER].bind({modules:z,library:A})},E.prototype.onBlockchainReady=function(){setTimeout(function(){A.config.dapp&&e.eachSeries(A.config.dapp.autoexec||[],function(a,b){C.launchDApp({params:a.params,id:a.dappid,master:A.config.dapp.masterpassword},function(a){return a?A.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6c\x61\x75\x6e\x63\x68\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e",a):A.logger.info("\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6c\x61\x75\x6e\x63\x68\x65\x64\x20\x73\x75\x63\x63\x65\x73\x73\x66\x75\x6c\x6c\x79"),setImmediate(b)})})},1e3)},E.prototype.onDeleteBlocksBefore=function(a){Object.keys(C.sandboxes).forEach(function(b){B.request(b,"\x70\x6f\x73\x74","\x2f\x6d\x65\x73\x73\x61\x67\x65",{topic:"\x72\x6f\x6c\x6c\x62\x61\x63\x6b",message:{pointId:a.id,pointHeight:a.height}},function(a){a&&A.logger.error("\x44\x41\x70\x70\x73\x23\x6f\x6e\x44\x65\x6c\x65\x74\x65\x42\x6c\x6f\x63\x6b\x73\x42\x65\x66\x6f\x72\x65\x20\x65\x72\x72\x6f\x72",a)})})},E.prototype.onNewBlock=function(a,b){Object.keys(C.sandboxes).forEach(function(c){b&&B.request(c,"\x70\x6f\x73\x74","\x2f\x6d\x65\x73\x73\x61\x67\x65",{topic:"\x70\x6f\x69\x6e\x74",message:{id:a.id,height:a.height}},function(a){a&&A.logger.error("\x44\x41\x70\x70\x73\x23\x6f\x6e\x4e\x65\x77\x42\x6c\x6f\x63\x6b\x20\x65\x72\x72\x6f\x72\x3a",a)})})},D.getGenesis=function(a,b){A.db.query(x.getGenesis,{id:a.dappid}).then(function(c){if(0===c.length)return setImmediate(b,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x67\x65\x6e\x65\x73\x69\x73\x20\x62\x6c\x6f\x63\x6b\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");var d=c[0];return setImmediate(b,null,{pointId:d.id,pointHeight:d.height,authorId:d.authorId,dappid:a.dappid})})["\x63\x61\x74\x63\x68"](function(a){return A.logger.error(a.stack),setImmediate(b,"\x44\x41\x70\x70\x23\x67\x65\x74\x47\x65\x6e\x65\x73\x69\x73\x20\x65\x72\x72\x6f\x72")})},D.setReady=function(a,b){return C.dappready[a.dappid]=!0,setImmediate(b,null,{})},D.getCommonBlock=function(a,b){A.db.query(x.getCommonBlock,{dappid:a.dappid,type:y.IN_TRANSFER}).then(function(a){return setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return A.logger.error(a.stack),setImmediate(b,"\x44\x41\x70\x70\x23\x67\x65\x74\x43\x6f\x6d\x6d\x6f\x6e\x42\x6c\x6f\x63\x6b\x20\x65\x72\x72\x6f\x72")})},D.sendWithdrawal=function(a,b){return C.sendWithdrawal(a,b)},D.getWithdrawalLastTransaction=function(a,b){A.db.query(x.getWithdrawalLastTransaction,{dappid:a.dappid,type:y.OUT_TRANSFER}).then(function(a){return setImmediate(b,null,a[0])})["\x63\x61\x74\x63\x68"](function(a){return A.logger.error(a.stack),setImmediate(b,"\x44\x41\x70\x70\x23\x67\x65\x74\x57\x69\x74\x68\x64\x72\x61\x77\x61\x6c\x4c\x61\x73\x74\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x65\x72\x72\x6f\x72")})},D.getBalanceTransactions=function(a,b){A.db.query(x.getBalanceTransactions({lastId:a.body.lastTransactionId}),{dappid:a.dappid,type:y.IN_TRANSFER,lastId:a.body.lastTransactionId}).then(function(a){return setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return A.logger.error(a.stack),setImmediate(b,"\x44\x41\x70\x70\x23\x67\x65\x74\x42\x61\x6c\x61\x6e\x63\x65\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x65\x72\x72\x6f\x72")})},a.exports=E}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x6a\x73",function(a,b,c){"use strict";function y(a,b){u=b,v=this,w.attachApi();var d=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x64\x65\x6c\x65\x67\x61\x74\x65\x2e\x6a\x73");w.assetTypes[s.DELEGATE]=u.logic.transaction.attachAssetType(s.DELEGATE,new d),setImmediate(a,null,v)}var t,u,v,d=c("\x6c\x6f\x64\x61\x73\x68"),e=c("\x61\x73\x79\x6e\x63"),f=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x62\x69\x67\x6e\x75\x6d\x2e\x6a\x73"),g=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x62\x6c\x6f\x63\x6b\x52\x65\x77\x61\x72\x64\x2e\x6a\x73"),h=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x68\x65\x63\x6b\x49\x70\x49\x6e\x4c\x69\x73\x74\x2e\x6a\x73"),i=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),j=c("\x63\x72\x79\x70\x74\x6f"),m=(c("\x65\x78\x74\x65\x6e\x64"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6d\x69\x6c\x65\x73\x74\x6f\x6e\x65\x42\x6c\x6f\x63\x6b\x73\x2e\x6a\x73"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6f\x72\x64\x65\x72\x42\x79\x2e\x6a\x73")),n=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73"),o=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),p=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x6a\x73"),q=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),r=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x6a\x73"),s=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x54\x79\x70\x65\x73\x2e\x6a\x73"),w={},x={};w.assetTypes={},w.loaded=!1,w.forging=!1,w.blockReward=new g,w.keypairs={},w.attachApi=function(){var b,a=new n;a.use(function(a,b,c){return t&&w.loaded?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.map(x,{"get /count":"\x63\x6f\x75\x6e\x74","get /search":"\x73\x65\x61\x72\x63\x68","get /voters":"\x67\x65\x74\x56\x6f\x74\x65\x72\x73","get /get":"\x67\x65\x74\x44\x65\x6c\x65\x67\x61\x74\x65","get /":"\x67\x65\x74\x44\x65\x6c\x65\x67\x61\x74\x65\x73","get /fee":"\x67\x65\x74\x46\x65\x65","get /forging/getForgedByAccount":"\x67\x65\x74\x46\x6f\x72\x67\x65\x64\x42\x79\x41\x63\x63\x6f\x75\x6e\x74","put /":"\x61\x64\x64\x44\x65\x6c\x65\x67\x61\x74\x65"}),process.env.DEBUG&&(b={},a.get("\x2f\x66\x6f\x72\x67\x69\x6e\x67\x2f\x64\x69\x73\x61\x62\x6c\x65\x41\x6c\x6c",function(a,c){return 0!==Object.keys(b).length?c.json({success:!1}):(b=w.keypairs,w.keypairs={},c.json({success:!0}))}),a.get("\x2f\x66\x6f\x72\x67\x69\x6e\x67\x2f\x65\x6e\x61\x62\x6c\x65\x41\x6c\x6c",function(a,c){return 0===Object.keys(b).length?c.json({success:!1}):(w.keypairs=b,b={},c.json({success:!0}))})),a.post("\x2f\x66\x6f\x72\x67\x69\x6e\x67\x2f\x65\x6e\x61\x62\x6c\x65",function(a,b){u.schema.validate(a.body,p.enableForging,function(c){var d,e;return c?b.json({success:!1,error:c[0].message}):(d=a.headers["\x78\x2d\x66\x6f\x72\x77\x61\x72\x64\x65\x64\x2d\x66\x6f\x72"]||a.connection.remoteAddress,h(u.config.forging.access.whiteList,d)?(e=u.ed.makeKeypair(j.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest()),a.body.publicKey&&e.publicKey.toString("\x68\x65\x78")!==a.body.publicKey?b.json({success:!1,error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"}):w.keypairs[e.publicKey.toString("\x68\x65\x78")]?b.json({success:!1,error:"\x46\x6f\x72\x67\x69\x6e\x67\x20\x69\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x6e\x61\x62\x6c\x65\x64"}):void t.accounts.getAccount({publicKey:e.publicKey.toString("\x68\x65\x78")},function(a,c){return a?b.json({success:!1,error:a}):c&&c.isDelegate?(w.keypairs[e.publicKey.toString("\x68\x65\x78")]=e,u.logger.info("\x46\x6f\x72\x67\x69\x6e\x67\x20\x65\x6e\x61\x62\x6c\x65\x64\x20\x6f\x6e\x20\x61\x63\x63\x6f\x75\x6e\x74\x3a\x20"+c.address),b.json({success:!0,address:c.address})):b.json({success:!1,error:"\x44\x65\x6c\x65\x67\x61\x74\x65\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})})):b.json({success:!1,error:"\x41\x63\x63\x65\x73\x73\x20\x64\x65\x6e\x69\x65\x64"}))})}),a.post("\x2f\x66\x6f\x72\x67\x69\x6e\x67\x2f\x64\x69\x73\x61\x62\x6c\x65",function(a,b){u.schema.validate(a.body,p.disableForging,function(c){var d,e;return c?b.json({success:!1,error:c[0].message}):(d=a.headers["\x78\x2d\x66\x6f\x72\x77\x61\x72\x64\x65\x64\x2d\x66\x6f\x72"]||a.connection.remoteAddress,h(u.config.forging.access.whiteList,d)?(e=u.ed.makeKeypair(j.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest()),a.body.publicKey&&e.publicKey.toString("\x68\x65\x78")!==a.body.publicKey?b.json({success:!1,error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"}):w.keypairs[e.publicKey.toString("\x68\x65\x78")]?void t.accounts.getAccount({publicKey:e.publicKey.toString("\x68\x65\x78")},function(a,c){return a?b.json({success:!1,error:a}):c&&c.isDelegate?(delete w.keypairs[e.publicKey.toString("\x68\x65\x78")],u.logger.info("\x46\x6f\x72\x67\x69\x6e\x67\x20\x64\x69\x73\x61\x62\x6c\x65\x64\x20\x6f\x6e\x20\x61\x63\x63\x6f\x75\x6e\x74\x3a\x20"+c.address),b.json({success:!0,address:c.address})):b.json({success:!1,error:"\x44\x65\x6c\x65\x67\x61\x74\x65\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})}):b.json({success:!1,error:"\x44\x65\x6c\x65\x67\x61\x74\x65\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})):b.json({success:!1,error:"\x41\x63\x63\x65\x73\x73\x20\x64\x65\x6e\x69\x65\x64"}))})}),a.get("\x2f\x66\x6f\x72\x67\x69\x6e\x67\x2f\x73\x74\x61\x74\x75\x73",function(a,b){u.schema.validate(a.query,p.forgingStatus,function(c){return c?b.json({success:!1,error:c[0].message}):b.json({success:!0,enabled:!!w.keypairs[a.query.publicKey]})})}),u.network.app.use("\x2f\x61\x70\x69\x2f\x64\x65\x6c\x65\x67\x61\x74\x65\x73",a),u.network.app.use(function(a,b,c,d){return a?(u.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},w.getKeysSortByVote=function(a){t.accounts.getAccounts({isDelegate:1,sort:{vote:-1,publicKey:1},limit:q.delegates},["\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"],function(b,c){return b?setImmediate(a,b):setImmediate(a,null,c.map(function(a){return a.publicKey}))})},w.getBlockSlotData=function(a,b,c){v.generateDelegateList(b,function(b,d){var e,f,g,h;if(b)return setImmediate(c,b);for(e=a,f=q.getLastSlot(e);f>e;e+=1)if(g=e%q.delegates,h=d[g],h&&w.keypairs[h])return setImmediate(c,null,{time:q.getSlotTime(e),keypair:w.keypairs[h]});return setImmediate(c,null,null)})},w.forge=function(a){var b,c;return Object.keys(w.keypairs).length?w.forging?!w.loaded||t.loader.syncing()||!t.rounds.loaded()||t.rounds.ticking()?(u.logger.debug("\x43\x6c\x69\x65\x6e\x74\x20\x6e\x6f\x74\x20\x72\x65\x61\x64\x79\x20\x74\x6f\x20\x66\x6f\x72\x67\x65"),setImmediate(a)):(b=q.getSlotNumber(),c=t.blocks.getLastBlock(),b===q.getSlotNumber(c.timestamp)?(u.logger.debug("\x4c\x61\x73\x74\x20\x62\x6c\x6f\x63\x6b\x20\x77\x69\x74\x68\x69\x6e\x20\x73\x61\x6d\x65\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x20\x73\x6c\x6f\x74"),setImmediate(a)):void w.getBlockSlotData(b,c.height+1,function(b,c){return b||null===c?(u.logger.debug("\x53\x6b\x69\x70\x70\x69\x6e\x67\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x20\x73\x6c\x6f\x74"),setImmediate(a)):void u.sequence.add(function(a){return q.getSlotNumber(c.time)!==q.getSlotNumber()?(u.logger.debug("\x44\x65\x6c\x65\x67\x61\x74\x65\x20\x73\x6c\x6f\x74",q.getSlotNumber()),setImmediate(a)):void t.blocks.generateBlock(c.keypair,c.time,function(b){return t.blocks.lastReceipt(new Date),u.logger.info(["\x46\x6f\x72\x67\x65\x64\x20\x6e\x65\x77\x20\x62\x6c\x6f\x63\x6b\x20\x69\x64\x3a",t.blocks.getLastBlock().id,"\x68\x65\x69\x67\x68\x74\x3a",t.blocks.getLastBlock().height,"\x72\x6f\x75\x6e\x64\x3a",t.rounds.calc(t.blocks.getLastBlock().height),"\x73\x6c\x6f\x74\x3a",q.getSlotNumber(c.time),"\x72\x65\x77\x61\x72\x64\x3a"+t.blocks.getLastBlock().reward].join("\x20")),setImmediate(a,b)})},function(b){return b&&u.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x67\x65\x6e\x65\x72\x61\x74\x65\x20\x62\x6c\x6f\x63\x6b\x20\x77\x69\x74\x68\x69\x6e\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x20\x73\x6c\x6f\x74",b),setImmediate(a)})})):(u.logger.debug("\x46\x6f\x72\x67\x69\x6e\x67\x20\x64\x69\x73\x61\x62\x6c\x65\x64\x20\x64\x75\x65\x20\x74\x6f\x20\x74\x69\x6d\x65\x6f\x75\x74"),setImmediate(a)):(u.logger.debug("\x4e\x6f\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x20\x65\x6e\x61\x62\x6c\x65\x64"),setImmediate(a))},w.checkDelegates=function(a,b,c,d){return Array.isArray(b)?void t.accounts.getAccount({publicKey:a},function(a,f){var g,h,j,k;return a?setImmediate(d,a):f?(g="\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64"===c?f.delegates:f.u_delegates,h=Array.isArray(g)?g.length:0,j=0,k=0,void e.eachSeries(b,function(a,b){var d,c=a[0];if("\x2b"!==c&&"\x2d"!==c)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x61\x74\x68\x20\x6f\x70\x65\x72\x61\x74\x6f\x72");"\x2b"===c?j+=1:"\x2b"===c&&(k+=1),d=a.slice(1);try{new Buffer(d,"\x68\x65\x78")}catch(e){return u.logger.error(e.stack),setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79")}return"\x2b"===c&&null!=g&&-1!==g.indexOf(d)?setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x61\x64\x64\x20\x76\x6f\x74\x65\x2c\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x68\x61\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x76\x6f\x74\x65\x64\x20\x66\x6f\x72\x20\x74\x68\x69\x73\x20\x64\x65\x6c\x65\x67\x61\x74\x65"):"\x2d"!==c||null!==g&&-1!==g.indexOf(d)?void t.accounts.getAccount({publicKey:d,isDelegate:1},function(a,c){return a?setImmediate(b,a):c?setImmediate(b):setImmediate(b,"\x44\x65\x6c\x65\x67\x61\x74\x65\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x72\x65\x6d\x6f\x76\x65\x20\x76\x6f\x74\x65\x2c\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x68\x61\x73\x20\x6e\x6f\x74\x20\x76\x6f\x74\x65\x64\x20\x66\x6f\x72\x20\x74\x68\x69\x73\x20\x64\x65\x6c\x65\x67\x61\x74\x65")},function(a){var b,c;return a?setImmediate(d,a):(b=h+j-k,b>i.activeDelegates?(c=b-i.activeDelegates,setImmediate(d,"\x4d\x61\x78\x69\x6d\x75\x6d\x20\x6e\x75\x6d\x62\x65\x72\x20\x6f\x66\x20"+i.activeDelegates+"\x20\x76\x6f\x74\x65\x73\x20\x65\x78\x63\x65\x65\x64\x65\x64\x20\x28"+c+"\x20\x74\x6f\x6f\x20\x6d\x61\x6e\x79\x29")):setImmediate(d))})):setImmediate(d,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):setImmediate(d,"\x56\x6f\x74\x65\x73\x20\x6d\x75\x73\x74\x20\x62\x65\x20\x61\x6e\x20\x61\x72\x72\x61\x79")},w.loadMyDelegates=function(a){var b=null;u.config.forging.secret&&(b=Array.isArray(u.config.forging.secret)?u.config.forging.secret:[u.config.forging.secret]),e.eachSeries(b,function(a,b){var c=u.ed.makeKeypair(j.createHash("\x73\x68\x61\x32\x35\x36").update(a,"\x75\x74\x66\x38").digest());t.accounts.getAccount({publicKey:c.publicKey.toString("\x68\x65\x78")},function(a,d){return a?setImmediate(b,a):d?(d.isDelegate?(w.keypairs[c.publicKey.toString("\x68\x65\x78")]=c,u.logger.info("\x46\x6f\x72\x67\x69\x6e\x67\x20\x65\x6e\x61\x62\x6c\x65\x64\x20\x6f\x6e\x20\x61\x63\x63\x6f\x75\x6e\x74\x3a\x20"+d.address)):u.logger.warn("\x44\x65\x6c\x65\x67\x61\x74\x65\x20\x77\x69\x74\x68\x20\x74\x68\x69\x73\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64\x3a\x20"+c.publicKey.toString("\x68\x65\x78")),setImmediate(b)):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20"+c.publicKey.toString("\x68\x65\x78")+"\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")})},a)},y.prototype.generateDelegateList=function(a,b){w.getKeysSortByVote(function(c,d){var e,f,g,h,i,k,l;if(c)return setImmediate(b,c);for(e=""+t.rounds.calc(a),f=j.createHash("\x73\x68\x61\x32\x35\x36").update(e,"\x75\x74\x66\x38").digest(),g=0,h=d.length;h>g;g++){for(i=0;4>i&&h>g;g++,i++)k=f[i]%h,l=d[k],d[k]=d[g],d[g]=l;f=j.createHash("\x73\x68\x61\x32\x35\x36").update(f).digest()}return setImmediate(b,null,d)})},y.prototype.getDelegates=function(a,b){if(!a)throw"\x4d\x69\x73\x73\x69\x6e\x67\x20\x71\x75\x65\x72\x79\x20\x61\x72\x67\x75\x6d\x65\x6e\x74";t.accounts.getAccounts({isDelegate:1,sort:{vote:-1,publicKey:1}},["\x75\x73\x65\x72\x6e\x61\x6d\x65","\x61\x64\x64\x72\x65\x73\x73","\x70\x75\x62\x6c\x69\x63\x4b\x65\x79","\x76\x6f\x74\x65","\x6d\x69\x73\x73\x65\x64\x62\x6c\x6f\x63\x6b\x73","\x70\x72\x6f\x64\x75\x63\x65\x64\x62\x6c\x6f\x63\x6b\x73"],function(c,d){var e,f,g,h,j,k,l,n,o,p,r,s;if(c)return setImmediate(b,c);for(e=a.limit||i.activeDelegates,f=a.offset||0,g=a.active,e=e>i.activeDelegates?i.activeDelegates:e,h=d.length,j=Math.min(e,h),k=Math.min(f+e,h),l=t.blocks.getLastBlock(),n=w.blockReward.calcSupply(l.height),o=0;o<d.length;o++)d[o].rate=o+1,d[o].approval=d[o].vote/n*100,d[o].approval=Math.round(100*d[o].approval)/100,p=100-d[o].missedblocks/((d[o].producedblocks+d[o].missedblocks)/100),p=Math.abs(p)||0,r=o+1>q.delegates,d[o].productivity=r?0:Math.round(100*p)/100;return s=m(a.orderBy,{quoteField:!1}),s.error?setImmediate(b,s.error):setImmediate(b,null,{delegates:d,sortField:s.sortField,sortMethod:s.sortMethod,count:h,offset:f,limit:k})})},y.prototype.checkDelegates=function(a,b,c){return w.checkDelegates(a,b,"\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64",c)},y.prototype.checkUnconfirmedDelegates=function(a,b,c){return w.checkDelegates(a,b,"\x75\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64",c)},y.prototype.fork=function(a,b){u.logger.info("\x46\x6f\x72\x6b",{delegate:a.generatorPublicKey,block:{id:a.id,timestamp:a.timestamp,height:a.height,previousBlock:a.previousBlock},cause:b}),v.disableForging("\x66\x6f\x72\x6b"),u.db.none(r.insertFork,{delegatePublicKey:a.generatorPublicKey,blockTimestamp:a.timestamp,blockId:a.id,blockHeight:a.height,previousBlock:a.previousBlock,cause:b})},y.prototype.validateBlockSlot=function(a,b){v.generateDelegateList(a.height,function(c,d){var e,f;return c?setImmediate(b,c):(e=q.getSlotNumber(a.timestamp),f=d[e%q.delegates],f&&a.generatorPublicKey===f?setImmediate(b):(u.logger.error("\x45\x78\x70\x65\x63\x74\x65\x64\x20\x67\x65\x6e\x65\x72\x61\x74\x6f\x72\x3a\x20"+f+"\x20\x52\x65\x63\x65\x69\x76\x65\x64\x20\x67\x65\x6e\x65\x72\x61\x74\x6f\x72\x3a\x20"+a.generatorPublicKey),setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x6c\x6f\x74\x3a\x20"+e)))})},y.prototype.sandboxApi=function(a,b,c){o.callMethod(x,a,b,c)},y.prototype.onBind=function(a){t=a,w.assetTypes[s.DELEGATE].bind({modules:t,library:u})},y.prototype.onBlockchainReady=function(){w.loaded=!0,w.loadMyDelegates(function a(b){b&&u.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6c\x6f\x61\x64\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x73",b),w.toggleForgingOnReceipt(),w.forge(function(){setTimeout(a,1e3)})})},y.prototype.cleanup=function(a){return w.loaded=!1,setImmediate(a)},y.prototype.enableForging=function(){return w.forging||(u.logger.debug("\x45\x6e\x61\x62\x6c\x69\x6e\x67\x20\x66\x6f\x72\x67\x69\x6e\x67"),w.forging=!0),w.forging},y.prototype.disableForging=function(a){return w.forging&&(u.logger.debug("\x44\x69\x73\x61\x62\x6c\x69\x6e\x67\x20\x66\x6f\x72\x67\x69\x6e\x67\x20\x64\x75\x65\x20\x74\x6f\x3a",a),w.forging=!1),w.forging},w.toggleForgingOnReceipt=function(){var b,a=t.blocks.lastReceipt();return!a&&u.config.forging.force&&(a=t.blocks.lastReceipt(new Date)),a?(b=+i.forgingTimeOut,u.logger.debug("\x4c\x61\x73\x74\x20\x62\x6c\x6f\x63\x6b\x20\x72\x65\x63\x65\x69\x76\x65\x64\x3a\x20"+a.secondsAgo+"\x20\x73\x65\x63\x6f\x6e\x64\x73\x20\x61\x67\x6f"),a.secondsAgo>b?v.disableForging("\x74\x69\x6d\x65\x6f\x75\x74"):v.enableForging()):void 0},x.getDelegate=function(a,b){u.schema.validate(a.body,p.getDelegate,function(c){return c?setImmediate(b,c[0].message):void t.delegates.getDelegates(a.body,function(c,e){if(c)return setImmediate(b,c);var f=d.find(e.delegates,function(b){return a.body.publicKey?b.publicKey===a.body.publicKey:a.body.username?b.username===a.body.username:!1});return f?setImmediate(b,null,{delegate:f}):setImmediate(b,"\x44\x65\x6c\x65\x67\x61\x74\x65\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")})})},x.search=function(a,b){u.schema.validate(a.body,p.search,function(c){if(c)return setImmediate(b,c[0].message);var d=m(a.body.orderBy,{sortFields:r.sortFields,sortField:"\x75\x73\x65\x72\x6e\x61\x6d\x65"});return d.error?setImmediate(b,d.error):void u.db.query(r.search({q:a.body.q,limit:a.body.limit||100,sortField:d.sortField,sortMethod:d.sortMethod})).then(function(a){return setImmediate(b,null,{delegates:a})})["\x63\x61\x74\x63\x68"](function(a){return u.logger.error(a.stack),setImmediate(b,"\x44\x61\x74\x61\x62\x61\x73\x65\x20\x73\x65\x61\x72\x63\x68\x20\x66\x61\x69\x6c\x65\x64")})})},x.count=function(a,b){u.db.one(r.count).then(function(a){return setImmediate(b,null,{count:a.count})})["\x63\x61\x74\x63\x68"](function(a){return u.logger.error(a.stack),setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x63\x6f\x75\x6e\x74\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x73")})},x.getVoters=function(a,b){u.schema.validate(a.body,p.getVoters,function(c){return c?setImmediate(b,c[0].message):void u.db.one(r.getVoters,{publicKey:a.body.publicKey}).then(function(a){var c=a.accountIds?a.accountIds:[];t.accounts.getAccounts({address:{$in:c},sort:"\x62\x61\x6c\x61\x6e\x63\x65"},["\x61\x64\x64\x72\x65\x73\x73","\x62\x61\x6c\x61\x6e\x63\x65","\x75\x73\x65\x72\x6e\x61\x6d\x65","\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"],function(a,c){return a?setImmediate(b,a):setImmediate(b,null,{accounts:c})})})["\x63\x61\x74\x63\x68"](function(c){return u.logger.error(c.stack),setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x76\x6f\x74\x65\x72\x73\x20\x66\x6f\x72\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x3a\x20"+a.body.publicKey)})})},x.getDelegates=function(a,b){u.schema.validate(a.body,p.getDelegates,function(c){return c?setImmediate(b,c[0].message):void t.delegates.getDelegates(a.body,function(a,c){function d(a,b){var d=parseFloat(a[c.sortField]),e=parseFloat(b[c.sortField]);return"\x41\x53\x43"===c.sortMethod?d-e:e-d}function e(a,b){var d=a[c.sortField],e=b[c.sortField];return"\x41\x53\x43"===c.sortMethod?d.localeCompare(e):e.localeCompare(d)}if(a)return setImmediate(b,a);if(c.sortField)if(["\x61\x70\x70\x72\x6f\x76\x61\x6c","\x70\x72\x6f\x64\x75\x63\x74\x69\x76\x69\x74\x79","\x72\x61\x74\x65","\x76\x6f\x74\x65"].indexOf(c.sortField)>-1)c.delegates=c.delegates.sort(d);else{if(!(["\x75\x73\x65\x72\x6e\x61\x6d\x65","\x61\x64\x64\x72\x65\x73\x73","\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"].indexOf(c.sortField)>-1))return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x6f\x72\x74\x20\x66\x69\x65\x6c\x64");c.delegates=c.delegates.sort(e)}var f=c.delegates.slice(c.offset,c.limit);return setImmediate(b,null,{delegates:f,totalCount:c.count})})})},x.getFee=function(a,b){return setImmediate(b,null,{fee:i.fees.delegate})},x.getForgedByAccount=function(a,b){u.schema.validate(a.body,p.getForgedByAccount,function(c){return c?setImmediate(b,c[0].message):void t.accounts.getAccount({publicKey:a.body.generatorPublicKey},["\x66\x65\x65\x73","\x72\x65\x77\x61\x72\x64\x73"],function(a,c){if(a||!c)return setImmediate(b,a||"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");var d=""+f(c.fees).plus(f(c.rewards));return setImmediate(b,null,{fees:c.fees,rewards:c.rewards,forged:d})})})},x.addDelegate=function(a,b){u.schema.validate(a.body,p.addDelegate,function(c){var d,e;return c?setImmediate(b,c[0].message):(d=j.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest(),e=u.ed.makeKeypair(d),a.body.publicKey&&e.publicKey.toString("\x68\x65\x78")!==a.body.publicKey?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"):void u.balancesSequence.add(function(b){a.body.multisigAccountPublicKey&&a.body.multisigAccountPublicKey!==e.publicKey.toString("\x68\x65\x78")?t.accounts.getAccount({publicKey:a.body.multisigAccountPublicKey},function(c,d){return c?setImmediate(b,c):d&&d.publicKey?d.multisignatures&&d.multisignatures?d.multisignatures.indexOf(e.publicKey.toString("\x68\x65\x78"))<0?setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x62\x65\x6c\x6f\x6e\x67\x20\x74\x6f\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x67\x72\x6f\x75\x70"):void t.accounts.getAccount({publicKey:e.publicKey},function(c,f){var g,h,i;if(c)return setImmediate(b,c);if(!f||!f.publicKey)return setImmediate(b,"\x52\x65\x71\x75\x65\x73\x74\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(f.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");if(f.publicKey===d.publicKey)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79");g=null,f.secondSignature&&(h=j.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),g=u.ed.makeKeypair(h));try{i=u.logic.transaction.create({type:s.DELEGATE,username:a.body.username,sender:d,keypair:e,secondKeypair:g,requester:e})}catch(k){return setImmediate(b,""+k)}t.transactions.receiveTransactions([i],b)}):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x65\x6e\x61\x62\x6c\x65\x64"):setImmediate(b,"\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):t.accounts.setAccountAndGet({publicKey:e.publicKey.toString("\x68\x65\x78")},function(c,d){var f,g,h;if(c)return setImmediate(b,c);if(!d||!d.publicKey)return setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(d.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");f=null,d.secondSignature&&(g=j.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),f=u.ed.makeKeypair(g));try{h=u.logic.transaction.create({type:s.DELEGATE,username:a.body.username,sender:d,keypair:e,secondKeypair:f})}catch(i){return setImmediate(b,""+i)}t.transactions.receiveTransactions([h],b)})},function(a,c){return a?setImmediate(b,a):setImmediate(b,null,{transaction:c[0]})}))})},a.exports=y}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x6c\x6f\x61\x64\x65\x72\x2e\x6a\x73",function(a,b,c){"use strict";function q(a,b){m=b,n=this,o.attachApi(),o.genesisBlock=o.loadingLastBlock=m.genesisblock,setImmediate(a,null,n)}var l,m,n,o,p,d=c("\x61\x73\x79\x6e\x63"),f=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x62\x69\x67\x6e\x75\x6d\x2e\x6a\x73"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73")),h=(c("\x69\x70"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73")),i=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),j=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x6c\x6f\x61\x64\x65\x72\x2e\x6a\x73"),k=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x6c\x6f\x61\x64\x65\x72\x2e\x6a\x73");c("\x63\x6f\x6c\x6f\x72\x73"),o={},p={},o.network={height:0,peers:[]},o.loaded=!1,o.isActive=!1,o.loadingLastBlock=null,o.genesisBlock=null,o.total=0,o.blocksToSync=0,o.syncIntervalId=null,o.retryInterval=1e4,o.attachApi=function(){var a=new h;a.get("\x2f\x73\x74\x61\x74\x75\x73\x2f\x70\x69\x6e\x67",function(a,b){o.ping(function(a,c){return b.status(a).json(c)})}),a.map(p,{"get /status":"\x73\x74\x61\x74\x75\x73","get /status/sync":"\x73\x79\x6e\x63"}),m.network.app.use("\x2f\x61\x70\x69\x2f\x6c\x6f\x61\x64\x65\x72",a),m.network.app.use(function(a,b,c,d){return a?(m.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},o.syncTrigger=function(a){a===!1&&o.syncIntervalId&&(clearTimeout(o.syncIntervalId),o.syncIntervalId=null),a!==!0||o.syncIntervalId||setImmediate(function b(){m.network.io.sockets.emit("\x6c\x6f\x61\x64\x65\x72\x2f\x73\x79\x6e\x63",{blocks:o.blocksToSync,height:l.blocks.getLastBlock().height}),o.syncIntervalId=setTimeout(b,1e3)})},o.loadSignatures=function(a){l.transport.getFromRandomPeer({api:"\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",method:"\x47\x45\x54"},function(b,c){return b?setImmediate(a):void m.schema.validate(c.body,j.loadSignatures,function(b){return b?setImmediate(a):void m.sequence.add(function(a){d.eachSeries(c.body.signatures,function(a,b){d.eachSeries(a.signatures,function(b,c){l.multisignatures.processSignature({signature:b,transaction:a.transaction},function(){return setImmediate(c)})},b)},a)},a)})})},o.loadUnconfirmedTransactions=function(a){l.transport.getFromRandomPeer({api:"\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",method:"\x47\x45\x54"},function(b,c){var d,e,f,g,h,i;if(b)return setImmediate(a);if(d=m.schema.validate(c.body,j.loadUnconfirmedTransactions),!d)return setImmediate(a);for(e=l.peers.inspect(c.peer),f=c.body.transactions,g=0;g<f.length;g++){h=f[g],i=h?f.id:"\x6e\x75\x6c\x6c";try{h=m.logic.transaction.objectNormalize(h)}catch(k){return m.logger.error(["\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",i].join("\x20"),""+k),h&&m.logger.error("\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",h),m.logger.warn(["\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",i,"\x69\x73\x20\x6e\x6f\x74\x20\x76\x61\x6c\x69\x64\x2c\x20\x62\x61\x6e\x20\x36\x30\x20\x6d\x69\x6e"].join("\x20"),e.string),l.peers.state(e.ip,e.port,0,3600),setImmediate(a)}}m.balancesSequence.add(function(a){l.transactions.receiveTransactions(f,a)},a)})},o.loadBlockChain=function(){function e(e){c=!0,o.total=e,m.logic.account.removeTables(function(f){if(f)throw f;m.logic.account.createTables(function(f){if(f)throw f;d.until(function(){return a>e},function(d){e>1&&m.logger.info("\x52\x65\x62\x75\x69\x6c\x64\x69\x6e\x67\x20\x62\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x2c\x20\x63\x75\x72\x72\x65\x6e\x74\x20\x62\x6c\x6f\x63\x6b\x20\x68\x65\x69\x67\x68\x74\x3a\x20"+(a+1)),l.blocks.loadBlocksOffset(b,a,c,function(c,e){return c?setImmediate(d,c):(a+=b,o.loadingLastBlock=e,setImmediate(d))})},function(a){a?(m.logger.error(a),a.block&&(m.logger.error("\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x66\x61\x69\x6c\x65\x64\x20\x61\x74\x3a\x20"+a.block.height),l.blocks.simpleDeleteAfterBlock(a.block.id,function(){m.logger.error("\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x63\x6c\x69\x70\x70\x65\x64"),m.bus.message("\x62\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x52\x65\x61\x64\x79")}))):(m.logger.info("\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x72\x65\x61\x64\x79"),m.bus.message("\x62\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x52\x65\x61\x64\x79"))})})})}function g(a,b){b&&(m.logger.warn(b),m.logger.warn("\x52\x65\x63\x72\x65\x61\x74\x69\x6e\x67\x20\x6d\x65\x6d\x6f\x72\x79\x20\x74\x61\x62\x6c\x65\x73")),e(a)}function h(a){var b=[a.one(k.countBlocks),a.one(k.countMemAccounts),a.query(k.getMemRounds)];return a.batch(b)}var a=0,b=+m.config.loading.loadPerIteration||1e3,c=!!m.config.loading.verifyOnLoading;m.db.task(h).then(function(a){function i(a){var b=[a.none(k.updateMemAccounts),a.query(k.getOrphanedMemAccounts),a.query(k.getDelegates)];return a.batch(b)}var e,h,b=a[0].count,d=!a[1].count;return m.logger.info("\x42\x6c\x6f\x63\x6b\x73\x20"+b),e=l.rounds.calc(b),(void 0!==m.config.loading.snapshot||m.config.loading.snapshot>0)&&(m.logger.info("\x53\x6e\x61\x70\x73\x68\x6f\x74\x20\x6d\x6f\x64\x65\x20\x65\x6e\x61\x62\x6c\x65\x64"),c=!0,(isNaN(m.config.loading.snapshot)||m.config.loading.snapshot>=e)&&(m.config.loading.snapshot=e,(1===b||b%f.activeDelegates>0)&&(m.config.loading.snapshot=e>1?e-1:1)),m.logger.info("\x53\x6e\x61\x70\x73\x68\x6f\x74\x74\x69\x6e\x67\x20\x74\x6f\x20\x65\x6e\x64\x20\x6f\x66\x20\x72\x6f\x75\x6e\x64\x3a\x20"+m.config.loading.snapshot)),1===b?g(b):c?g(b,"\x42\x6c\x6f\x63\x6b\x73\x20\x76\x65\x72\x69\x66\x69\x63\x61\x74\x69\x6f\x6e\x20\x65\x6e\x61\x62\x6c\x65\x64"):d?g(b,"\x44\x65\x74\x65\x63\x74\x65\x64\x20\x6d\x69\x73\x73\x65\x64\x20\x62\x6c\x6f\x63\x6b\x73\x20\x69\x6e\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73"):(h=a[2].filter(function(a){return a.round!==e+""}),h.length>0?g(b,"\x44\x65\x74\x65\x63\x74\x65\x64\x20\x75\x6e\x61\x70\x70\x6c\x69\x65\x64\x20\x72\x6f\x75\x6e\x64\x73\x20\x69\x6e\x20\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64"):void m.db.task(i).then(function(a){return a[1].length>0?g(b,"\x44\x65\x74\x65\x63\x74\x65\x64\x20\x6f\x72\x70\x68\x61\x6e\x65\x64\x20\x62\x6c\x6f\x63\x6b\x73\x20\x69\x6e\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73"):0===a[2].length?g(b,"\x4e\x6f\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x20\x66\x6f\x75\x6e\x64"):void l.blocks.loadBlocksOffset(1,b,c,function(a,c){
return a?g(b,a||"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6c\x6f\x61\x64\x20\x62\x6c\x6f\x63\x6b\x73\x20\x6f\x66\x66\x73\x65\x74"):(o.lastBlock=c,m.logger.info("\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x72\x65\x61\x64\x79"),m.bus.message("\x62\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x52\x65\x61\x64\x79"),void 0)})}))})["\x63\x61\x74\x63\x68"](function(a){return m.logger.error(a.stack),process.exit(0)})},o.loadBlocksFromNetwork=function(a){var b=0,c=!1;n.getNetwork(function(e,f){return e?setImmediate(a,e):void d.whilst(function(){return!c&&5>b},function(a){function g(){o.blocksToSync=d.height,l.blocks.loadBlocksFromPeer(d,function(f,g){f&&(m.logger.error(""+f),m.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6c\x6f\x61\x64\x20\x62\x6c\x6f\x63\x6b\x73\x20\x66\x72\x6f\x6d\x3a\x20"+d.string),b+=1),c=g.id===e.id,g=e=null,a()})}function h(c){m.logger.info("\x4c\x6f\x6f\x6b\x69\x6e\x67\x20\x66\x6f\x72\x20\x63\x6f\x6d\x6d\x6f\x6e\x20\x62\x6c\x6f\x63\x6b\x20\x77\x69\x74\x68\x3a\x20"+d.string),l.blocks.getCommonBlock(d,e.height,function(e,f){return f?(m.logger.info(["\x46\x6f\x75\x6e\x64\x20\x63\x6f\x6d\x6d\x6f\x6e\x20\x62\x6c\x6f\x63\x6b\x3a",f.id,"\x77\x69\x74\x68\x3a",d.string].join("\x20")),setImmediate(c)):(e&&m.logger.error(""+e),m.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x66\x69\x6e\x64\x20\x63\x6f\x6d\x6d\x6f\x6e\x20\x62\x6c\x6f\x63\x6b\x20\x77\x69\x74\x68\x3a\x20"+d.string),b+=1,a())})}var d=f.peers[Math.floor(Math.random()*f.peers.length)],e=l.blocks.getLastBlock();1===e.height?g():h(g)},function(b){return b?(m.logger.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x6c\x6f\x61\x64\x20\x62\x6c\x6f\x63\x6b\x73\x20\x66\x72\x6f\x6d\x20\x6e\x65\x74\x77\x6f\x72\x6b",b),setImmediate(a,b)):setImmediate(a)})})},o.findGoodPeers=function(a){var b,c,d,e,f,g,h;if(a=a.filter(function(a){return null!=a}),a.length<10)return{height:0,peers:[]};a=a.sort(function(a,b){return b.height-a.height}),b={},c=0,e=2;for(f in a)g=parseInt(a[f].height/e)*e,b[g]=(b[g]?b[g]:0)+1,b[g]>c&&(c=b[g],d=g);return h=a.filter(function(a){return a&&Math.abs(d-a.height)<e+1}).map(function(a){return a.peer.height=a.height,a.peer}),{height:d,peers:h}},q.prototype.getNetwork=function(a){return o.network.height>0&&Math.abs(o.network.height-l.blocks.getLastBlock().height)<101?setImmediate(a,null,o.network):void l.transport.getFromRandomPeer({api:"\x2f\x6c\x69\x73\x74",method:"\x47\x45\x54"},function(b,c){return b?(m.logger.info("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x63\x6f\x6e\x6e\x65\x63\x74\x20\x70\x72\x6f\x70\x65\x72\x6c\x79\x20\x77\x69\x74\x68\x20\x6e\x65\x74\x77\x6f\x72\x6b",b),setImmediate(a,b)):void m.schema.validate(c.body,j.getNetwork.peers,function(b){if(b)return setImmediate(a,b);var e=c.body.peers;m.logger.debug(["\x52\x65\x63\x65\x69\x76\x65\x64",c.body.peers.length,"\x70\x65\x65\x72\x73\x20\x66\x72\x6f\x6d"].join("\x20"),c.peer.string),d.map(e,function(a,b){var c=m.schema.validate(l.peers.inspect(a),j.getNetwork.peer);return c?void l.transport.getFromPeer(a,{api:"\x2f\x68\x65\x69\x67\x68\x74",method:"\x47\x45\x54"},function(c,d){if(c)return m.logger.error(c),m.logger.warn("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x68\x65\x69\x67\x68\x74\x20\x66\x72\x6f\x6d\x20\x70\x65\x65\x72",a.string),setImmediate(b);var e=m.schema.validate(d.body,j.getNetwork.height);return e?(m.logger.info(["\x52\x65\x63\x65\x69\x76\x65\x64\x20\x68\x65\x69\x67\x68\x74\x3a",d.body.height,"\x66\x72\x6f\x6d\x20\x70\x65\x65\x72"].join("\x20"),a.string),setImmediate(b,null,{peer:a,height:d.body.height})):(m.logger.warn("\x52\x65\x63\x65\x69\x76\x65\x64\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x68\x65\x69\x67\x68\x74\x20\x66\x72\x6f\x6d\x20\x70\x65\x65\x72",a.string),setImmediate(b))}):(m.logger.warn("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x70\x65\x65\x72",a),setImmediate(b))},function(b,c){return o.network=o.findGoodPeers(c),b?setImmediate(a,b):o.network.peers.length?setImmediate(a,null,o.network):setImmediate(a,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x66\x69\x6e\x64\x20\x65\x6e\x6f\x75\x67\x68\x20\x67\x6f\x6f\x64\x20\x70\x65\x65\x72\x73\x20\x74\x6f\x20\x73\x79\x6e\x63\x20\x77\x69\x74\x68")})})})},q.prototype.syncing=function(){return!!o.syncIntervalId},q.prototype.sandboxApi=function(a,b,c){i.callMethod(p,a,b,c)},q.prototype.onPeersReady=function(){setImmediate(function a(){var b=l.blocks.lastReceipt();!o.loaded||n.syncing()||b&&!b.stale?setTimeout(a,1e4):(m.logger.debug("\x4c\x6f\x61\x64\x69\x6e\x67\x20\x62\x6c\x6f\x63\x6b\x73\x20\x66\x72\x6f\x6d\x20\x6e\x65\x74\x77\x6f\x72\x6b"),m.sequence.add(function(a){o.isActive=!0,o.syncTrigger(!0),o.loadBlocksFromNetwork(a)},function(b){b&&m.logger.warn("\x42\x6c\x6f\x63\x6b\x73\x20\x74\x69\x6d\x65\x72",b),o.isActive=!1,o.syncTrigger(!1),o.blocksToSync=0,setTimeout(a,1e4)}))}),setImmediate(function b(){o.loaded&&!n.syncing()?(m.logger.debug("\x4c\x6f\x61\x64\x69\x6e\x67\x20\x75\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73"),o.loadUnconfirmedTransactions(function(a){a&&m.logger.warn("\x55\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x20\x74\x69\x6d\x65\x72",a),setTimeout(b,14e3)})):setTimeout(b,14e3)}),setImmediate(function c(){o.loaded&&!n.syncing()?(m.logger.debug("\x4c\x6f\x61\x64\x69\x6e\x67\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73"),o.loadSignatures(function(a){a&&m.logger.warn("\x53\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x74\x69\x6d\x65\x72",a),setTimeout(c,14e3)})):setTimeout(c,14e3)})},q.prototype.onBind=function(a){l=a,o.loadBlockChain()},q.prototype.onBlockchainReady=function(){o.loaded=!0},q.prototype.cleanup=function(a){return o.loaded=!1,setImmediate(a)},o.ping=function(a){var b=l.blocks.getLastBlock();return b&&b.fresh?setImmediate(a,200,{success:!0}):setImmediate(a,503,{success:!1})},p.status=function(a,b){return setImmediate(b,null,{loaded:o.loaded,now:o.loadingLastBlock.height,blocksCount:o.total})},p.sync=function(a,b){return setImmediate(b,null,{syncing:n.syncing(),blocks:o.blocksToSync,height:l.blocks.getLastBlock().height})},a.exports=q}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73",function(a,b,c){"use strict";function s(a,b){o=b,g=o.genesisblock,p=this,q.attachApi();var d=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x2e\x6a\x73");q.assetTypes[m.MULTI]=o.logic.transaction.attachAssetType(m.MULTI,new d),setImmediate(a,null,p)}var n,o,p,d=c("\x61\x73\x79\x6e\x63"),e=c("\x63\x72\x79\x70\x74\x6f"),g=(c("\x65\x78\x74\x65\x6e\x64"),null),h=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73"),i=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),j=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73"),l=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73")),m=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x54\x79\x70\x65\x73\x2e\x6a\x73"),q={},r={};q.assetTypes={},q.attachApi=function(){var a=new h;a.use(function(a,b,c){return n?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.map(r,{"get /pending":"\x70\x65\x6e\x64\x69\x6e\x67","post /sign":"\x73\x69\x67\x6e","put /":"\x61\x64\x64\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65","get /accounts":"\x67\x65\x74\x41\x63\x63\x6f\x75\x6e\x74\x73"}),a.use(function(a,b){b.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x6e\x64\x70\x6f\x69\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})}),o.network.app.use("\x2f\x61\x70\x69\x2f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",a),o.network.app.use(function(a,b,c,d){return a?(o.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},s.prototype.sandboxApi=function(a,b,c){i.callMethod(r,a,b,c)},s.prototype.onBind=function(a){n=a,q.assetTypes[m.MULTI].bind({modules:n,library:o})},r.getAccounts=function(a,b){o.schema.validate(a.body,j.getAccounts,function(c){return c?setImmediate(b,c[0].message):void o.db.one(l.getAccounts,{publicKey:a.body.publicKey}).then(function(a){var c=Array.isArray(a.accountId)?a.accountId:[];n.accounts.getAccounts({address:{$in:c},sort:"\x62\x61\x6c\x61\x6e\x63\x65"},["\x61\x64\x64\x72\x65\x73\x73","\x62\x61\x6c\x61\x6e\x63\x65","\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73","\x6d\x75\x6c\x74\x69\x6c\x69\x66\x65\x74\x69\x6d\x65","\x6d\x75\x6c\x74\x69\x6d\x69\x6e"],function(a,c){return a?setImmediate(b,a):void d.eachSeries(c,function(a,b){var d,c=[];for(d=0;d<a.multisignatures.length;d++)c.push(n.accounts.generateAddressByPublicKey(a.multisignatures[d]));n.accounts.getAccounts({address:{$in:c}},["\x61\x64\x64\x72\x65\x73\x73","\x70\x75\x62\x6c\x69\x63\x4b\x65\x79","\x62\x61\x6c\x61\x6e\x63\x65"],function(c,d){return c?setImmediate(b,c):(a.multisigaccounts=d,setImmediate(b))})},function(a){return a?setImmediate(b,a):setImmediate(b,null,{accounts:c})})})})["\x63\x61\x74\x63\x68"](function(a){return o.logger.error(a.stack),setImmediate(b,"\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x23\x67\x65\x74\x41\x63\x63\x6f\x75\x6e\x74\x73\x20\x65\x72\x72\x6f\x72")})})},r.pending=function(a,b){o.schema.validate(a.body,j.pending,function(c){var e,f;return c?setImmediate(b,c[0].message):(e=n.transactions.getUnconfirmedTransactionList(),e=e.filter(function(b){return b.senderPublicKey===a.body.publicKey}),f=[],void d.eachSeries(e,function(b,c){var e,g,h,d=!1;if(b.signatures&&b.signatures.length>0){e=!1;for(g in b.signatures){h=b.signatures[g];try{e=o.logic.transaction.verifySignature(b,a.body.publicKey,b.signatures[g])}catch(i){o.logger.error(i.stack),e=!1}if(e)break}e&&(d=!0)}d||b.senderPublicKey!==a.body.publicKey||(d=!0),n.accounts.getAccount({publicKey:b.senderPublicKey},function(e,g){var h,i,j,k,l,m;return e?setImmediate(c,e):g?(h=g.publicKey===a.body.publicKey&&Array.isArray(g.u_multisignatures)&&g.u_multisignatures.length>0,i=Array.isArray(g.u_multisignatures)&&g.u_multisignatures.indexOf(a.body.publicKey)>=0,j=Array.isArray(g.multisignatures)&&g.multisignatures.indexOf(a.body.publicKey)>=0,(h||i||j)&&(k=g.u_multimin||g.multimin,l=g.u_multilifetime||g.multilifetime,m=g.u_multisignatures||[],f.push({max:m.length,min:k,lifetime:l,signed:d,transaction:b})),setImmediate(c)):setImmediate(c,"\x53\x65\x6e\x64\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")})},function(){return setImmediate(b,null,{transactions:f})}))})},s.prototype.processSignature=function(a,b){function d(b){o.balancesSequence.add(function(b){var c=n.transactions.getUnconfirmedTransaction(a.transaction);return c?(c.signatures=c.signatures||[],c.signatures.push(a.signature),o.bus.message("\x73\x69\x67\x6e\x61\x74\x75\x72\x65",c,!0),setImmediate(b)):setImmediate(b,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")},b)}var e,f,g,c=n.transactions.getUnconfirmedTransaction(a.transaction);if(!c)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e");if(c.type===m.MULTI){if(c.signatures=c.signatures||[],c.asset.multisignature.signatures||-1!==c.signatures.indexOf(a.signature))return setImmediate(b,"\x50\x65\x72\x6d\x69\x73\x73\x69\x6f\x6e\x20\x74\x6f\x20\x73\x69\x67\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x64\x65\x6e\x69\x65\x64");e=!1;try{for(f=0;f<c.asset.multisignature.keysgroup.length&&!e;f++)g=c.asset.multisignature.keysgroup[f].substring(1),e=o.logic.transaction.verifySignature(c,g,a.signature)}catch(h){return o.logger.error(h.stack),setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65")}return e?d(b):setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65")}n.accounts.getAccount({address:c.senderId},function(e,f){var g,h,i;if(e)return setImmediate(b,"\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(g=!1,h=f.multisignatures,c.requesterPublicKey&&h.push(c.senderPublicKey),!f)return setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(c.signatures=c.signatures||[],c.signatures.indexOf(a.signature)>=0)return setImmediate(b,"\x53\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x78\x69\x73\x74\x73");try{for(i=0;i<h.length&&!g;i++)g=o.logic.transaction.verifySignature(c,h[i],a.signature)}catch(j){return o.logger.error(j.stack),setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65")}return g?(o.network.io.sockets.emit("\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x2f\x63\x68\x61\x6e\x67\x65",{}),d(b)):setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65")})},r.sign=function(a,b){o.schema.validate(a.body,j.sign,function(c){function i(b){o.balancesSequence.add(function(b){var c=n.transactions.getUnconfirmedTransaction(a.body.transactionId);return c?(c.signatures=c.signatures||[],c.signatures.push(h),o.bus.message("\x73\x69\x67\x6e\x61\x74\x75\x72\x65",{signature:h,transaction:c.id},!0),setImmediate(b)):setImmediate(b,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")},function(a){return a?setImmediate(b,a):setImmediate(b,null,{transactionId:d.id})})}var d,f,g,h;return c?setImmediate(b,c[0].message):(d=n.transactions.getUnconfirmedTransaction(a.body.transactionId))?(f=e.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest(),g=o.ed.makeKeypair(f),a.body.publicKey&&g.publicKey.toString("\x68\x65\x78")!==a.body.publicKey?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"):(h=o.logic.transaction.multisign(g,d),d.type===m.MULTI?-1===d.asset.multisignature.keysgroup.indexOf("\x2b"+g.publicKey.toString("\x68\x65\x78"))||d.signatures&&-1!==d.signatures.indexOf(h.toString("\x68\x65\x78"))?setImmediate(b,"\x50\x65\x72\x6d\x69\x73\x73\x69\x6f\x6e\x20\x74\x6f\x20\x73\x69\x67\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x64\x65\x6e\x69\x65\x64"):(o.network.io.sockets.emit("\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x2f\x63\x68\x61\x6e\x67\x65",{}),i(b)):void n.accounts.getAccount({address:d.senderId},function(a,c){if(a)return setImmediate(b,a);if(!c)return setImmediate(b,"\x53\x65\x6e\x64\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(d.requesterPublicKey){if(c.publicKey!==g.publicKey.toString("\x68\x65\x78")||d.senderPublicKey!==g.publicKey.toString("\x68\x65\x78"))return setImmediate(b,"\x50\x65\x72\x6d\x69\x73\x73\x69\x6f\x6e\x20\x74\x6f\x20\x73\x69\x67\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x64\x65\x6e\x69\x65\x64")}else if(c.multisignatures.indexOf(g.publicKey.toString("\x68\x65\x78"))<0)return setImmediate(b,"\x50\x65\x72\x6d\x69\x73\x73\x69\x6f\x6e\x20\x74\x6f\x20\x73\x69\x67\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x64\x65\x6e\x69\x65\x64");return d.signatures&&-1!==d.signatures.indexOf(h)?setImmediate(b,"\x50\x65\x72\x6d\x69\x73\x73\x69\x6f\x6e\x20\x74\x6f\x20\x73\x69\x67\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x64\x65\x6e\x69\x65\x64"):(o.network.io.sockets.emit("\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x2f\x63\x68\x61\x6e\x67\x65",{}),i(b))}))):setImmediate(b,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")})},r.addMultisignature=function(a,b){o.schema.validate(a.body,j.addMultisignature,function(c){var d,f;return c?setImmediate(b,c[0].message):(d=e.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest(),f=o.ed.makeKeypair(d),a.body.publicKey&&f.publicKey.toString("\x68\x65\x78")!==a.body.publicKey?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"):void o.balancesSequence.add(function(b){n.accounts.setAccountAndGet({publicKey:f.publicKey.toString("\x68\x65\x78")},function(c,d){var g,h,i;if(c)return setImmediate(b,c);if(!d||!d.publicKey)return setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(d.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");g=null,d.secondSignature&&(h=e.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),g=o.ed.makeKeypair(h));try{i=o.logic.transaction.create({type:m.MULTI,sender:d,keypair:f,secondKeypair:g,min:a.body.min,keysgroup:a.body.keysgroup,lifetime:a.body.lifetime})}catch(j){return setImmediate(b,""+j)}n.transactions.receiveTransactions([i],b)})},function(a,c){return a?setImmediate(b,a):(o.network.io.sockets.emit("\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2f\x63\x68\x61\x6e\x67\x65",{}),setImmediate(b,null,{transactionId:c[0].id}))}))})},a.exports=s}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x70\x65\x65\x72\x73\x2e\x6a\x73",function(a,b,c){"use strict";function v(a,b){q=b,r=this,s.attachApi(),setImmediate(a,null,r)}var p,q,r,d=c("\x6c\x6f\x64\x61\x73\x68"),e=c("\x61\x73\x79\x6e\x63"),f=c("\x65\x78\x74\x65\x6e\x64"),h=(c("\x66\x73"),c("\x69\x70")),i=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6f\x72\x64\x65\x72\x42\x79\x2e\x6a\x73"),k=(c("\x70\x61\x74\x68"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73")),l=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),m=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x70\x65\x65\x72\x73\x2e\x6a\x73"),n=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x70\x65\x65\x72\x73\x2e\x6a\x73"),s=(c("\x75\x74\x69\x6c"),{}),t={},u=[];s.attachApi=function(){var a=new k;a.use(function(a,b,c){return p?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.map(t,{"get /":"\x67\x65\x74\x50\x65\x65\x72\x73","get /version":"\x76\x65\x72\x73\x69\x6f\x6e","get /get":"\x67\x65\x74\x50\x65\x65\x72"}),a.use(function(a,b){b.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x6e\x64\x70\x6f\x69\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})}),q.network.app.use("\x2f\x61\x70\x69\x2f\x70\x65\x65\x72\x73",a),q.network.app.use(function(a,b,c,d){return a?(q.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},s.updatePeersList=function(a){p.transport.getFromRandomPeer({api:"\x2f\x6c\x69\x73\x74",method:"\x47\x45\x54"},function(b,c){return b?setImmediate(a):void q.schema.validate(c.body,m.updatePeersList.peers,function(b){var d,f;return b?setImmediate(a):(q.logger.debug("\x52\x65\x6d\x6f\x76\x65\x64\x20\x70\x65\x65\x72\x73\x3a\x20"+u.length),d=c.body.peers.filter(function(a){return u.indexOf(a.ip)}),f=Math.floor(q.config.peers.options.maxUpdatePeers)||20,d.length>f&&(d=d.slice(0,f)),Math.random()<.5&&(u.shift(),u.pop()),q.logger.debug(["\x50\x69\x63\x6b\x65\x64",d.length,"\x6f\x66",c.body.peers.length,"\x70\x65\x65\x72\x73"].join("\x20")),void e.eachLimit(d,2,function(a,b){a=r.inspect(a),q.schema.validate(a,m.updatePeersList.peer,function(c){return c?(c.forEach(function(b){q.logger.error(["\x52\x65\x6a\x65\x63\x74\x69\x6e\x67\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x70\x65\x65\x72\x3a",a.ip,b.path,b.message].join("\x20"))}),setImmediate(b)):r.update(a,b)})},a))})})},s.count=function(a){q.db.query(n.count).then(function(b){var c=b.length&&b[0].count;return setImmediate(a,null,c)})["\x63\x61\x74\x63\x68"](function(b){return q.logger.error(b.stack),setImmediate(a,"\x50\x65\x65\x72\x73\x23\x63\x6f\x75\x6e\x74\x20\x65\x72\x72\x6f\x72")})},s.banManager=function(a){q.db.query(n.banManager,{now:Date.now()}).then(function(b){return setImmediate(a,null,b)})["\x63\x61\x74\x63\x68"](function(b){return q.logger.error(b.stack),setImmediate(a,"\x50\x65\x65\x72\x73\x23\x62\x61\x6e\x4d\x61\x6e\x61\x67\x65\x72\x20\x65\x72\x72\x6f\x72")})},s.getByFilter=function(a,b){var e,c=[],d={};return a.state&&(c.push("\x22\x73\x74\x61\x74\x65\x22\x20\x3d\x20\x24\x7b\x73\x74\x61\x74\x65\x7d"),d.state=a.state),a.os&&(c.push("\x22\x6f\x73\x22\x20\x3d\x20\x24\x7b\x6f\x73\x7d"),d.os=a.os),a.version&&(c.push("\x22\x76\x65\x72\x73\x69\x6f\x6e\x22\x20\x3d\x20\x24\x7b\x76\x65\x72\x73\x69\x6f\x6e\x7d"),d.version=a.version),a.ip&&(c.push("\x22\x69\x70\x22\x20\x3d\x20\x24\x7b\x69\x70\x7d"),d.ip=a.ip),a.port&&(c.push("\x22\x70\x6f\x72\x74\x22\x20\x3d\x20\x24\x7b\x70\x6f\x72\x74\x7d"),d.port=a.port),a.limit?d.limit=Math.abs(a.limit):d.limit=100,a.offset?d.offset=Math.abs(a.offset):d.offset=0,d.limit>100?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6c\x69\x6d\x69\x74\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x31\x30\x30"):(e=i(a.orderBy,{sortFields:n.sortFields}),e.error?setImmediate(b,e.error):void q.db.query(n.getByFilter({where:c,sortField:e.sortField,sortMethod:e.sortMethod}),d).then(function(a){return setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return q.logger.error(a.stack),setImmediate(b,"\x50\x65\x65\x72\x73\x23\x67\x65\x74\x42\x79\x46\x69\x6c\x74\x65\x72\x20\x65\x72\x72\x6f\x72")}))},v.prototype.inspect=function(a){return a=a||{},/^[0-9]+$/.test(a.ip)&&(a.ip=h.fromLong(a.ip)),a.port=parseInt(a.port),a.ip?a.string=a.ip+"\x3a"+a.port||"\x75\x6e\x6b\x6e\x6f\x77\x6e":a.string="\x75\x6e\x6b\x6e\x6f\x77\x6e",a.os=a.os||"\x75\x6e\x6b\x6e\x6f\x77\x6e",a.version=a.version||"\x30\x2e\x30\x2e\x30",a},v.prototype.list=function(a,b){a.limit=a.limit||100,q.db.query(n.randomList(a),a).then(function(a){return setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return q.logger.error(a.stack),setImmediate(b,"\x50\x65\x65\x72\x73\x23\x6c\x69\x73\x74\x20\x65\x72\x72\x6f\x72")})},v.prototype.state=function(a,b,c,e,f){var h,i,g=d.find(q.config.peers,function(c){return c.ip===a&&c.port===b});return void 0!==g&&f?setImmediate(f,"\x50\x65\x65\x72\x20\x69\x6e\x20\x77\x68\x69\x74\x65\x20\x6c\x69\x73\x74"):(0===c?(h=1e3*(e||1),h=Date.now()+h):h=null,i={state:c,clock:h,ip:a,port:b},void q.db.query(n.state,i).then(function(a){return q.logger.debug("\x55\x70\x64\x61\x74\x65\x64\x20\x70\x65\x65\x72\x20\x73\x74\x61\x74\x65",i),f&&setImmediate(f,null,a)})["\x63\x61\x74\x63\x68"](function(a){return q.logger.error(a.stack),f&&setImmediate(f)}))},v.prototype.remove=function(a,b,c){var f,e=d.find(q.config.peers.list,function(c){return c.ip===a&&c.port===b});return void 0!==e&&c?setImmediate(c,"\x50\x65\x65\x72\x20\x69\x6e\x20\x77\x68\x69\x74\x65\x20\x6c\x69\x73\x74"):(u.push(a),f={ip:a,port:b},void q.db.query(n.remove,f).then(function(a){return q.logger.debug("\x52\x65\x6d\x6f\x76\x65\x64\x20\x70\x65\x65\x72",f),c&&setImmediate(c,null,a)})["\x63\x61\x74\x63\x68"](function(a){return q.logger.error(a.stack),c&&setImmediate(c)}))},v.prototype.addDapp=function(a,b){q.db.query(n.getByIdPort,{ip:a.ip,port:a.port}).then(function(c){if(!c.length)return setImmediate(b);var d={dappId:a.dappid,peerId:c[0].id};q.db.query(n.addDapp,d).then(function(a){return q.logger.debug("\x41\x64\x64\x65\x64\x20\x64\x61\x70\x70\x20\x70\x65\x65\x72",d),setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return q.logger.error(a.stack),setImmediate(b,"\x50\x65\x65\x72\x73\x23\x61\x64\x64\x44\x61\x70\x70\x20\x65\x72\x72\x6f\x72")})})["\x63\x61\x74\x63\x68"](function(a){return q.logger.error(a.stack),setImmediate(b,"\x50\x65\x65\x72\x73\x23\x61\x64\x64\x44\x61\x70\x70\x20\x65\x72\x72\x6f\x72")})},v.prototype.update=function(a,b){var c=a.dappid,d={ip:a.ip,port:a.port,os:a.os||null,version:a.version||null};e.series([function(a){q.db.query(n.insert,f({},d,{state:1})).then(function(b){return q.logger.debug("\x49\x6e\x73\x65\x72\x74\x65\x64\x20\x70\x65\x65\x72",d),setImmediate(a,null,b)})["\x63\x61\x74\x63\x68"](function(b){return q.logger.error(b.stack),setImmediate(a,"\x50\x65\x65\x72\x73\x23\x75\x70\x64\x61\x74\x65\x20\x65\x72\x72\x6f\x72")})},function(b){void 0!==a.state&&(d.state=a.state),q.db.query(n.update(d),d).then(function(a){return q.logger.debug("\x55\x70\x64\x61\x74\x65\x64\x20\x70\x65\x65\x72",d),setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return q.logger.error(a.stack),setImmediate(b,"\x50\x65\x65\x72\x73\x23\x75\x70\x64\x61\x74\x65\x20\x65\x72\x72\x6f\x72")})},function(b){return c?void r.addDapp({dappid:c,ip:a.ip,port:a.port},b):setImmediate(b)}],function(a){return a&&q.logger.error(a),b&&setImmediate(b)})},v.prototype.sandboxApi=function(a,b,c){l.callMethod(t,a,b,c)},v.prototype.onBind=function(a){p=a},v.prototype.onBlockchainReady=function(){e.eachSeries(q.config.peers.list,function(a,b){var c={ip:a.ip,port:a.port,state:2};q.db.query(n.insertSeed,c).then(function(a){return q.logger.debug("\x49\x6e\x73\x65\x72\x74\x65\x64\x20\x73\x65\x65\x64\x20\x70\x65\x65\x72",c),setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return q.logger.error(a.stack),setImmediate(b,"\x50\x65\x65\x72\x73\x23\x6f\x6e\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x52\x65\x61\x64\x79\x20\x65\x72\x72\x6f\x72")})},function(a){a&&q.logger.error(a),s.count(function(a,b){b?(s.updatePeersList(function(a){a&&q.logger.error("\x50\x65\x65\x72\x73\x23\x75\x70\x64\x61\x74\x65\x50\x65\x65\x72\x73\x4c\x69\x73\x74\x20\x65\x72\x72\x6f\x72",a),q.bus.message("\x70\x65\x65\x72\x73\x52\x65\x61\x64\x79")}),q.logger.info("\x50\x65\x65\x72\x73\x20\x72\x65\x61\x64\x79\x2c\x20\x73\x74\x6f\x72\x65\x64\x20"+b)):(q.logger.warn("\x50\x65\x65\x72\x73\x20\x6c\x69\x73\x74\x20\x69\x73\x20\x65\x6d\x70\x74\x79"),q.bus.message("\x70\x65\x65\x72\x73\x52\x65\x61\x64\x79"))})})},v.prototype.onPeersReady=function(){setImmediate(function a(){s.updatePeersList(function(b){b&&q.logger.error("\x50\x65\x65\x72\x73\x20\x74\x69\x6d\x65\x72\x3a",b),setTimeout(a,6e4)})}),setImmediate(function b(){s.banManager(function(a){a&&q.logger.error("\x42\x61\x6e\x20\x6d\x61\x6e\x61\x67\x65\x72\x20\x74\x69\x6d\x65\x72\x3a",a),setTimeout(b,65e3)})})},t.getPeers=function(a,b){q.schema.validate(a.body,m.getPeers,function(c){return c?setImmediate(b,c[0].message):a.body.limit<0||a.body.limit>100?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6c\x69\x6d\x69\x74\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x31\x30\x30"):void s.getByFilter(a.body,function(a,c){return a?setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x70\x65\x65\x72\x73"):setImmediate(b,null,{peers:c})})})},t.getPeer=function(a,b){q.schema.validate(a.body,m.getPeer,function(c){return c?setImmediate(b,c[0].message):void s.getByFilter({ip:a.body.ip,port:a.body.port},function(a,c){return a?setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x70\x65\x65\x72"):c.length?setImmediate(b,null,{success:!0,peer:c[0]}):setImmediate(b,null,{success:!1,error:"\x50\x65\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})})})},t.version=function(a,b){return setImmediate(b,null,{version:q.config.version,build:q.build})},a.exports=v}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x72\x6f\x75\x6e\x64\x73\x2e\x6a\x73",function(a,b,c){"use strict";function o(a,b){k=b,l=this,setImmediate(a,null,l)}var j,k,l,d=c("\x61\x73\x79\x6e\x63"),e=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),f=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x72\x6f\x75\x6e\x64\x2e\x6a\x73"),g=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),h=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),i=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x72\x6f\x75\x6e\x64\x73\x2e\x6a\x73"),m={},n={};m.loaded=!1,m.ticking=!1,m.feesByRound={},m.rewardsByRound={},m.delegatesByRound={},m.unFeesByRound={},m.unRewardsByRound={},m.unDelegatesByRound={},o.prototype.loaded=function(){return m.loaded},o.prototype.ticking=function(){return m.ticking},o.prototype.calc=function(a){return Math.floor(a/h.delegates)+(a%h.delegates>0?1:0)},o.prototype.flush=function(a,b){k.db.none(i.flush,{round:a}).then(function(){return setImmediate(b)})["\x63\x61\x74\x63\x68"](function(a){return k.logger.error(a.stack),setImmediate(b,"\x52\x6f\x75\x6e\x64\x73\x23\x66\x6c\x75\x73\x68\x20\x65\x72\x72\x6f\x72")})},o.prototype.directionSwap=function(a,b,c){"\x62\x61\x63\x6b\x77\x61\x72\x64"===a?(m.feesByRound={},m.rewardsByRound={},m.delegatesByRound={},l.flush(l.calc(b.height),c)):(m.unFeesByRound={},m.unRewardsByRound={},m.unDelegatesByRound={},l.flush(l.calc(b.height),c))},o.prototype.backwardTick=function(a,b,c){function n(a){var b=new f(i,a);return b.mergeBlockGenerator().then(function(){return i.finishRound?b.land().then(function(){delete m.unFeesByRound[e],delete m.unRewardsByRound[e],delete m.unDelegatesByRound[e]}):void 0})}var i,e=l.calc(a.height),g=l.calc(b.height);m.unFeesByRound[e]=Math.floor(m.unFeesByRound[e])||0,m.unFeesByRound[e]+=Math.floor(a.totalFee),m.unRewardsByRound[e]=m.rewardsByRound[e]||[],m.unRewardsByRound[e].push(a.reward),m.unDelegatesByRound[e]=m.unDelegatesByRound[e]||[],m.unDelegatesByRound[e].push(a.generatorPublicKey),i={modules:j,__private:m,block:a,round:e,backwards:!0,delegates:m.unDelegatesByRound[e]},i.finishRound=g!==e&&m.unDelegatesByRound[e].length===h.delegates||1===b.height,d.series([function(a){return i.finishRound?m.getOutsiders(i,a):setImmediate(a)},function(a){k.db.tx(n).then(function(){return setImmediate(a)})["\x63\x61\x74\x63\x68"](function(b){return k.logger.error(b.stack),setImmediate(a,b)})}],function(a){return c(a)})},o.prototype.tick=function(a,b){function i(a){var b=new f(g,a);return b.mergeBlockGenerator().then(function(){return g.finishRound?b.land().then(function(){delete m.feesByRound[c],delete m.rewardsByRound[c],delete m.delegatesByRound[c],k.bus.message("\x66\x69\x6e\x69\x73\x68\x52\x6f\x75\x6e\x64",c),g.snapshotRound&&b.truncateBlocks().then(function(){g.finishSnapshot=!0})}):void 0})}var g,c=l.calc(a.height),e=l.calc(a.height+1);m.feesByRound[c]=Math.floor(m.feesByRound[c])||0,m.feesByRound[c]+=Math.floor(a.totalFee),m.rewardsByRound[c]=m.rewardsByRound[c]||[],m.rewardsByRound[c].push(a.reward),m.delegatesByRound[c]=m.delegatesByRound[c]||[],m.delegatesByRound[c].push(a.generatorPublicKey),g={modules:j,__private:m,block:a,round:c,backwards:!1,delegates:m.delegatesByRound[c]},g.snapshotRound=k.config.loading.snapshot>0&&k.config.loading.snapshot===c,g.finishRound=c!==e&&m.delegatesByRound[c].length===h.delegates||1===a.height||101===a.heighti,d.series([function(a){return g.finishRound?m.getOutsiders(g,a):setImmediate(a)},function(a){k.db.tx(i).then(function(){return setImmediate(a)})["\x63\x61\x74\x63\x68"](function(b){return k.logger.error(b.stack),setImmediate(a,b)})}],function(a){return b(g.finishSnapshot?"\x53\x6e\x61\x70\x73\x68\x6f\x74\x20\x66\x69\x6e\x69\x73\x68\x65\x64":a)})},o.prototype.sandboxApi=function(a,b,c){g.callMethod(n,a,b,c)},o.prototype.onBind=function(a){j=a},o.prototype.onBlockchainReady=function(){var a=l.calc(j.blocks.getLastBlock().height);k.db.query(i.summedRound,{round:a,activeDelegates:e.activeDelegates}).then(function(b){var c=[];b[0].rewards.forEach(function(a){c.push(Math.floor(a))}),m.feesByRound[a]=Math.floor(b[0].fees),m.rewardsByRound[a]=c,m.delegatesByRound[a]=b[0].delegates,m.loaded=!0})["\x63\x61\x74\x63\x68"](function(a){k.logger.error("\x52\x6f\x75\x6e\x64\x23\x6f\x6e\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x52\x65\x61\x64\x79\x20\x65\x72\x72\x6f\x72",a);
})},o.prototype.onFinishRound=function(a){k.network.io.sockets.emit("\x72\x6f\x75\x6e\x64\x73\x2f\x63\x68\x61\x6e\x67\x65",{number:a})},o.prototype.cleanup=function(a){return m.loaded=!1,setImmediate(a)},m.getOutsiders=function(a,b){return a.outsiders=[],1===a.block.height?setImmediate(b):void j.delegates.generateDelegateList(a.block.height,function(c,e){return c?setImmediate(b,c):void d.eachSeries(e,function(b,c){return-1===a.delegates.indexOf(b)&&a.outsiders.push(j.accounts.generateAddressByPublicKey(b)),setImmediate(c)},function(a){return setImmediate(b,a)})})},a.exports=o}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x73\x65\x72\x76\x65\x72\x2e\x6a\x73",function(a,b,c){"use strict";function m(a,b){i=b,j=this,k.attachApi(),setImmediate(a,null,j)}var h,i,j,f=(c("\x61\x73\x79\x6e\x63"),c("\x70\x61\x74\x68"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73")),g=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),k={},l={};k.loaded=!1,k.attachApi=function(){var a=new f;a.use(function(a,b,c){return h?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.get("\x2f",function(a,b){k.loaded?b.render("\x77\x61\x6c\x6c\x65\x74\x2e\x68\x74\x6d\x6c",{layout:!1}):b.render("\x6c\x6f\x61\x64\x69\x6e\x67\x2e\x68\x74\x6d\x6c")}),a.use(function(a,b,c){return-1===a.url.indexOf("\x2f\x61\x70\x69\x2f")&&-1===a.url.indexOf("\x2f\x70\x65\x65\x72\x2f")?b.redirect("\x2f"):void c()}),i.network.app.use("\x2f",a)},m.prototype.sandboxApi=function(a,b,c){g.callMethod(l,a,b,c)},m.prototype.onBind=function(a){h=a},m.prototype.onBlockchainReady=function(){k.loaded=!0},m.prototype.cleanup=function(a){return k.loaded=!1,setImmediate(a)},a.exports=m}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73",function(a,b,c){"use strict";function r(a,b){n=b,o=this,p.attachApi();var d=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x2e\x6a\x73");p.assetTypes[l.SIGNATURE]=n.logic.transaction.attachAssetType(l.SIGNATURE,new d),setImmediate(a,null,o)}var m,n,o,e=(c("\x61\x73\x79\x6e\x63"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73")),f=c("\x63\x72\x79\x70\x74\x6f"),h=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6d\x69\x6c\x65\x73\x74\x6f\x6e\x65\x42\x6c\x6f\x63\x6b\x73\x2e\x6a\x73"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73")),i=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),j=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73"),l=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x54\x79\x70\x65\x73\x2e\x6a\x73")),p={},q={};p.assetTypes={},p.attachApi=function(){var a=new h;a.use(function(a,b,c){return m?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.map(q,{"get /fee":"\x67\x65\x74\x46\x65\x65","put /":"\x61\x64\x64\x53\x69\x67\x6e\x61\x74\x75\x72\x65"}),a.use(function(a,b){b.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x6e\x64\x70\x6f\x69\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})}),n.network.app.use("\x2f\x61\x70\x69\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",a),n.network.app.use(function(a,b,c,d){return a?(n.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},r.prototype.sandboxApi=function(a,b,c){i.callMethod(q,a,b,c)},r.prototype.onBind=function(a){m=a,p.assetTypes[l.SIGNATURE].bind({modules:m,library:n})},q.getFee=function(a,b){var c=null;return c=e.fees.secondsignature,setImmediate(b,null,{fee:c})},q.addSignature=function(a,b){n.schema.validate(a.body,j.addSignature,function(c){var d,e;return c?setImmediate(b,c[0].message):(d=f.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest(),e=n.ed.makeKeypair(d),a.body.publicKey&&e.publicKey.toString("\x68\x65\x78")!==a.body.publicKey?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"):void n.balancesSequence.add(function(b){a.body.multisigAccountPublicKey&&a.body.multisigAccountPublicKey!==e.publicKey.toString("\x68\x65\x78")?m.accounts.getAccount({publicKey:a.body.multisigAccountPublicKey},function(c,d){return c?setImmediate(b,c):d&&d.publicKey?d.multisignatures&&d.multisignatures?d.multisignatures.indexOf(e.publicKey.toString("\x68\x65\x78"))<0?setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x62\x65\x6c\x6f\x6e\x67\x20\x74\x6f\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x67\x72\x6f\x75\x70"):d.secondSignature||d.u_secondSignature?setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x68\x61\x73\x20\x61\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"):void m.accounts.getAccount({publicKey:e.publicKey},function(c,g){var h,i,j;if(c)return setImmediate(b,c);if(!g||!g.publicKey)return setImmediate(b,"\x52\x65\x71\x75\x65\x73\x74\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(g.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");if(g.publicKey===d.publicKey)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79");h=f.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),i=n.ed.makeKeypair(h);try{j=n.logic.transaction.create({type:l.SIGNATURE,sender:d,keypair:e,requester:e,secondKeypair:i})}catch(k){return setImmediate(b,""+k)}m.transactions.receiveTransactions([j],b)}):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x65\x6e\x61\x62\x6c\x65\x64"):setImmediate(b,"\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):m.accounts.setAccountAndGet({publicKey:e.publicKey.toString("\x68\x65\x78")},function(c,d){var g,h,i;if(c)return setImmediate(b,c);if(!d||!d.publicKey)return setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(d.secondSignature||d.u_secondSignature)return setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x68\x61\x73\x20\x61\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");g=f.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),h=n.ed.makeKeypair(g);try{i=n.logic.transaction.create({type:l.SIGNATURE,sender:d,keypair:e,secondKeypair:h})}catch(j){return setImmediate(b,""+j)}m.transactions.receiveTransactions([i],b)})},function(a,c){return a?setImmediate(b,a):setImmediate(b,null,{transaction:c[0]})}))})},a.exports=r}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x73\x71\x6c\x2e\x6a\x73",function(a,b,c){"use strict";function m(a,b){i=b,j=this,setImmediate(a,null,j)}var g,h,i,j,k,l,d=c("\x61\x73\x79\x6e\x63"),e=c("\x65\x78\x74\x65\x6e\x64"),f=c("\x6a\x73\x6f\x6e\x2d\x73\x71\x6c")();f.setDialect("\x70\x6f\x73\x74\x67\x72\x65\x73\x71\x6c"),g=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),k={},l={},k.loaded=!1,k.DOUBLE_DOUBLE_QUOTES=/''/g,k.SINGLE_QUOTES=/'/g,k.SINGLE_QUOTES_DOUBLED="\x27\x27",k.escape=function(a){switch(typeof a){case"\x73\x74\x72\x69\x6e\x67":return"\x27"+a.replace(k.SINGLE_QUOTES,k.SINGLE_QUOTES_DOUBLED)+"\x27";case"\x6f\x62\x6a\x65\x63\x74":return null==a?"\x6e\x75\x6c\x6c":Buffer.isBuffer(a)?"\x58\x27"+a.toString("\x68\x65\x78")+"\x27":"\x27"+JSON.stringify(a).replace(k.SINGLE_QUOTES,k.SINGLE_QUOTES_DOUBLED)+"\x27";case"\x62\x6f\x6f\x6c\x65\x61\x6e":return a?"\x31":"\x30";case"\x6e\x75\x6d\x62\x65\x72":if(isFinite(a))return""+a}throw"\x55\x6e\x73\x75\x70\x70\x6f\x72\x74\x65\x64\x20\x64\x61\x74\x61\x20"+typeof a},k.pass=function(a,b){var c,d,e,f,g,h,i;for(c in a){if("\x6f\x62\x6a\x65\x63\x74"==typeof a[c]&&k.pass(a[c],b),"\x74\x61\x62\x6c\x65"===c&&(a[c]="\x64\x61\x70\x70\x5f"+b+"\x5f"+a[c]),"\x6a\x6f\x69\x6e"===c&&void 0===a[c].length)for(d in a[c])e=a[c][d],delete a[c][d],a[c]["\x64\x61\x70\x70\x5f"+b+"\x5f"+d]=e;if("\x6f\x6e"===c&&!a.alias)for(f in a[c])g=a[c][f],delete a[c][f],h=f.split("\x2e"),f="\x64\x61\x70\x70\x5f"+b+"\x5f"+h[0],i=g.split("\x2e"),g="\x64\x61\x70\x70\x5f"+b+"\x5f"+i[0],a[c][f]=g}},k.query=function(a,b,c){function h(a,b){return a&&(a=a),setImmediate(c,a,b)}var j,m,g=null;if("\x62\x61\x74\x63\x68"!==a){k.pass(b,b.dappid),j={type:a};try{g=f.build(e({},b,j))}catch(l){return h(l)}i.db.query(g.query,g.values).then(function(a){return h(null,a)})["\x63\x61\x74\x63\x68"](function(a){return i.logger.error(a.stack),h("\x53\x71\x6c\x23\x71\x75\x65\x72\x79\x20\x65\x72\x72\x6f\x72")})}else m=[],d.until(function(){return m=b.values.splice(0,10),0===m.length},function(a){var d,c=Object.keys(b.fields).map(function(a){return k.escape(b.fields[a])});g="\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x64\x61\x70\x70\x5f"+b.dappid+"\x5f"+b.table+"\x20\x28"+c.join("\x2c")+"\x29\x20",d=[],m.forEach(function(a,b){var f,c=m[b],e=[];for(f=0;f<c.length;f++)e.push(k.escape(c[f]));d.push("\x53\x45\x4c\x45\x43\x54\x20"+e.join("\x2c"))}),g=g+"\x20"+d.join("\x20\x55\x4e\x49\x4f\x4e\x20"),i.db.none(g).then(function(){return setImmediate(a)})["\x63\x61\x74\x63\x68"](function(b){return i.logger.error(b.stack),setImmediate(a,"\x53\x71\x6c\x23\x71\x75\x65\x72\x79\x20\x65\x72\x72\x6f\x72")})},h)},m.prototype.createTables=function(a,b,c){var e,g,h,k;if(!b)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x61\x62\x6c\x65\x20\x66\x6f\x72\x6d\x61\x74");for(e=[],g=0;g<b.length;g++){if(b[g].table="\x64\x61\x70\x70\x5f"+a+"\x5f"+b[g].table,"\x74\x61\x62\x6c\x65"===b[g].type){if(b[g].type="\x63\x72\x65\x61\x74\x65",b[g].foreignKeys)for(h=0;h<b[g].foreignKeys.length;h++)b[g].foreignKeys[h].table="\x64\x61\x70\x70\x5f"+a+"\x5f"+b[g].foreignKeys[h].table}else{if("\x69\x6e\x64\x65\x78"!==b[g].type)return setImmediate(c,"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x61\x62\x6c\x65\x20\x74\x79\x70\x65\x3a\x20"+b[g].type);b[g].type="\x69\x6e\x64\x65\x78"}k=f.build(b[g]),e.push(k.query)}d.eachSeries(e,function(a,b){i.db.none(a).then(function(){return setImmediate(b)})["\x63\x61\x74\x63\x68"](function(a){return setImmediate(b,a)})},function(a){return a?setImmediate(c,"\x53\x71\x6c\x23\x63\x72\x65\x61\x74\x65\x54\x61\x62\x6c\x65\x73\x20\x65\x72\x72\x6f\x72",j):setImmediate(c)})},m.prototype.dropTables=function(a,b,c){var f,e=[];for(f=0;f<b.length;f++)e.push({name:b[f].table.replace(/[^\w_]/gi,""),type:b[f].type});d.eachSeries(e,function(a,b){if("\x63\x72\x65\x61\x74\x65"===a.type)i.db.none("\x44\x52\x4f\x50\x20\x54\x41\x42\x4c\x45\x20\x49\x46\x20\x45\x58\x49\x53\x54\x53\x20"+a.name+"\x20\x43\x41\x53\x43\x41\x44\x45").then(function(){return setImmediate(b,null)})["\x63\x61\x74\x63\x68"](function(a){return i.logger.error(a.stack),setImmediate(b,"\x53\x71\x6c\x23\x64\x72\x6f\x70\x54\x61\x62\x6c\x65\x73\x20\x65\x72\x72\x6f\x72")});else{if("\x69\x6e\x64\x65\x78"!==a.type)return setImmediate(b);i.db.none("\x44\x52\x4f\x50\x20\x49\x4e\x44\x45\x58\x20\x49\x46\x20\x45\x58\x49\x53\x54\x53\x20"+a.name).then(function(){return setImmediate(b,null)})["\x63\x61\x74\x63\x68"](function(a){return i.logger.error(a.stack),setImmediate(b,"\x53\x71\x6c\x23\x64\x72\x6f\x70\x54\x61\x62\x6c\x65\x73\x20\x65\x72\x72\x6f\x72")})}},c)},m.prototype.sandboxApi=function(a,b,c){g.callMethod(l,a,b,c)},m.prototype.onBind=function(a){h=a},m.prototype.onBlockchainReady=function(){k.loaded=!0},l.select=function(a,b){var c=e({},a.body,{dappid:a.dappid});k.query.call(this,"\x73\x65\x6c\x65\x63\x74",c,b)},l.batch=function(a,b){var c=e({},a.body,{dappid:a.dappid});k.query.call(this,"\x62\x61\x74\x63\x68",c,b)},l.insert=function(a,b){var c=e({},a.body,{dappid:a.dappid});k.query.call(this,"\x69\x6e\x73\x65\x72\x74",c,b)},l.update=function(a,b){var c=e({},a.body,{dappid:a.dappid});k.query.call(this,"\x75\x70\x64\x61\x74\x65",c,b)},l.remove=function(a,b){var c=e({},a.body,{dappid:a.dappid});k.query.call(this,"\x72\x65\x6d\x6f\x76\x65",c,b)},a.exports=m}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x73\x79\x73\x74\x65\x6d\x2e\x6a\x73",function(a,b,c){"use strict";function k(a,b){g=b,h=this,i.version=g.config.version,i.port=g.config.port,i.nethash=g.config.nethash,i.osName=d.platform()+d.release(),setImmediate(a,null,h)}var f,g,h,d=c("\x6f\x73"),e=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),i={},j={};k.prototype.getOS=function(){return i.osName},k.prototype.getVersion=function(){return i.version},k.prototype.getPort=function(){return i.port},k.prototype.getNethash=function(){return i.nethash},k.prototype.sandboxApi=function(a,b,c){e.callMethod(j,a,b,c)},k.prototype.onBind=function(a){f=a},a.exports=k}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x6a\x73",function(a,b,c){"use strict";function v(a,b){r=b,i=r.genesisblock,s=this,t.attachApi();var d=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x74\x72\x61\x6e\x73\x66\x65\x72\x2e\x6a\x73");t.assetTypes[p.SEND]=r.logic.transaction.attachAssetType(p.SEND,new d),setImmediate(a,null,s)}var q,r,s,d=c("\x61\x73\x79\x6e\x63"),f=(c("\x62\x79\x74\x65\x62\x75\x66\x66\x65\x72"),c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73")),g=c("\x63\x72\x79\x70\x74\x6f"),i=(c("\x65\x78\x74\x65\x6e\x64"),null),j=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x6f\x72\x64\x65\x72\x42\x79\x2e\x6a\x73"),k=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73"),l=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),m=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x6a\x73"),o=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x6a\x73")),p=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x54\x79\x70\x65\x73\x2e\x6a\x73"),t={},u={};t.assetTypes={},t.hiddenTransactions=[],t.unconfirmedTransactions=[],t.unconfirmedTransactionsIdIndex={},t.doubleSpendingTransactions={},t.attachApi=function(){var a=new k;a.use(function(a,b,c){return q?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.map(u,{"get /":"\x67\x65\x74\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73","get /get":"\x67\x65\x74\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e","get /unconfirmed/get":"\x67\x65\x74\x55\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e","get /unconfirmed":"\x67\x65\x74\x55\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73","put /":"\x61\x64\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73"}),a.use(function(a,b){b.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x6e\x64\x70\x6f\x69\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})}),r.network.app.use("\x2f\x61\x70\x69\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",a),r.network.app.use(function(a,b,c,d){return a?(r.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},t.list=function(a,b){var g,d=(o.sortFields,{}),e=[],f="";return a.blockId&&(e.push("\x22\x74\x5f\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x3d\x20\x24\x7b\x62\x6c\x6f\x63\x6b\x49\x64\x7d"),d.blockId=a.blockId),a.senderPublicKey&&(e.push("\x22\x74\x5f\x73\x65\x6e\x64\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x3a\x3a\x62\x79\x74\x65\x61\x20\x3d\x20\x24\x7b\x73\x65\x6e\x64\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x7d"),d.senderPublicKey=a.senderPublicKey),a.senderId&&(e.push("\x22\x74\x5f\x73\x65\x6e\x64\x65\x72\x49\x64\x22\x20\x3d\x20\x24\x7b\x73\x65\x6e\x64\x65\x72\x49\x64\x7d"),d.senderId=a.senderId),a.recipientId&&(e.push("\x22\x74\x5f\x72\x65\x63\x69\x70\x69\x65\x6e\x74\x49\x64\x22\x20\x3d\x20\x24\x7b\x72\x65\x63\x69\x70\x69\x65\x6e\x74\x49\x64\x7d"),d.recipientId=a.recipientId),a.ownerAddress&&a.ownerPublicKey&&(f="\x28\x22\x74\x5f\x73\x65\x6e\x64\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x3a\x3a\x62\x79\x74\x65\x61\x20\x3d\x20\x24\x7b\x6f\x77\x6e\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x7d\x20\x4f\x52\x20\x22\x74\x5f\x72\x65\x63\x69\x70\x69\x65\x6e\x74\x49\x64\x22\x20\x3d\x20\x24\x7b\x6f\x77\x6e\x65\x72\x41\x64\x64\x72\x65\x73\x73\x7d\x29",d.ownerPublicKey=a.ownerPublicKey,d.ownerAddress=a.ownerAddress),a.type>=0&&(e.push("\x22\x74\x5f\x74\x79\x70\x65\x22\x20\x3d\x20\x24\x7b\x74\x79\x70\x65\x7d"),d.type=a.type),a.limit?d.limit=Math.abs(a.limit):d.limit=100,a.offset?d.offset=Math.abs(a.offset):d.offset=0,d.limit>100?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6c\x69\x6d\x69\x74\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x31\x30\x30"):(g=j(a.orderBy,{sortFields:o.sortFields,fieldPrefix:function(a){return["\x68\x65\x69\x67\x68\x74","\x62\x6c\x6f\x63\x6b\x49\x64","\x63\x6f\x6e\x66\x69\x72\x6d\x61\x74\x69\x6f\x6e\x73"].indexOf(a)>-1?"\x62\x5f"+a:"\x74\x5f"+a}}),g.error?setImmediate(b,g.error):void r.db.query(o.countList({where:e,owner:f}),d).then(function(a){var c=a.length?a[0].count:0;r.db.query(o.list({where:e,owner:f,sortField:g.sortField,sortMethod:g.sortMethod}),d).then(function(a){var e,f,d=[];for(e=0;e<a.length;e++)d.push(r.logic.transaction.dbRead(a[e]));return f={transactions:d,count:c},setImmediate(b,null,f)})["\x63\x61\x74\x63\x68"](function(a){return r.logger.error(a.stack),setImmediate(b,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x23\x6c\x69\x73\x74\x20\x65\x72\x72\x6f\x72")})})["\x63\x61\x74\x63\x68"](function(a){return r.logger.error(a.stack),setImmediate(b,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x23\x6c\x69\x73\x74\x20\x65\x72\x72\x6f\x72")}))},t.getById=function(a,b){r.db.query(o.getById,{id:a}).then(function(c){if(!c.length)return setImmediate(b,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64\x3a\x20"+a);var d=r.logic.transaction.dbRead(c[0]);return setImmediate(b,null,d)})["\x63\x61\x74\x63\x68"](function(a){return r.logger.error(a.stack),setImmediate(b,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x23\x67\x65\x74\x42\x79\x49\x64\x20\x65\x72\x72\x6f\x72")})},t.addUnconfirmedTransaction=function(a,b,c){s.applyUnconfirmed(a,b,function(b){if(b)return s.addDoubleSpending(a),setImmediate(c,b);a.receivedAt=new Date,t.unconfirmedTransactions.push(a);var d=t.unconfirmedTransactions.length-1;return t.unconfirmedTransactionsIdIndex[a.id]=d,setImmediate(c)})},v.prototype.getUnconfirmedTransaction=function(a){var b=t.unconfirmedTransactionsIdIndex[a];return t.unconfirmedTransactions[b]},v.prototype.addDoubleSpending=function(a){t.doubleSpendingTransactions[a.id]=a},v.prototype.getUnconfirmedTransactionList=function(a,b){var d,c=[];for(d=0;d<t.unconfirmedTransactions.length;d++)t.unconfirmedTransactions[d]!==!1&&c.push(t.unconfirmedTransactions[d]);return c=a?c.reverse():c,b&&c.splice(b),c},v.prototype.removeUnconfirmedTransaction=function(a){var b=t.unconfirmedTransactionsIdIndex[a];delete t.unconfirmedTransactionsIdIndex[a],t.unconfirmedTransactions[b]=!1},v.prototype.processUnconfirmedTransaction=function(a,b,c){return a?void 0!==t.unconfirmedTransactionsIdIndex[a.id]||t.doubleSpendingTransactions[a.id]?(r.logger.debug("\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x69\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x70\x72\x6f\x63\x65\x73\x73\x65\x64\x3a\x20"+a.id),setImmediate(c)):void q.accounts.setAccountAndGet({publicKey:a.senderPublicKey},function(d,e){function f(d,f){return d?f?(r.logger.debug(d),setImmediate(c)):setImmediate(c,d):void t.addUnconfirmedTransaction(a,e,function(d){return d?setImmediate(c,d):(r.bus.message("\x75\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",a,b),setImmediate(c))})}return d?f(d):void(a.requesterPublicKey&&e&&Array.isArray(e.multisignatures)&&e.multisignatures.length?q.accounts.getAccount({publicKey:a.requesterPublicKey},function(b,c){return b?f(b):c?void r.logic.transaction.process(a,e,c,function(a,b,c){return a?f(a,c):void r.logic.transaction.verify(b,e,f)}):f("\x52\x65\x71\x75\x65\x73\x74\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):r.logic.transaction.process(a,e,function(a,b,c){return a?f(a,c):void r.logic.transaction.verify(b,e,f)}))}):setImmediate(c,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e")},v.prototype.applyUnconfirmedList=function(a,b){d.eachSeries(a,function(a,b){var c=s.getUnconfirmedTransaction(a);q.accounts.setAccountAndGet({publicKey:c.senderPublicKey},function(d,e){return d?(s.removeUnconfirmedTransaction(a),s.addDoubleSpending(c),setImmediate(b)):void s.applyUnconfirmed(c,e,function(d){return d&&(s.removeUnconfirmedTransaction(a),s.addDoubleSpending(c)),setImmediate(b)})})},b)},v.prototype.undoUnconfirmedList=function(a){var b=[];d.eachSeries(t.unconfirmedTransactions,function(a,c){return a===!1?setImmediate(c):(b.push(a.id),void s.undoUnconfirmed(a,c))},function(c){return setImmediate(a,c,b)})},v.prototype.expireUnconfirmedList=function(a){var b=+f.unconfirmedTransactionTimeOut,c=[];d.eachSeries(t.unconfirmedTransactions,function(a,d){var e,f,g;return a===!1?setImmediate(d):(e=new Date,f=4===a.type?3600*a.asset.multisignature.lifetime:b,g=Math.floor((e.getTime()-a.receivedAt.getTime())/1e3),g>f?void s.undoUnconfirmed(a,function(b){return b?setImmediate(d,b):(c.push(a.id),s.removeUnconfirmedTransaction(a.id),r.logger.info("\x45\x78\x70\x69\x72\x65\x64\x20\x75\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x3a\x20"+a.id+"\x20\x72\x65\x63\x65\x69\x76\x65\x64\x20\x61\x74\x3a\x20"+a.receivedAt.toUTCString()),setImmediate(d))}):setImmediate(d))},function(b){return setImmediate(a,b,c)})},v.prototype.apply=function(a,b,c,d){r.logic.transaction.apply(a,b,c,d)},v.prototype.undo=function(a,b,c,d){r.logic.transaction.undo(a,b,c,d)},v.prototype.applyUnconfirmed=function(a,b,c){return b||a.blockId===i.block.id?void(a.requesterPublicKey?q.accounts.getAccount({publicKey:a.requesterPublicKey},function(d,e){return d?setImmediate(c,d):e?void r.logic.transaction.applyUnconfirmed(a,b,e,c):setImmediate(c,"\x52\x65\x71\x75\x65\x73\x74\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):r.logic.transaction.applyUnconfirmed(a,b,c)):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x62\x6c\x6f\x63\x6b\x20\x69\x64")},v.prototype.undoUnconfirmed=function(a,b){q.accounts.getAccount({publicKey:a.senderPublicKey},function(c,d){return c?setImmediate(b,c):void r.logic.transaction.undoUnconfirmed(a,d,b)})},v.prototype.receiveTransactions=function(a,b){d.eachSeries(a,function(a,b){s.processUnconfirmedTransaction(a,!0,b)},function(c){return setImmediate(b,c,a)})},v.prototype.sandboxApi=function(a,b,c){l.callMethod(u,a,b,c)},v.prototype.onBind=function(a){q=a,t.assetTypes[p.SEND].bind({modules:q,library:r})},v.prototype.onPeersReady=function(){setImmediate(function a(){s.expireUnconfirmedList(function(b){b&&r.logger.error("\x55\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x20\x74\x69\x6d\x65\x72\x3a",b),setTimeout(a,14e3)})})},u.getTransactions=function(a,b){r.schema.validate(a.body,m.getTransactions,function(c){return c?setImmediate(b,c[0].message):void t.list(a.body,function(a,c){return a?setImmediate(b,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x3a\x20"+a):setImmediate(b,null,{transactions:c.transactions,count:c.count})})})},u.getTransaction=function(a,b){r.schema.validate(a.body,m.getTransaction,function(c){return c?setImmediate(b,c[0].message):void t.getById(a.body.id,function(a,c){return!c||a?setImmediate(b,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"):setImmediate(b,null,{transaction:c})})})},u.getUnconfirmedTransaction=function(a,b){r.schema.validate(a.body,m.getUnconfirmedTransaction,function(c){if(c)return setImmediate(b,c[0].message);var d=s.getUnconfirmedTransaction(a.body.id);return d?setImmediate(b,null,{transaction:d}):setImmediate(b,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")})},u.getUnconfirmedTransactions=function(a,b){r.schema.validate(a.body,m.getUnconfirmedTransactions,function(c){var d,e,f;if(c)return setImmediate(b,c[0].message);if(d=s.getUnconfirmedTransactionList(!0),f=[],a.body.senderPublicKey||a.body.address)for(e=0;e<d.length;e++)(d[e].senderPublicKey===a.body.senderPublicKey||d[e].recipientId===a.body.address)&&f.push(d[e]);else for(e=0;e<d.length;e++)f.push(d[e]);return setImmediate(b,null,{transactions:f})})},u.addTransactions=function(a,b){r.schema.validate(a.body,m.addTransactions,function(c){var d,e,f;return c?setImmediate(b,c[0].message):(d=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secret,"\x75\x74\x66\x38").digest(),e=r.ed.makeKeypair(d),a.body.publicKey&&e.publicKey.toString("\x68\x65\x78")!==a.body.publicKey?setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65"):(f={address:a.body.recipientId},void r.balancesSequence.add(function(b){q.accounts.getAccount(f,function(c,d){if(c)return setImmediate(b,c);var f=d?d.address:a.body.recipientId;return f?void(a.body.multisigAccountPublicKey&&a.body.multisigAccountPublicKey!==e.publicKey.toString("\x68\x65\x78")?q.accounts.getAccount({publicKey:a.body.multisigAccountPublicKey},function(c,d){return c?setImmediate(b,c):d&&d.publicKey?d.multisignatures&&d.multisignatures?d.multisignatures.indexOf(e.publicKey.toString("\x68\x65\x78"))<0?setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x62\x65\x6c\x6f\x6e\x67\x20\x74\x6f\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x67\x72\x6f\x75\x70"):void q.accounts.getAccount({publicKey:e.publicKey},function(c,h){var i,j,k;if(c)return setImmediate(b,c);if(!h||!h.publicKey)return setImmediate(b,"\x52\x65\x71\x75\x65\x73\x74\x65\x72\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(h.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");if(h.publicKey===d.publicKey)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79");i=null,h.secondSignature&&(j=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),i=r.ed.makeKeypair(j));try{k=r.logic.transaction.create({type:p.SEND,amount:a.body.amount,sender:d,recipientId:f,keypair:e,requester:e,secondKeypair:i})}catch(l){return setImmediate(b,""+l)}q.transactions.receiveTransactions([k],b)}):setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x65\x6e\x61\x62\x6c\x65\x64"):setImmediate(b,"\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64")}):q.accounts.setAccountAndGet({publicKey:e.publicKey.toString("\x68\x65\x78")},function(c,d){var h,i,j;if(c)return setImmediate(b,c);if(!d||!d.publicKey)return setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(d.secondSignature&&!a.body.secondSecret)return setImmediate(b,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x73\x65\x63\x6f\x6e\x64\x20\x70\x61\x73\x73\x70\x68\x72\x61\x73\x65");h=null,d.secondSignature&&(i=g.createHash("\x73\x68\x61\x32\x35\x36").update(a.body.secondSecret,"\x75\x74\x66\x38").digest(),h=r.ed.makeKeypair(i));try{j=r.logic.transaction.create({type:p.SEND,amount:a.body.amount,sender:d,recipientId:f,keypair:e,secondKeypair:h})}catch(k){return setImmediate(b,""+k)}q.transactions.receiveTransactions([j],b)})):setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x63\x69\x70\x69\x65\x6e\x74")})},function(a,c){return a?setImmediate(b,a):setImmediate(b,null,{transactionId:c[0].id})})))})},a.exports=v}),c.register("\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x6a\x73",function(a,b,c){"use strict";function u(a,b){q=b,r=this,s.attachApi(),setImmediate(a,null,r)}var p,q,r,d=c("\x6c\x6f\x64\x61\x73\x68"),e=c("\x61\x73\x79\x6e\x63"),f=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x62\x69\x67\x6e\x75\x6d\x2e\x6a\x73"),g=c("\x63\x72\x79\x70\x74\x6f"),h=c("\x65\x78\x74\x65\x6e\x64"),j=(c("\x69\x70"),c("\x70\x6f\x70\x73\x69\x63\x6c\x65")),k=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x6f\x75\x74\x65\x72\x2e\x6a\x73"),l=c("\x2e\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x6a\x73"),m=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x61\x6e\x64\x62\x6f\x78\x2e\x6a\x73"),n=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x6a\x73"),s=(c("\x7a\x6c\x69\x62"),{}),t={};s.headers={},s.loaded=!1,s.messages={},s.attachApi=function(){var a=new k;a.use(function(a,b,c){return p&&s.loaded?c():void b.status(500).send({success:!1,error:"\x42\x6c\x6f\x63\x6b\x63\x68\x61\x69\x6e\x20\x69\x73\x20\x6c\x6f\x61\x64\x69\x6e\x67"})}),a.use(function(a,b,c){try{a.peer=p.peers.inspect({ip:a.headers["\x78\x2d\x66\x6f\x72\x77\x61\x72\x64\x65\x64\x2d\x66\x6f\x72"]||a.connection.remoteAddress,port:a.headers.port})}catch(d){return s.removePeer({peer:a.peer,code:"\x45\x48\x45\x41\x44\x45\x52\x53",req:a}),q.logger.debug(""+d),b.status(406).send({success:!1,error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x71\x75\x65\x73\x74\x20\x68\x65\x61\x64\x65\x72\x73"})}var e=a.headers;e.port=parseInt(a.headers.port),a.sanitize(e,l.headers,function(d,f){return d?c(d):f.isValid?e.nethash!==q.config.nethash?(s.removePeer({peer:a.peer,code:"\x45\x4e\x45\x54\x48\x41\x53\x48",req:a}),b.status(200).send({success:!1,message:"\x52\x65\x71\x75\x65\x73\x74\x20\x69\x73\x20\x6d\x61\x64\x65\x20\x6f\x6e\x20\x74\x68\x65\x20\x77\x72\x6f\x6e\x67\x20\x6e\x65\x74\x77\x6f\x72\x6b",expected:q.config.nethash,received:e.nethash})):(a.peer.state=2,a.peer.os=e.os,a.peer.version=e.version,a.body&&a.body.dappid&&(a.peer.dappid=a.body.dappid),a.peer.version===q.config.version&&e.nethash===q.config.nethash&&(p.blocks.lastReceipt()||p.delegates.enableForging(),p.peers.update(a.peer)),c()):(s.removePeer({peer:a.peer,code:"\x45\x48\x45\x41\x44\x45\x52\x53",req:a}),b.status(500).send({status:!1,error:f.issues}))})}),a.get("\x2f\x6c\x69\x73\x74",function(a,b){b.set(s.headers),p.peers.list({limit:100},function(a,c){return b.status(200).json({peers:a?[]:c})})}),a.get("\x2f\x62\x6c\x6f\x63\x6b\x73\x2f\x63\x6f\x6d\x6d\x6f\x6e",function(a,b,c){b.set(s.headers),a.sanitize(a.query,l.commonBlock,function(d,e,f){if(d)return c(d);if(!e.isValid)return b.json({success:!1,error:e.issues});var g=f.ids.replace(/['"]+/g,"").split("\x2c").filter(function(a){return/^[0-9]+$/.test(a)});return g.length?void q.db.query(n.getCommonBlock,g).then(function(a){return b.json({success:!0,common:a[0]||null})})["\x63\x61\x74\x63\x68"](function(a){return q.logger.error(a.stack),b.json({success:!1,error:"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x63\x6f\x6d\x6d\x6f\x6e\x20\x62\x6c\x6f\x63\x6b"})}):(q.logger.warn("\x49\x6e\x76\x61\x6c\x69\x64\x20\x63\x6f\x6d\x6d\x6f\x6e\x20\x62\x6c\x6f\x63\x6b\x20\x72\x65\x71\x75\x65\x73\x74\x2c\x20\x62\x61\x6e\x20\x36\x30\x20\x6d\x69\x6e",a.peer.string),
b.json({success:!1,error:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x62\x6c\x6f\x63\x6b\x20\x69\x64\x20\x73\x65\x71\x75\x65\x6e\x63\x65"}))})}),a.get("\x2f\x62\x6c\x6f\x63\x6b\x73",function(a,b,c){b.set(s.headers),a.sanitize(a.query,l.blocks,function(a,d,e){return a?c(a):d.isValid?void p.blocks.loadBlocksData({limit:1440,lastId:e.lastBlockId},function(a,c){return b.status(200),a?b.json({blocks:[]}):void b.json({blocks:c})}):b.json({success:!1,error:d.issues})})}),a.post("\x2f\x62\x6c\x6f\x63\x6b\x73",function(a,b){var c,d;b.set(s.headers),c=a.body.block,d=c?c.id:"\x6e\x75\x6c\x6c";try{c=q.logic.block.objectNormalize(c)}catch(e){return q.logger.error(["\x42\x6c\x6f\x63\x6b",d].join("\x20"),""+e),c&&q.logger.error("\x42\x6c\x6f\x63\x6b",c),a.peer&&s.banPeer({peer:a.peer,code:"\x45\x42\x4c\x4f\x43\x4b",req:a,clock:3600}),b.status(200).json({success:!1,error:""+e})}return q.bus.message("\x72\x65\x63\x65\x69\x76\x65\x42\x6c\x6f\x63\x6b",c),b.status(200).json({success:!0,blockId:c.id})}),a.post("\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",function(a,b){b.set(s.headers),q.schema.validate(a.body,l.signatures,function(c){return c?b.status(200).json({success:!1,error:"\x53\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x76\x61\x6c\x69\x64\x61\x74\x69\x6f\x6e\x20\x66\x61\x69\x6c\x65\x64"}):void p.multisignatures.processSignature(a.body.signature,function(a){return a?b.status(200).json({success:!1,error:"\x45\x72\x72\x6f\x72\x20\x70\x72\x6f\x63\x65\x73\x73\x69\x6e\x67\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65"}):b.status(200).json({success:!0})})})}),a.get("\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",function(a,b){var c,d;b.set(s.headers),c=p.transactions.getUnconfirmedTransactionList(),d=[],e.eachSeries(c,function(a,b){return a.signatures&&a.signatures.length&&d.push({transaction:a.id,signatures:a.signatures}),setImmediate(b)},function(){return b.status(200).json({success:!0,signatures:d})})}),a.get("\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",function(a,b){b.set(s.headers),b.status(200).json({success:!0,transactions:p.transactions.getUnconfirmedTransactionList()})}),a.post("\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",function(a,b){var c,d;b.set(s.headers),c=a.body.transaction,d=c?c.id:"\x6e\x75\x6c\x6c";try{c=q.logic.transaction.objectNormalize(c)}catch(e){return q.logger.error(["\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",d].join("\x20"),""+e),c&&q.logger.error("\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",c),a.peer&&s.banPeer({peer:a.peer,code:"\x45\x54\x52\x41\x4e\x53\x41\x43\x54\x49\x4f\x4e",req:a,clock:3600}),b.status(200).json({success:!1,message:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x62\x6f\x64\x79"})}q.balancesSequence.add(function(b){q.logger.debug("\x52\x65\x63\x65\x69\x76\x65\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20"+c.id+"\x20\x66\x72\x6f\x6d\x20\x70\x65\x65\x72\x20"+a.peer.string),p.transactions.receiveTransactions([c],b)},function(a){a?(q.logger.error(["\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",d].join("\x20"),""+a),c&&q.logger.error("\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",c),b.status(200).json({success:!1,message:""+a})):b.status(200).json({success:!0,transactionId:c.id})})}),a.get("\x2f\x68\x65\x69\x67\x68\x74",function(a,b){b.set(s.headers),b.status(200).json({success:!0,height:p.blocks.getLastBlock().height})}),a.post("\x2f\x64\x61\x70\x70\x2f\x6d\x65\x73\x73\x61\x67\x65",function(a,b){b.set(s.headers);try{if(!a.body.dappid)return b.status(200).json({success:!1,message:"\x4d\x69\x73\x73\x69\x6e\x67\x20\x64\x61\x70\x70\x69\x64"});if(!a.body.timestamp||!a.body.hash)return b.status(200).json({success:!1,message:"\x4d\x69\x73\x73\x69\x6e\x67\x20\x68\x61\x73\x68\x20\x73\x75\x6d"});var c=s.hashsum(a.body.body,a.body.timestamp);if(c!==a.body.hash)return b.status(200).json({success:!1,message:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x68\x61\x73\x68\x20\x73\x75\x6d"})}catch(d){return q.logger.error(d.stack),b.status(200).json({success:!1,message:""+d})}return s.messages[a.body.hash]?b.status(200):(s.messages[a.body.hash]=!0,void p.dapps.message(a.body.dappid,a.body.body,function(c,d){return!c&&d.error&&(c=d.error),c?b.status(200).json({success:!1,message:""+c}):(q.bus.message("\x6d\x65\x73\x73\x61\x67\x65",a.body,!0),void b.status(200).json(h({},d,{success:!0})))}))}),a.post("\x2f\x64\x61\x70\x70\x2f\x72\x65\x71\x75\x65\x73\x74",function(a,b){b.set(s.headers);try{if(!a.body.dappid)return b.status(200).json({success:!1,message:"\x4d\x69\x73\x73\x69\x6e\x67\x20\x64\x61\x70\x70\x69\x64"});if(!a.body.timestamp||!a.body.hash)return b.status(200).json({success:!1,message:"\x4d\x69\x73\x73\x69\x6e\x67\x20\x68\x61\x73\x68\x20\x73\x75\x6d"});var c=s.hashsum(a.body.body,a.body.timestamp);if(c!==a.body.hash)return b.status(200).json({success:!1,message:"\x49\x6e\x76\x61\x6c\x69\x64\x20\x68\x61\x73\x68\x20\x73\x75\x6d"})}catch(d){return q.logger.error(d.stack),b.status(200).json({success:!1,message:""+d})}p.dapps.request(a.body.dappid,a.body.body.method,a.body.body.path,a.body.body.query,function(a,c){return!a&&c.error&&(a=c.error),a?b.status(200).json({success:!1,message:a}):void b.status(200).json(h({},c,{success:!0}))})}),a.use(function(a,b){b.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x6e\x64\x70\x6f\x69\x6e\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64"})}),q.network.app.use("\x2f\x70\x65\x65\x72",a),q.network.app.use(function(a,b,c,d){return a?(q.logger.error("\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x20"+b.url,a),void c.status(500).send({success:!1,error:"\x41\x50\x49\x20\x65\x72\x72\x6f\x72\x3a\x20"+a.message})):d()})},s.hashsum=function(a){var e,b=new Buffer(JSON.stringify(a),"\x75\x74\x66\x38"),c=g.createHash("\x73\x68\x61\x32\x35\x36").update(b).digest(),d=new Buffer(8);for(e=0;8>e;e++)d[e]=c[7-e];return""+f.fromBuffer(d)},s.banPeer=function(a){p.peers.state(a.peer.ip,a.peer.port,0,a.clock,function(){q.logger.warn([a.code,["\x42\x61\x6e",a.peer.string,a.clock/60,"\x6d\x69\x6e\x75\x74\x65\x73"].join("\x20"),a.req.method,a.req.url].join("\x20"))})},s.removePeer=function(a){p.peers.remove(a.peer.ip,a.peer.port,function(){q.logger.warn([a.code,"\x52\x65\x6d\x6f\x76\x69\x6e\x67\x20\x70\x65\x65\x72",a.peer.string,a.req.method,a.req.url].join("\x20"))})},u.prototype.broadcast=function(a,b,c){a.limit=a.limit||1,p.peers.list(a,function(a,d){if(a){if(c)return setImmediate(c,a)}else e.eachLimit(d,3,function(a,c){return r.getFromPeer(a,b,c)},function(){return c?setImmediate(c,null,{body:null,peer:d}):void 0})})},u.prototype.getFromRandomPeer=function(a,b,c){"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b&&(c=b,b=a,a={}),a.limit=1,e.retry(20,function(c){p.peers.list(a,function(a,d){return!a&&d.length?r.getFromPeer(d[0],b,c):setImmediate(c,a||"\x4e\x6f\x20\x72\x65\x61\x63\x68\x61\x62\x6c\x65\x20\x70\x65\x65\x72\x73\x20\x69\x6e\x20\x64\x62")})},function(a,b){return setImmediate(c,a,b)})},u.prototype.getFromPeer=function(a,b,c){var e,f,g;e=b.api?"\x2f\x70\x65\x65\x72"+b.api:b.url,a=p.peers.inspect(a),f={url:"\x68\x74\x74\x70\x3a\x2f\x2f"+a.ip+"\x3a"+a.port+e,method:b.method,headers:d.extend({},s.headers,b.headers),timeout:q.config.peers.options.timeout},b.data&&(f.body=b.data),g=j.request(f),g.use(j.plugins.parse(["\x6a\x73\x6f\x6e"],!1)),g.then(function(b){var d,e;return 200!==b.status?(s.removePeer({peer:a,code:"\x45\x52\x45\x53\x50\x4f\x4e\x53\x45\x20"+b.status,req:f}),setImmediate(c,["\x52\x65\x63\x65\x69\x76\x65\x64\x20\x62\x61\x64\x20\x72\x65\x73\x70\x6f\x6e\x73\x65\x20\x63\x6f\x64\x65",b.status,f.method,f.url].join("\x20"))):(d=b.headers,d.port=parseInt(d.port),(e=q.schema.validate(d,l.headers))?d.nethash!==q.config.nethash?(s.removePeer({peer:a,code:"\x45\x4e\x45\x54\x48\x41\x53\x48",req:f}),setImmediate(c,["\x50\x65\x65\x72\x20\x69\x73\x20\x6e\x6f\x74\x20\x6f\x6e\x20\x74\x68\x65\x20\x73\x61\x6d\x65\x20\x6e\x65\x74\x77\x6f\x72\x6b",d.nethash,f.method,f.url].join("\x20"))):(d.version===q.config.version&&p.peers.update({ip:a.ip,port:d.port,state:2,os:d.os,version:d.version}),setImmediate(c,null,{body:b.body,peer:a})):(s.removePeer({peer:a,code:"\x45\x48\x45\x41\x44\x45\x52\x53",req:f}),setImmediate(c,["\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x73\x70\x6f\x6e\x73\x65\x20\x68\x65\x61\x64\x65\x72\x73",JSON.stringify(d),f.method,f.url].join("\x20"))))}),g["\x63\x61\x74\x63\x68"](function(b){return a&&("\x45\x55\x4e\x41\x56\x41\x49\x4c\x41\x42\x4c\x45"===b.code||"\x45\x54\x49\x4d\x45\x4f\x55\x54"===b.code?s.removePeer({peer:a,code:b.code,req:f}):s.banPeer({peer:a,code:b.code,req:f,clock:600})),setImmediate(c,[b.code,"\x52\x65\x71\x75\x65\x73\x74\x20\x66\x61\x69\x6c\x65\x64",f.method,f.url].join("\x20"))})},u.prototype.sandboxApi=function(a,b,c){m.callMethod(t,a,b,c)},u.prototype.onBind=function(a){p=a,s.headers={os:p.system.getOS(),version:p.system.getVersion(),port:p.system.getPort(),nethash:p.system.getNethash()}},u.prototype.onBlockchainReady=function(){s.loaded=!0},u.prototype.onSignature=function(a,b){b&&(r.broadcast({limit:100},{api:"\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",data:{signature:a},method:"\x50\x4f\x53\x54"}),q.network.io.sockets.emit("\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x2f\x63\x68\x61\x6e\x67\x65",{}))},u.prototype.onUnconfirmedTransaction=function(a,b){b&&(r.broadcast({limit:100},{api:"\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",data:{transaction:a},method:"\x50\x4f\x53\x54"}),q.network.io.sockets.emit("\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2f\x63\x68\x61\x6e\x67\x65",{}))},u.prototype.onNewBlock=function(a,b){b&&(r.broadcast({limit:100},{api:"\x2f\x62\x6c\x6f\x63\x6b\x73",data:{block:a},method:"\x50\x4f\x53\x54"}),q.network.io.sockets.emit("\x62\x6c\x6f\x63\x6b\x73\x2f\x63\x68\x61\x6e\x67\x65",{}))},u.prototype.onMessage=function(a,b){b&&r.broadcast({limit:100,dappid:a.dappid},{api:"\x2f\x64\x61\x70\x70\x2f\x6d\x65\x73\x73\x61\x67\x65",data:a,method:"\x50\x4f\x53\x54"})},u.prototype.cleanup=function(a){return s.loaded=!1,setImmediate(a)},t.message=function(a,b){return a.timestamp=(new Date).getTime(),a.hash=s.hashsum(a.body,a.timestamp),r.broadcast({limit:100,dappid:a.dappid},{api:"\x2f\x64\x61\x70\x70\x2f\x6d\x65\x73\x73\x61\x67\x65",data:a,method:"\x50\x4f\x53\x54"}),setImmediate(b,null,{})},t.request=function(a,b){a.timestamp=(new Date).getTime(),a.hash=s.hashsum(a.body,a.timestamp),a.body.peer?r.getFromPeer({ip:a.body.peer.ip,port:a.body.peer.port},{api:"\x2f\x64\x61\x70\x70\x2f\x72\x65\x71\x75\x65\x73\x74",data:a,method:"\x50\x4f\x53\x54"},b):r.getFromRandomPeer({dappid:a.dappid},{api:"\x2f\x64\x61\x70\x70\x2f\x72\x65\x71\x75\x65\x73\x74",data:a,method:"\x50\x4f\x53\x54"},b)},a.exports=u}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x61\x63\x63\x6f\x75\x6e\x74\x2e\x6a\x73",function(a,b,c){"use strict";function o(a,b){return this.scope=a,j=this,k=this.scope.db,l=this.scope.library,n=this.scope.genesisblock.block,this.table="\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73",this.model=[{name:"\x75\x73\x65\x72\x6e\x61\x6d\x65",type:"\x53\x74\x72\x69\x6e\x67",filter:{type:"\x73\x74\x72\x69\x6e\x67","case":"\x6c\x6f\x77\x65\x72",maxLength:20,minLength:1},conv:String,immutable:!0},{name:"\x69\x73\x44\x65\x6c\x65\x67\x61\x74\x65",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x62\x6f\x6f\x6c\x65\x61\x6e"},conv:Boolean},{name:"\x75\x5f\x69\x73\x44\x65\x6c\x65\x67\x61\x74\x65",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x62\x6f\x6f\x6c\x65\x61\x6e"},conv:Boolean},{name:"\x73\x65\x63\x6f\x6e\x64\x53\x69\x67\x6e\x61\x74\x75\x72\x65",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x62\x6f\x6f\x6c\x65\x61\x6e"},conv:Boolean},{name:"\x75\x5f\x73\x65\x63\x6f\x6e\x64\x53\x69\x67\x6e\x61\x74\x75\x72\x65",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x62\x6f\x6f\x6c\x65\x61\x6e"},conv:Boolean},{name:"\x75\x5f\x75\x73\x65\x72\x6e\x61\x6d\x65",type:"\x53\x74\x72\x69\x6e\x67",filter:{type:"\x73\x74\x72\x69\x6e\x67","case":"\x6c\x6f\x77\x65\x72",maxLength:20,minLength:1},conv:String,immutable:!0},{name:"\x61\x64\x64\x72\x65\x73\x73",type:"\x53\x74\x72\x69\x6e\x67",filter:{required:!0,type:"\x73\x74\x72\x69\x6e\x67","case":"\x75\x70\x70\x65\x72",minLength:1,maxLength:22},conv:String,immutable:!0,expression:"\x55\x50\x50\x45\x52\x28\x22\x61\x64\x64\x72\x65\x73\x73\x22\x29"},{name:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79",type:"\x42\x69\x6e\x61\x72\x79",filter:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},conv:String,immutable:!0,expression:"\x45\x4e\x43\x4f\x44\x45\x28\x22\x70\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x2c\x20\x27\x68\x65\x78\x27\x29"},{name:"\x73\x65\x63\x6f\x6e\x64\x50\x75\x62\x6c\x69\x63\x4b\x65\x79",type:"\x42\x69\x6e\x61\x72\x79",filter:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},conv:String,immutable:!0,expression:"\x45\x4e\x43\x4f\x44\x45\x28\x22\x73\x65\x63\x6f\x6e\x64\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x2c\x20\x27\x68\x65\x78\x27\x29"},{name:"\x62\x61\x6c\x61\x6e\x63\x65",type:"\x42\x69\x67\x49\x6e\x74",filter:{required:!0,type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:h.totalAmount},conv:Number,expression:"\x28\x22\x62\x61\x6c\x61\x6e\x63\x65\x22\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74"},{name:"\x75\x5f\x62\x61\x6c\x61\x6e\x63\x65",type:"\x42\x69\x67\x49\x6e\x74",filter:{required:!0,type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:h.totalAMount},conv:Number,expression:"\x28\x22\x75\x5f\x62\x61\x6c\x61\x6e\x63\x65\x22\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74"},{name:"\x76\x6f\x74\x65",type:"\x42\x69\x67\x49\x6e\x74",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72"},conv:Number,expression:"\x28\x22\x76\x6f\x74\x65\x22\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74"},{name:"\x72\x61\x74\x65",type:"\x42\x69\x67\x49\x6e\x74",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72"},conv:Number,expression:"\x28\x22\x72\x61\x74\x65\x22\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74"},{name:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73",type:"\x54\x65\x78\x74",filter:{type:"\x61\x72\x72\x61\x79",uniqueItems:!0},conv:Array,expression:"\x28\x53\x45\x4c\x45\x43\x54\x20\x41\x52\x52\x41\x59\x5f\x41\x47\x47\x28\x22\x64\x65\x70\x65\x6e\x64\x65\x6e\x74\x49\x64\x22\x29\x20\x46\x52\x4f\x4d\x20"+this.table+"\x32\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x20\x57\x48\x45\x52\x45\x20\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x22\x20\x3d\x20\x61\x2e\x22\x61\x64\x64\x72\x65\x73\x73\x22\x29"},{name:"\x75\x5f\x64\x65\x6c\x65\x67\x61\x74\x65\x73",type:"\x54\x65\x78\x74",filter:{type:"\x61\x72\x72\x61\x79",uniqueItems:!0},conv:Array,expression:"\x28\x53\x45\x4c\x45\x43\x54\x20\x41\x52\x52\x41\x59\x5f\x41\x47\x47\x28\x22\x64\x65\x70\x65\x6e\x64\x65\x6e\x74\x49\x64\x22\x29\x20\x46\x52\x4f\x4d\x20"+this.table+"\x32\x75\x5f\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x20\x57\x48\x45\x52\x45\x20\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x22\x20\x3d\x20\x61\x2e\x22\x61\x64\x64\x72\x65\x73\x73\x22\x29"},{name:"\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",type:"\x54\x65\x78\x74",filter:{type:"\x61\x72\x72\x61\x79",uniqueItems:!0},conv:Array,expression:"\x28\x53\x45\x4c\x45\x43\x54\x20\x41\x52\x52\x41\x59\x5f\x41\x47\x47\x28\x22\x64\x65\x70\x65\x6e\x64\x65\x6e\x74\x49\x64\x22\x29\x20\x46\x52\x4f\x4d\x20"+this.table+"\x32\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x57\x48\x45\x52\x45\x20\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x22\x20\x3d\x20\x61\x2e\x22\x61\x64\x64\x72\x65\x73\x73\x22\x29"},{name:"\x75\x5f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",type:"\x54\x65\x78\x74",filter:{type:"\x61\x72\x72\x61\x79",uniqueItems:!0},conv:Array,expression:"\x28\x53\x45\x4c\x45\x43\x54\x20\x41\x52\x52\x41\x59\x5f\x41\x47\x47\x28\x22\x64\x65\x70\x65\x6e\x64\x65\x6e\x74\x49\x64\x22\x29\x20\x46\x52\x4f\x4d\x20"+this.table+"\x32\x75\x5f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x57\x48\x45\x52\x45\x20\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x22\x20\x3d\x20\x61\x2e\x22\x61\x64\x64\x72\x65\x73\x73\x22\x29"},{name:"\x6d\x75\x6c\x74\x69\x6d\x69\x6e",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:17},conv:Number},{name:"\x75\x5f\x6d\x75\x6c\x74\x69\x6d\x69\x6e",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:17},conv:Number},{name:"\x6d\x75\x6c\x74\x69\x6c\x69\x66\x65\x74\x69\x6d\x65",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:72},conv:Number},{name:"\x75\x5f\x6d\x75\x6c\x74\x69\x6c\x69\x66\x65\x74\x69\x6d\x65",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:72},conv:Number},{name:"\x62\x6c\x6f\x63\x6b\x49\x64",type:"\x53\x74\x72\x69\x6e\x67",filter:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:20},conv:String},{name:"\x6e\x61\x6d\x65\x65\x78\x69\x73\x74",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x62\x6f\x6f\x6c\x65\x61\x6e"},conv:Boolean},{name:"\x75\x5f\x6e\x61\x6d\x65\x65\x78\x69\x73\x74",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x62\x6f\x6f\x6c\x65\x61\x6e"},conv:Boolean},{name:"\x70\x72\x6f\x64\x75\x63\x65\x64\x62\x6c\x6f\x63\x6b\x73",type:"\x4e\x75\x6d\x62\x65\x72",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:-1,maximum:1},conv:Number},{name:"\x6d\x69\x73\x73\x65\x64\x62\x6c\x6f\x63\x6b\x73",type:"\x4e\x75\x6d\x62\x65\x72",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:-1,maximum:1},conv:Number},{name:"\x66\x65\x65\x73",type:"\x42\x69\x67\x49\x6e\x74",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72"},conv:Number,expression:"\x28\x22\x66\x65\x65\x73\x22\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74"},{name:"\x72\x65\x77\x61\x72\x64\x73",type:"\x42\x69\x67\x49\x6e\x74",filter:{type:"\x69\x6e\x74\x65\x67\x65\x72"},conv:Number,expression:"\x28\x22\x72\x65\x77\x61\x72\x64\x73\x22\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74"},{name:"\x76\x69\x72\x67\x69\x6e",type:"\x53\x6d\x61\x6c\x6c\x49\x6e\x74",filter:{type:"\x62\x6f\x6f\x6c\x65\x61\x6e"},conv:Boolean,immutable:!0}],this.fields=this.model.map(function(a){var b={};return a.expression?b.expression=a.expression:(a.mod&&(b.expression=a.mod),b.field=a.name),(b.expression||a.alias)&&(b.alias=a.alias||a.name),b}),this.binary=[],this.model.forEach(function(a){"\x42\x69\x6e\x61\x72\x79"===a.type&&this.binary.push(a.name)}.bind(this)),this.filter={},this.model.forEach(function(a){this.filter[a.name]=a.filter}.bind(this)),this.conv={},this.model.forEach(function(a){this.conv[a.name]=a.conv}.bind(this)),this.editable=[],this.model.forEach(function(a){a.immutable||this.editable.push(a.name)}.bind(this)),setImmediate(b,null,this)}var h,i,j,k,l,m,n,e=(c("\x61\x73\x79\x6e\x63"),c("\x70\x67\x2d\x70\x72\x6f\x6d\x69\x73\x65")),f=c("\x70\x61\x74\x68"),g=c("\x6a\x73\x6f\x6e\x2d\x73\x71\x6c")();g.setDialect("\x70\x6f\x73\x74\x67\x72\x65\x73\x71\x6c"),h=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),i=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),m={},n=null,o.prototype.createTables=function(a){var b=new e.QueryFile(f.join("\x73\x71\x6c","\x6d\x65\x6d\x6f\x72\x79\x54\x61\x62\x6c\x65\x73\x2e\x73\x71\x6c"),{minify:!0});k.query(b).then(function(){return setImmediate(a)})["\x63\x61\x74\x63\x68"](function(b){return l.logger.error(b.stack),setImmediate(a,"\x41\x63\x63\x6f\x75\x6e\x74\x23\x63\x72\x65\x61\x74\x65\x54\x61\x62\x6c\x65\x73\x20\x65\x72\x72\x6f\x72")})},o.prototype.removeTables=function(a){var c,b=[];[this.table,"\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64","\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x32\x64\x65\x6c\x65\x67\x61\x74\x65\x73","\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x32\x75\x5f\x64\x65\x6c\x65\x67\x61\x74\x65\x73","\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x32\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73","\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x32\x75\x5f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73"].forEach(function(a){c=g.build({type:"\x72\x65\x6d\x6f\x76\x65",table:a}),b.push(c.query)}),k.query(b.join("")).then(function(){return setImmediate(a)})["\x63\x61\x74\x63\x68"](function(b){return l.logger.error(b.stack),setImmediate(a,"\x41\x63\x63\x6f\x75\x6e\x74\x23\x72\x65\x6d\x6f\x76\x65\x54\x61\x62\x6c\x65\x73\x20\x65\x72\x72\x6f\x72")})},o.prototype.objectNormalize=function(a){var b=this.scope.schema.validate(a,{id:"\x41\x63\x63\x6f\x75\x6e\x74",object:!0,properties:this.filter});if(!b)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");return a},o.prototype.verifyPublicKey=function(a){if(void 0!==a){if("\x73\x74\x72\x69\x6e\x67"!=typeof a)throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79\x2c\x20\x6d\x75\x73\x74\x20\x62\x65\x20\x61\x20\x73\x74\x72\x69\x6e\x67";if(a.length<64)throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79\x2c\x20\x6d\x75\x73\x74\x20\x62\x65\x20\x36\x34\x20\x63\x68\x61\x72\x61\x63\x74\x65\x72\x73\x20\x6c\x6f\x6e\x67";try{new Buffer(a,"\x68\x65\x78")}catch(b){throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79\x2c\x20\x6d\x75\x73\x74\x20\x62\x65\x20\x61\x20\x68\x65\x78\x20\x73\x74\x72\x69\x6e\x67"}}},o.prototype.toDB=function(a){return this.binary.forEach(function(b){a[b]&&(a[b]=new Buffer(a[b],"\x68\x65\x78"))}),a.address=(a.address+"").toUpperCase(),a},o.prototype.get=function(a,b,c){"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b&&(c=b,b=this.fields.map(function(a){return a.alias||a.field})),this.getAll(a,b,function(a,b){return setImmediate(c,a,b&&b.length?b[0]:null)})},o.prototype.getAll=function(a,b,c){var d,e,f,h,i,j;"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b&&(c=b,b=this.fields.map(function(a){return a.alias||a.field})),d=this.fields.filter(function(a){return-1!==b.indexOf(a.alias||a.field)}),e={},Object.keys(this.conv).forEach(function(a){-1!==b.indexOf(a)&&(e[a]=this.conv[a])}.bind(this)),a.limit>0&&(f=a.limit),delete a.limit,a.offset>0&&(h=a.offset),delete a.offset,a.sort&&(i=a.sort),delete a.sort,"\x73\x74\x72\x69\x6e\x67"==typeof a.address&&(a.address={$upper:["\x61\x64\x64\x72\x65\x73\x73",a.address]}),j=g.build({type:"\x73\x65\x6c\x65\x63\x74",table:this.table,limit:f,offset:h,sort:i,alias:"\x61",condition:a,fields:d}),k.query(j.query,j.values).then(function(a){return setImmediate(c,null,a)})["\x63\x61\x74\x63\x68"](function(a){return l.logger.error(a.stack),setImmediate(c,"\x41\x63\x63\x6f\x75\x6e\x74\x23\x67\x65\x74\x41\x6c\x6c\x20\x65\x72\x72\x6f\x72")})},o.prototype.set=function(a,b,c){this.verifyPublicKey(b.publicKey),a=(a+"").toUpperCase(),b.address=a;var d=g.build({type:"\x69\x6e\x73\x65\x72\x74\x6f\x72\x75\x70\x64\x61\x74\x65",table:this.table,conflictFields:["\x61\x64\x64\x72\x65\x73\x73"],values:this.toDB(b),modifier:this.toDB(b)});k.none(d.query,d.values).then(function(){return setImmediate(c)})["\x63\x61\x74\x63\x68"](function(a){return l.logger.error(a.stack),setImmediate(c,"\x41\x63\x63\x6f\x75\x6e\x74\x23\x73\x65\x74\x20\x65\x72\x72\x6f\x72")})},o.prototype.merge=function(a,b,c){function q(b){return 2!==c.length?setImmediate(c,b):b?setImmediate(c,b):void j.get({address:a},c)}var o,p,r,d={},f={},h={},i={},m={},n=[];return this.verifyPublicKey(b.publicKey),a=(a+"").toUpperCase(),this.editable.forEach(function(e){var g,k,l,o;if(void 0!==b[e])switch(l=b[e],j.conv[e]){case String:d[e]=l;break;case Number:if(isNaN(l)||l===1/0)return console.log(b),setImmediate(c,"\x45\x6e\x63\x6f\x75\x6e\x74\x65\x72\x65\x64\x20\x75\x6e\x73\x61\x6e\x65\x20\x6e\x75\x6d\x62\x65\x72\x3a\x20"+l);Math.abs(l)===l&&0!==l?(d.$inc=d.$inc||{},d.$inc[e]=Math.floor(l),"\x62\x61\x6c\x61\x6e\x63\x65"===e&&n.push({query:"\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64\x20\x28\x22\x61\x64\x64\x72\x65\x73\x73\x22\x2c\x20\x22\x61\x6d\x6f\x75\x6e\x74\x22\x2c\x20\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x22\x2c\x20\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x2c\x20\x22\x72\x6f\x75\x6e\x64\x22\x29\x20\x53\x45\x4c\x45\x43\x54\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x2c\x20\x28\x24\x7b\x61\x6d\x6f\x75\x6e\x74\x7d\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74\x2c\x20\x22\x64\x65\x70\x65\x6e\x64\x65\x6e\x74\x49\x64\x22\x2c\x20\x24\x7b\x62\x6c\x6f\x63\x6b\x49\x64\x7d\x2c\x20\x24\x7b\x72\x6f\x75\x6e\x64\x7d\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x32\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x20\x57\x48\x45\x52\x45\x20\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x22\x20\x3d\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x3b",values:{address:a,amount:l,blockId:b.blockId,round:b.round}})):0>l&&(d.$dec=d.$dec||{},d.$dec[e]=Math.floor(Math.abs(l)),d.$dec.u_balance&&(d.virgin=0),"\x62\x61\x6c\x61\x6e\x63\x65"===e&&n.push({query:"\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64\x20\x28\x22\x61\x64\x64\x72\x65\x73\x73\x22\x2c\x20\x22\x61\x6d\x6f\x75\x6e\x74\x22\x2c\x20\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x22\x2c\x20\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x2c\x20\x22\x72\x6f\x75\x6e\x64\x22\x29\x20\x53\x45\x4c\x45\x43\x54\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x2c\x20\x28\x24\x7b\x61\x6d\x6f\x75\x6e\x74\x7d\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74\x2c\x20\x22\x64\x65\x70\x65\x6e\x64\x65\x6e\x74\x49\x64\x22\x2c\x20\x24\x7b\x62\x6c\x6f\x63\x6b\x49\x64\x7d\x2c\x20\x24\x7b\x72\x6f\x75\x6e\x64\x7d\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x32\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x20\x57\x48\x45\x52\x45\x20\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x22\x20\x3d\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x3b",values:{address:a,amount:l,blockId:b.blockId,round:b.round}}));break;case Array:if("\x5b\x6f\x62\x6a\x65\x63\x74\x20\x4f\x62\x6a\x65\x63\x74\x5d"===Object.prototype.toString.call(l[0]))for(k=0;k<l.length;k++)g=l[k],"\x2d"===g.action?(delete g.action,m[e]=m[e]||[],m[e].push(g)):"\x2b"===g.action?(delete g.action,i[e]=i[e]||[],i[e].push(g)):(delete g.action,i[e]=i[e]||[],i[e].push(g));else for(k=0;k<l.length;k++)o=l[k][0],g=null,"\x2d"===o?(g=l[k].slice(1),f[e]=f[e]||[],f[e].push(g),"\x64\x65\x6c\x65\x67\x61\x74\x65\x73"===e&&n.push({query:"\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64\x20\x28\x22\x61\x64\x64\x72\x65\x73\x73\x22\x2c\x20\x22\x61\x6d\x6f\x75\x6e\x74\x22\x2c\x20\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x22\x2c\x20\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x2c\x20\x22\x72\x6f\x75\x6e\x64\x22\x29\x20\x53\x45\x4c\x45\x43\x54\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x2c\x20\x28\x2d\x62\x61\x6c\x61\x6e\x63\x65\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74\x2c\x20\x24\x7b\x64\x65\x6c\x65\x67\x61\x74\x65\x7d\x2c\x20\x24\x7b\x62\x6c\x6f\x63\x6b\x49\x64\x7d\x2c\x20\x24\x7b\x72\x6f\x75\x6e\x64\x7d\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x57\x48\x45\x52\x45\x20\x61\x64\x64\x72\x65\x73\x73\x20\x3d\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x3b",values:{address:a,delegate:g,blockId:b.blockId,round:b.round}})):"\x2b"===o?(g=l[k].slice(1),h[e]=h[e]||[],h[e].push(g),"\x64\x65\x6c\x65\x67\x61\x74\x65\x73"===e&&n.push({query:"\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64\x20\x28\x22\x61\x64\x64\x72\x65\x73\x73\x22\x2c\x20\x22\x61\x6d\x6f\x75\x6e\x74\x22\x2c\x20\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x22\x2c\x20\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x2c\x20\x22\x72\x6f\x75\x6e\x64\x22\x29\x20\x53\x45\x4c\x45\x43\x54\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x2c\x20\x28\x62\x61\x6c\x61\x6e\x63\x65\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74\x2c\x20\x24\x7b\x64\x65\x6c\x65\x67\x61\x74\x65\x7d\x2c\x20\x24\x7b\x62\x6c\x6f\x63\x6b\x49\x64\x7d\x2c\x20\x24\x7b\x72\x6f\x75\x6e\x64\x7d\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x57\x48\x45\x52\x45\x20\x61\x64\x64\x72\x65\x73\x73\x20\x3d\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x3b",values:{address:a,delegate:g,blockId:b.blockId,round:b.round}})):(g=l[k],h[e]=h[e]||[],h[e].push(g),"\x64\x65\x6c\x65\x67\x61\x74\x65\x73"===e&&n.push({query:"\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64\x20\x28\x22\x61\x64\x64\x72\x65\x73\x73\x22\x2c\x20\x22\x61\x6d\x6f\x75\x6e\x74\x22\x2c\x20\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x22\x2c\x20\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x2c\x20\x22\x72\x6f\x75\x6e\x64\x22\x29\x20\x53\x45\x4c\x45\x43\x54\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x2c\x20\x28\x62\x61\x6c\x61\x6e\x63\x65\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74\x2c\x20\x24\x7b\x64\x65\x6c\x65\x67\x61\x74\x65\x7d\x2c\x20\x24\x7b\x62\x6c\x6f\x63\x6b\x49\x64\x7d\x2c\x20\x24\x7b\x72\x6f\x75\x6e\x64\x7d\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x57\x48\x45\x52\x45\x20\x61\x64\x64\x72\x65\x73\x73\x20\x3d\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x3b",values:{address:a,delegate:g,blockId:b.blockId,round:b.round}}))}}),o=[],Object.keys(f).length&&Object.keys(f).forEach(function(b){var c=g.build({type:"\x72\x65\x6d\x6f\x76\x65",table:j.table+"\x32"+b,condition:{dependentId:{$in:f[b]},accountId:a}});o.push(c)}),Object.keys(h).length&&Object.keys(h).forEach(function(b){var c,d;for(c=0;c<h[b].length;c++)d=g.build({type:"\x69\x6e\x73\x65\x72\x74",table:j.table+"\x32"+b,values:{accountId:a,dependentId:h[b][c]}}),o.push(d)}),Object.keys(m).length&&Object.keys(m).forEach(function(b){m[b].accountId=a;var c=g.build({type:"\x72\x65\x6d\x6f\x76\x65",table:j.table+"\x32"+b,condition:m[b]});o.push(c)}),Object.keys(i).length&&Object.keys(i).forEach(function(b){var c,d;for(i[b].accountId=a,c=0;c<i[b].length;c++)d=g.build({type:"\x69\x6e\x73\x65\x72\x74",table:j.table+"\x32"+b,values:i[b]}),o.push(d)}),Object.keys(d).length&&(p=g.build({type:"\x75\x70\x64\x61\x74\x65",table:this.table,modifier:d,condition:{address:a}}),o.push(p)),r=o.concat(n).map(function(a){return e.as.format(a.query,a.values)}).join(""),c?0===r.length?q():void k.none(r).then(function(){return q()})["\x63\x61\x74\x63\x68"](function(a){return l.logger.error(a.stack),q("\x41\x63\x63\x6f\x75\x6e\x74\x23\x6d\x65\x72\x67\x65\x20\x65\x72\x72\x6f\x72")}):r},o.prototype.remove=function(a,b){var c=g.build({type:"\x72\x65\x6d\x6f\x76\x65",table:this.table,condition:{address:a}});k.none(c.query,c.values).then(function(){return setImmediate(b,null,a)})["\x63\x61\x74\x63\x68"](function(a){return l.logger.error(a.stack),setImmediate(b,"\x41\x63\x63\x6f\x75\x6e\x74\x23\x72\x65\x6d\x6f\x76\x65\x20\x65\x72\x72\x6f\x72")})},a.exports=o}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x62\x6c\x6f\x63\x6b\x2e\x6a\x73",function(a,b,c){"use strict";function l(a,b){return this.scope=a,k=this.scope.genesisblock,b?setImmediate(b,null,this):void 0}var e=(c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),c("\x63\x72\x79\x70\x74\x6f")),f=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x62\x69\x67\x6e\x75\x6d\x2e\x6a\x73"),g=c("\x62\x79\x74\x65\x62\x75\x66\x66\x65\x72"),h=c("\x2e\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x62\x6c\x6f\x63\x6b\x52\x65\x77\x61\x72\x64\x2e\x6a\x73"),i=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),j={},k=null;j.blockReward=new h,j.getAddressByPublicKey=function(a){var d,g,b=e.createHash("\x73\x68\x61\x32\x35\x36").update(a,"\x68\x65\x78").digest(),c=new Buffer(8);for(d=0;8>d;d++)c[d]=b[7-d];return g=""+f.fromBuffer(c)+"\x4c"},l.prototype.create=function(a){var m,n,o,p,b=a.transactions.sort(function(a,b){return a.type<b.type?-1:a.type>b.type?1:a.amount<b.amount?-1:a.amount>b.amount?1:0}),c=a.previousBlock?a.previousBlock.height+1:1,d=j.blockReward.calcReward(c),f=0,g=0,h=0,k=[],l=e.createHash("\x73\x68\x61\x32\x35\x36");for(m=0;m<b.length&&(n=b[m],o=this.scope.transaction.getBytes(n),!(h+o.length>i.maxPayloadLength));m++)h+=o.length,f+=n.fee,g+=n.amount,k.push(n),l.update(o);p={version:0,totalAmount:g,totalFee:f,reward:d,payloadHash:l.digest().toString("\x68\x65\x78"),timestamp:a.timestamp,numberOfTransactions:k.length,
payloadLength:h,previousBlock:a.previousBlock.id,generatorPublicKey:a.keypair.publicKey.toString("\x68\x65\x78"),transactions:k};try{p.blockSignature=this.sign(p,a.keypair),p=this.objectNormalize(p)}catch(q){throw q}return p},l.prototype.sign=function(a,b){var c=this.getHash(a);return this.scope.ed.sign(c,b).toString("\x68\x65\x78")},l.prototype.getBytes=function(a){var c,d,e,h,i,j,k,b=180;try{if(e=new g(b,!0),e.writeInt(a.version),e.writeInt(a.timestamp),a.previousBlock)for(h=f(a.previousBlock).toBuffer({size:"\x38"}),d=0;8>d;d++)e.writeByte(h[d]);else for(d=0;8>d;d++)e.writeByte(0);for(e.writeInt(a.numberOfTransactions),e.writeLong(a.totalAmount),e.writeLong(a.totalFee),e.writeLong(a.reward),e.writeInt(a.payloadLength),i=new Buffer(a.payloadHash,"\x68\x65\x78"),d=0;d<i.length;d++)e.writeByte(i[d]);for(j=new Buffer(a.generatorPublicKey,"\x68\x65\x78"),d=0;d<j.length;d++)e.writeByte(j[d]);if(a.blockSignature)for(k=new Buffer(a.blockSignature,"\x68\x65\x78"),d=0;d<k.length;d++)e.writeByte(k[d]);e.flip(),c=e.toBuffer()}catch(l){throw l}return c},l.prototype.verifySignature=function(a){var c,d,f,g,h,i,j,b=64;try{for(d=this.getBytes(a),f=new Buffer(d.length-b),g=0;g<f.length;g++)f[g]=d[g];h=e.createHash("\x73\x68\x61\x32\x35\x36").update(f).digest(),i=new Buffer(a.blockSignature,"\x68\x65\x78"),j=new Buffer(a.generatorPublicKey,"\x68\x65\x78"),c=this.scope.ed.verify(h,i||"\x20",j||"\x20")}catch(k){throw k}return c},l.prototype.dbTable="\x62\x6c\x6f\x63\x6b\x73",l.prototype.dbFields=["\x69\x64","\x76\x65\x72\x73\x69\x6f\x6e","\x74\x69\x6d\x65\x73\x74\x61\x6d\x70","\x68\x65\x69\x67\x68\x74","\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b","\x6e\x75\x6d\x62\x65\x72\x4f\x66\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73","\x74\x6f\x74\x61\x6c\x41\x6d\x6f\x75\x6e\x74","\x74\x6f\x74\x61\x6c\x46\x65\x65","\x72\x65\x77\x61\x72\x64","\x70\x61\x79\x6c\x6f\x61\x64\x4c\x65\x6e\x67\x74\x68","\x70\x61\x79\x6c\x6f\x61\x64\x48\x61\x73\x68","\x67\x65\x6e\x65\x72\x61\x74\x6f\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79","\x62\x6c\x6f\x63\x6b\x53\x69\x67\x6e\x61\x74\x75\x72\x65"],l.prototype.dbSave=function(a){var b,c,d;try{b=new Buffer(a.payloadHash,"\x68\x65\x78"),c=new Buffer(a.generatorPublicKey,"\x68\x65\x78"),d=new Buffer(a.blockSignature,"\x68\x65\x78")}catch(e){throw e}return{table:this.dbTable,fields:this.dbFields,values:{id:a.id,version:a.version,timestamp:a.timestamp,height:a.height,previousBlock:a.previousBlock||null,numberOfTransactions:a.numberOfTransactions,totalAmount:a.totalAmount,totalFee:a.totalFee,reward:a.reward||0,payloadLength:a.payloadLength,payloadHash:b,generatorPublicKey:c,blockSignature:d}}},l.prototype.schema={id:"\x42\x6c\x6f\x63\x6b",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67"},height:{type:"\x69\x6e\x74\x65\x67\x65\x72"},blockSignature:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x73\x69\x67\x6e\x61\x74\x75\x72\x65"},generatorPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},numberOfTransactions:{type:"\x69\x6e\x74\x65\x67\x65\x72"},payloadHash:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x68\x65\x78"},payloadLength:{type:"\x69\x6e\x74\x65\x67\x65\x72"},previousBlock:{type:"\x73\x74\x72\x69\x6e\x67"},timestamp:{type:"\x69\x6e\x74\x65\x67\x65\x72"},totalAmount:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},totalFee:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},reward:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},transactions:{type:"\x61\x72\x72\x61\x79",uniqueItems:!0},version:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0}},required:["\x62\x6c\x6f\x63\x6b\x53\x69\x67\x6e\x61\x74\x75\x72\x65","\x67\x65\x6e\x65\x72\x61\x74\x6f\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79","\x6e\x75\x6d\x62\x65\x72\x4f\x66\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73","\x70\x61\x79\x6c\x6f\x61\x64\x48\x61\x73\x68","\x70\x61\x79\x6c\x6f\x61\x64\x4c\x65\x6e\x67\x74\x68","\x74\x69\x6d\x65\x73\x74\x61\x6d\x70","\x74\x6f\x74\x61\x6c\x41\x6d\x6f\x75\x6e\x74","\x74\x6f\x74\x61\x6c\x46\x65\x65","\x72\x65\x77\x61\x72\x64","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73","\x76\x65\x72\x73\x69\x6f\x6e"]},l.prototype.objectNormalize=function(a){var b,c;for(b in a)(null==a[b]||void 0===a[b])&&delete a[b];if(c=this.scope.schema.validate(a,l.prototype.schema),!c)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x62\x6c\x6f\x63\x6b\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");try{for(b=0;b<a.transactions.length;b++)a.transactions[b]=this.scope.transaction.objectNormalize(a.transactions[b])}catch(d){throw d}return a},l.prototype.getId=function(a){var d,g,b=e.createHash("\x73\x68\x61\x32\x35\x36").update(this.getBytes(a)).digest(),c=new Buffer(8);for(d=0;8>d;d++)c[d]=b[7-d];return g=""+f.fromBuffer(c)},l.prototype.getHash=function(a){return e.createHash("\x73\x68\x61\x32\x35\x36").update(this.getBytes(a)).digest()},l.prototype.calculateFee=function(){return i.fees.send},l.prototype.dbRead=function(a){if(a.b_id){var b={id:a.b_id,version:parseInt(a.b_version),timestamp:parseInt(a.b_timestamp),height:parseInt(a.b_height),previousBlock:a.b_previousBlock,numberOfTransactions:parseInt(a.b_numberOfTransactions),totalAmount:parseInt(a.b_totalAmount),totalFee:parseInt(a.b_totalFee),reward:parseInt(a.b_reward),payloadLength:parseInt(a.b_payloadLength),payloadHash:a.b_payloadHash,generatorPublicKey:a.b_generatorPublicKey,generatorId:j.getAddressByPublicKey(a.b_generatorPublicKey),blockSignature:a.b_blockSignature,confirmations:parseInt(a.b_confirmations)};return b.totalForged=""+f(b.totalFee).plus(f(b.reward)),b}return null},a.exports=l}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x62\x6c\x6f\x63\x6b\x52\x65\x77\x61\x72\x64\x2e\x6a\x73",function(a,b,c){"use strict";function f(){this.milestones=d.rewards.milestones,this.distance=Math.floor(d.rewards.distance),this.rewardOffset=Math.floor(d.rewards.offset)}var d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),e={};e.parseHeight=function(a){if(isNaN(a))throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x62\x6c\x6f\x63\x6b\x20\x68\x65\x69\x67\x68\x74";return Math.abs(a)},f.prototype.calcMilestone=function(a){var b=Math.trunc((e.parseHeight(a)-this.rewardOffset)/this.distance),c=this.milestones[this.milestones.length-1];return b>this.milestones.length-1?this.milestones.lastIndexOf(c):b},f.prototype.calcReward=function(a){return a=e.parseHeight(a),a<this.rewardOffset?0:this.milestones[this.calcMilestone(a)]},f.prototype.calcSupply=function(a){var b,c,f,g,h,i,j,k;for(a=e.parseHeight(a),b=this.calcMilestone(a),c=d.totalAmount/Math.pow(10,8),f=[],g=0,h=0,i=0;i<this.milestones.length&&b>=i&&(h=this.milestones[i]/Math.pow(10,8),!(a<this.rewardOffset));i++)a<this.distance?g=a%this.distance:(g=this.distance,a-=this.distance,a>0&&i===this.milestones.length-1&&(j=this.rewardOffset-1,g+=a>=j?a-j:j-a)),f.push([g,h]);for(i=0;i<f.length;i++)k=f[i],c+=k[0]*k[1];return c*Math.pow(10,8)},a.exports=f}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x64\x61\x70\x70\x2e\x6a\x73",function(a,b,c){"use strict";function k(){}var i,d=c("\x62\x79\x74\x65\x62\x75\x66\x66\x65\x72"),e=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),f=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x61\x70\x70\x43\x61\x74\x65\x67\x6f\x72\x69\x65\x73\x2e\x6a\x73"),g=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x64\x61\x70\x70\x73\x2e\x6a\x73"),h=c("\x76\x61\x6c\x69\x64\x2d\x75\x72\x6c"),j={};j.unconfirmedNames={},j.unconfirmedLinks={},j.unconfirmedAscii={},k.prototype.bind=function(a){i=a.library},k.prototype.create=function(a,b){return b.recipientId=null,b.amount=0,b.asset.dapp={category:a.category,name:a.name,description:a.description,tags:a.tags,type:a.dapp_type,link:a.link,icon:a.icon},b},k.prototype.calculateFee=function(){return e.fees.dapp},k.prototype.verify=function(a,b,c){var d,e,g,i;if(a.recipientId)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x63\x69\x70\x69\x65\x6e\x74");if(0!==a.amount)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x6d\x6f\x75\x6e\x74");if(!a.asset||!a.asset.dapp)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x73\x73\x65\x74");if(0!==a.asset.dapp.category&&!a.asset.dapp.category)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x63\x61\x74\x65\x67\x6f\x72\x79");e=!1;for(d in f)if(f[d]===a.asset.dapp.category){e=!0;break}if(!e)return setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x63\x61\x74\x65\x67\x6f\x72\x79\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64");if(a.asset.dapp.icon){if(!h.isUri(a.asset.dapp.icon))return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x69\x63\x6f\x6e\x20\x6c\x69\x6e\x6b");if(g=a.asset.dapp.icon.length,a.asset.dapp.icon.indexOf("\x2e\x70\x6e\x67")!==g-4&&a.asset.dapp.icon.indexOf("\x2e\x6a\x70\x67")!==g-4&&a.asset.dapp.icon.indexOf("\x2e\x6a\x70\x65\x67")!==g-5)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x69\x63\x6f\x6e\x20\x66\x69\x6c\x65\x20\x74\x79\x70\x65")}if(a.asset.dapp.type>1||a.asset.dapp.type<0)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x74\x79\x70\x65");if(!h.isUri(a.asset.dapp.link))return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6c\x69\x6e\x6b");if(a.asset.dapp.link.indexOf("\x2e\x7a\x69\x70")!==a.asset.dapp.link.length-4)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x66\x69\x6c\x65\x20\x74\x79\x70\x65");if(!a.asset.dapp.name||0===a.asset.dapp.name.trim().length||a.asset.dapp.name.trim()!==a.asset.dapp.name)return setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x61\x6d\x65\x20\x6d\x75\x73\x74\x20\x6e\x6f\x74\x20\x62\x65\x20\x62\x6c\x61\x6e\x6b");if(a.asset.dapp.name.length>32)return setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x61\x6d\x65\x20\x69\x73\x20\x74\x6f\x6f\x20\x6c\x6f\x6e\x67\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x33\x32\x20\x63\x68\x61\x72\x61\x63\x74\x65\x72\x73");if(a.asset.dapp.description&&a.asset.dapp.description.length>160)return setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x64\x65\x73\x63\x72\x69\x70\x74\x69\x6f\x6e\x20\x69\x73\x20\x74\x6f\x6f\x20\x6c\x6f\x6e\x67\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x31\x36\x30\x20\x63\x68\x61\x72\x61\x63\x74\x65\x72\x73");if(a.asset.dapp.tags&&a.asset.dapp.tags.length>160)return setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x74\x61\x67\x73\x20\x69\x73\x20\x74\x6f\x6f\x20\x6c\x6f\x6e\x67\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x31\x36\x30\x20\x63\x68\x61\x72\x61\x63\x74\x65\x72\x73");if(a.asset.dapp.tags)for(i=a.asset.dapp.tags.split("\x2c"),i=i.map(function(a){return a.trim()}).sort(),d=0;d<i.length-1;d++)if(i[d+1]===i[d])return setImmediate(c,"\x45\x6e\x63\x6f\x75\x6e\x74\x65\x72\x65\x64\x20\x64\x75\x70\x6c\x69\x63\x61\x74\x65\x20\x74\x61\x67\x3a\x20"+i[d]+"\x20\x69\x6e\x20\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e");return setImmediate(c)},k.prototype.process=function(a,b,c){return setImmediate(c,null,a)},k.prototype.getBytes=function(a){var b,c,e,f,g;try{b=new Buffer([]),c=new Buffer(a.asset.dapp.name,"\x75\x74\x66\x38"),b=Buffer.concat([b,c]),a.asset.dapp.description&&(e=new Buffer(a.asset.dapp.description,"\x75\x74\x66\x38"),b=Buffer.concat([b,e])),a.asset.dapp.tags&&(f=new Buffer(a.asset.dapp.tags,"\x75\x74\x66\x38"),b=Buffer.concat([b,f])),a.asset.dapp.link&&(b=Buffer.concat([b,new Buffer(a.asset.dapp.link,"\x75\x74\x66\x38")])),a.asset.dapp.icon&&(b=Buffer.concat([b,new Buffer(a.asset.dapp.icon,"\x75\x74\x66\x38")])),g=new d(8,!0),g.writeInt(a.asset.dapp.type),g.writeInt(a.asset.dapp.category),g.flip(),b=Buffer.concat([b,g.toBuffer()])}catch(h){throw h}return b},k.prototype.apply=function(a,b,c,d){return setImmediate(d)},k.prototype.undo=function(a,b,c,d){return setImmediate(d)},k.prototype.applyUnconfirmed=function(a,b,c){return j.unconfirmedNames[a.asset.dapp.name]?setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x61\x6d\x65\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x78\x69\x73\x74\x73"):a.asset.dapp.link&&j.unconfirmedLinks[a.asset.dapp.link]?setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6c\x69\x6e\x6b\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x78\x69\x73\x74\x73"):(j.unconfirmedNames[a.asset.dapp.name]=!0,j.unconfirmedLinks[a.asset.dapp.link]=!0,void i.db.query(g.getExisting,{name:a.asset.dapp.name,link:a.asset.dapp.link||null,transactionId:a.id}).then(function(b){var d=b[0];return d?d.name===a.asset.dapp.name?setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x61\x6d\x65\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x78\x69\x73\x74\x73\x3a\x20"+d.name):d.link===a.asset.dapp.link?setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6c\x69\x6e\x6b\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x78\x69\x73\x74\x73\x3a\x20"+d.link):setImmediate(c,"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x65\x72\x72\x6f\x72"):setImmediate(c,null,a)})["\x63\x61\x74\x63\x68"](function(){return setImmediate(c,"\x44\x41\x70\x70\x23\x61\x70\x70\x6c\x79\x55\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x20\x65\x72\x72\x6f\x72")}))},k.prototype.undoUnconfirmed=function(a,b,c){return delete j.unconfirmedNames[a.asset.dapp.name],delete j.unconfirmedLinks[a.asset.dapp.link],setImmediate(c)},k.prototype.schema={id:"\x44\x41\x70\x70",type:"\x6f\x62\x6a\x65\x63\x74",properties:{category:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:8},name:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:32},description:{type:"\x73\x74\x72\x69\x6e\x67",minLength:0,maxLength:160},tags:{type:"\x73\x74\x72\x69\x6e\x67",minLength:0,maxLength:160},type:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},link:{type:"\x73\x74\x72\x69\x6e\x67",minLength:0,maxLength:2e3},icon:{type:"\x73\x74\x72\x69\x6e\x67",minLength:0,maxLength:2e3}},required:["\x74\x79\x70\x65","\x6e\x61\x6d\x65","\x63\x61\x74\x65\x67\x6f\x72\x79"]},k.prototype.objectNormalize=function(a){var b,c;for(b in a.asset.dapp)(null===a.asset.dapp[b]||void 0===a.asset.dapp[b])&&delete a.asset.dapp[b];if(c=i.schema.validate(a.asset.dapp,k.prototype.schema),!c)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x64\x61\x70\x70\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");return a},k.prototype.dbRead=function(a){if(a.dapp_name){var b={name:a.dapp_name,description:a.dapp_description,tags:a.dapp_tags,type:a.dapp_type,link:a.dapp_link,category:a.dapp_category,icon:a.dapp_icon};return{dapp:b}}return null},k.prototype.dbTable="\x64\x61\x70\x70\x73",k.prototype.dbFields=["\x74\x79\x70\x65","\x6e\x61\x6d\x65","\x64\x65\x73\x63\x72\x69\x70\x74\x69\x6f\x6e","\x74\x61\x67\x73","\x6c\x69\x6e\x6b","\x63\x61\x74\x65\x67\x6f\x72\x79","\x69\x63\x6f\x6e","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64"],k.prototype.dbSave=function(a){return{table:this.dbTable,fields:this.dbFields,values:{type:a.asset.dapp.type,name:a.asset.dapp.name,description:a.asset.dapp.description||null,tags:a.asset.dapp.tags||null,link:a.asset.dapp.link||null,icon:a.asset.dapp.icon||null,category:a.asset.dapp.category,transactionId:a.id}}},k.prototype.afterSave=function(a,b){return i.network.io.sockets.emit("\x64\x61\x70\x70\x73\x2f\x63\x68\x61\x6e\x67\x65",{}),setImmediate(b)},k.prototype.ready=function(a,b){return Array.isArray(b.multisignatures)&&b.multisignatures.length?Array.isArray(a.signatures)?a.signatures.length>=b.multimin:!1:!0},a.exports=k}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x64\x65\x6c\x65\x67\x61\x74\x65\x2e\x6a\x73",function(a,b,c){"use strict";function g(){}var e,f,d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73");g.prototype.bind=function(a){e=a.modules,f=a.library},g.prototype.create=function(a,b){return b.recipientId=null,b.amount=0,b.asset.delegate={username:a.username,publicKey:a.sender.publicKey},b.asset.delegate.username&&(b.asset.delegate.username=b.asset.delegate.username.toLowerCase().trim()),b},g.prototype.calculateFee=function(){return d.fees.delegate},g.prototype.verify=function(a,b,c){var d,f,g;return a.recipientId?setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x63\x69\x70\x69\x65\x6e\x74"):0!==a.amount?setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x6d\x6f\x75\x6e\x74"):b.isDelegate?setImmediate(c,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x69\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x61\x20\x64\x65\x6c\x65\x67\x61\x74\x65"):a.asset&&a.asset.delegate?a.asset.delegate.username?a.asset.delegate.username!==a.asset.delegate.username.toLowerCase()?setImmediate(c,"\x55\x73\x65\x72\x6e\x61\x6d\x65\x20\x6d\x75\x73\x74\x20\x62\x65\x20\x6c\x6f\x77\x65\x72\x63\x61\x73\x65"):(d=/^[0-9]{1,21}[L|l]$/g,f=/^[a-z0-9!@$&_.]+$/g,g=(a.asset.delegate.username+"").toLowerCase().trim(),""===g?setImmediate(c,"\x45\x6d\x70\x74\x79\x20\x75\x73\x65\x72\x6e\x61\x6d\x65"):g.length>20?setImmediate(c,"\x55\x73\x65\x72\x6e\x61\x6d\x65\x20\x69\x73\x20\x74\x6f\x6f\x20\x6c\x6f\x6e\x67\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x32\x30\x20\x63\x68\x61\x72\x61\x63\x74\x65\x72\x73"):d.test(g)?setImmediate(c,"\x55\x73\x65\x72\x6e\x61\x6d\x65\x20\x63\x61\x6e\x20\x6e\x6f\x74\x20\x62\x65\x20\x61\x20\x70\x6f\x74\x65\x6e\x74\x69\x61\x6c\x20\x61\x64\x64\x72\x65\x73\x73"):f.test(g)?void e.accounts.getAccount({username:g},function(b,d){return b?setImmediate(c,b):d?setImmediate(c,"\x55\x73\x65\x72\x6e\x61\x6d\x65\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x78\x69\x73\x74\x73"):setImmediate(c,null,a)}):setImmediate(c,"\x55\x73\x65\x72\x6e\x61\x6d\x65\x20\x63\x61\x6e\x20\x6f\x6e\x6c\x79\x20\x63\x6f\x6e\x74\x61\x69\x6e\x20\x61\x6c\x70\x68\x61\x6e\x75\x6d\x65\x72\x69\x63\x20\x63\x68\x61\x72\x61\x63\x74\x65\x72\x73\x20\x77\x69\x74\x68\x20\x74\x68\x65\x20\x65\x78\x63\x65\x70\x74\x69\x6f\x6e\x20\x6f\x66\x20\x21\x40\x24\x26\x5f\x2e")):setImmediate(c,"\x55\x73\x65\x72\x6e\x61\x6d\x65\x20\x69\x73\x20\x75\x6e\x64\x65\x66\x69\x6e\x65\x64"):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x73\x73\x65\x74")},g.prototype.process=function(a,b,c){return setImmediate(c,null,a)},g.prototype.getBytes=function(a){if(!a.asset.delegate.username)return null;var b;try{b=new Buffer(a.asset.delegate.username,"\x75\x74\x66\x38")}catch(c){throw c}return b},g.prototype.apply=function(a,b,c,d){var f={address:c.address,u_isDelegate:0,isDelegate:1,vote:0};a.asset.delegate.username&&(f.u_username=null,f.username=a.asset.delegate.username),e.accounts.setAccountAndGet(f,d)},g.prototype.undo=function(a,b,c,d){var f={address:c.address,u_isDelegate:1,isDelegate:0,vote:0};!c.nameexist&&a.asset.delegate.username&&(f.username=null,f.u_username=a.asset.delegate.username),e.accounts.setAccountAndGet(f,d)},g.prototype.applyUnconfirmed=function(a,b,c){function d(){var d={address:b.address,u_isDelegate:1,isDelegate:0};a.asset.delegate.username&&(d.username=null,d.u_username=a.asset.delegate.username),e.accounts.setAccountAndGet(d,c)}return b.u_isDelegate?setImmediate(c,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x69\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x61\x20\x64\x65\x6c\x65\x67\x61\x74\x65"):void e.accounts.getAccount({u_username:a.asset.delegate.username},function(a,b){return a?setImmediate(c,a):b?setImmediate(c,"\x55\x73\x65\x72\x6e\x61\x6d\x65\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x65\x78\x69\x73\x74\x73"):void d()})},g.prototype.undoUnconfirmed=function(a,b,c){var d={address:b.address,u_isDelegate:0,isDelegate:0};a.asset.delegate.username&&(d.username=null,d.u_username=null),e.accounts.setAccountAndGet(d,c)},g.prototype.schema={id:"\x44\x65\x6c\x65\x67\x61\x74\x65",type:"\x6f\x62\x6a\x65\x63\x74",properties:{publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"]},g.prototype.objectNormalize=function(a){var b=f.schema.validate(a.asset.delegate,g.prototype.schema);if(!b)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");return a},g.prototype.dbRead=function(a){if(a.d_username){var b={username:a.d_username,publicKey:a.t_senderPublicKey,address:a.t_senderId};return{delegate:b}}return null},g.prototype.dbTable="\x64\x65\x6c\x65\x67\x61\x74\x65\x73",g.prototype.dbFields=["\x75\x73\x65\x72\x6e\x61\x6d\x65","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64"],g.prototype.dbSave=function(a){return{table:this.dbTable,fields:this.dbFields,values:{username:a.asset.delegate.username,transactionId:a.id}}},g.prototype.ready=function(a,b){return Array.isArray(b.multisignatures)&&b.multisignatures.length?Array.isArray(a.signatures)?a.signatures.length>=b.multimin:!1:!0},a.exports=g}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x69\x6e\x54\x72\x61\x6e\x73\x66\x65\x72\x2e\x6a\x73",function(a,b,c){"use strict";function i(){}var f,g,h,d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),e=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x64\x61\x70\x70\x73\x2e\x6a\x73");i.prototype.bind=function(a){f=a.modules,g=a.library,h=a.shared},i.prototype.create=function(a,b){return b.recipientId=null,b.amount=a.amount,b.asset.inTransfer={dappId:a.dappId},b},i.prototype.calculateFee=function(){return d.fees.send},i.prototype.verify=function(a,b,c){return a.recipientId?setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x63\x69\x70\x69\x65\x6e\x74"):a.amount?a.asset&&a.asset.inTransfer?void g.db.one(e.countByTransactionId,{id:a.asset.inTransfer.dappId}).then(function(b){return 0===b.count?setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64\x3a\x20"+a.asset.inTransfer.dappId):setImmediate(c)})["\x63\x61\x74\x63\x68"](function(a){return setImmediate(c,a)}):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x73\x73\x65\x74"):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x6d\x6f\x75\x6e\x74")},i.prototype.process=function(a,b,c){return setImmediate(c,null,a)},i.prototype.getBytes=function(a){var b,c;try{b=new Buffer([]),c=new Buffer(a.asset.inTransfer.dappId,"\x75\x74\x66\x38"),b=Buffer.concat([b,c])}catch(d){throw d}return b},i.prototype.apply=function(a,b,c,d){h.getGenesis({id:a.asset.inTransfer.dappId},function(c,e){return c?setImmediate(d,c):void f.accounts.mergeAccountAndGet({address:e.authorId,balance:a.amount,u_balance:a.amount,blockId:b.id,round:f.rounds.calc(b.height)},function(a){return setImmediate(d,a)})})},i.prototype.undo=function(a,b,c,d){h.getGenesis({id:a.asset.inTransfer.dappId},function(c,e){return c?setImmediate(d,c):void f.accounts.mergeAccountAndGet({address:e.authorId,balance:-a.amount,u_balance:-a.amount,blockId:b.id,round:f.rounds.calc(b.height)},function(a){return setImmediate(d,a)})})},i.prototype.applyUnconfirmed=function(a,b,c){return setImmediate(c)},i.prototype.undoUnconfirmed=function(a,b,c){return setImmediate(c)},i.prototype.schema={id:"\x49\x6e\x54\x72\x61\x6e\x73\x66\x65\x72",object:!0,properties:{dappId:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x64\x61\x70\x70\x49\x64"]},i.prototype.objectNormalize=function(a){var b=g.schema.validate(a.asset.inTransfer,i.prototype.schema);if(!b)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x69\x6e\x54\x72\x61\x6e\x73\x66\x65\x72\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");return a},i.prototype.dbRead=function(a){if(a.in_dappId){var b={dappId:a.in_dappId};return{inTransfer:b}}return null},i.prototype.dbTable="\x69\x6e\x74\x72\x61\x6e\x73\x66\x65\x72",i.prototype.dbFields=["\x64\x61\x70\x70\x49\x64","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64"],i.prototype.dbSave=function(a){return{table:this.dbTable,fields:this.dbFields,values:{dappId:a.asset.inTransfer.dappId,transactionId:a.id}}},i.prototype.afterSave=function(a,b){return setImmediate(b)},i.prototype.ready=function(a,b){return Array.isArray(b.multisignatures)&&b.multisignatures.length?Array.isArray(a.signatures)?a.signatures.length>=b.multimin:!1:!0},a.exports=i}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x2e\x6a\x73",function(a,b,c){"use strict";function k(){}var h,i,d=c("\x61\x73\x79\x6e\x63"),e=c("\x62\x79\x74\x65\x62\x75\x66\x66\x65\x72"),f=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),g=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x69\x66\x66\x2e\x6a\x73"),j={};j.unconfirmedSignatures={},k.prototype.bind=function(a){h=a.modules,i=a.library},k.prototype.create=function(a,b){return b.recipientId=null,b.amount=0,b.asset.multisignature={min:a.min,keysgroup:a.keysgroup,lifetime:a.lifetime},b},k.prototype.calculateFee=function(a){return(a.asset.multisignature.keysgroup.length+1)*f.fees.multisignature},k.prototype.verify=function(a,b,c){var e,f,g;if(!a.asset||!a.asset.multisignature)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x73\x73\x65\x74");if(!Array.isArray(a.asset.multisignature.keysgroup))return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70\x2e\x20\x4d\x75\x73\x74\x20\x62\x65\x20\x61\x6e\x20\x61\x72\x72\x61\x79");if(0===a.asset.multisignature.keysgroup.length)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70\x2e\x20\x4d\x75\x73\x74\x20\x6e\x6f\x74\x20\x62\x65\x20\x65\x6d\x70\x74\x79");if(a.asset.multisignature.min<=1||a.asset.multisignature.min>16)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6d\x69\x6e\x2e\x20\x4d\x75\x73\x74\x20\x62\x65\x20\x62\x65\x74\x77\x65\x65\x6e\x20\x31\x20\x61\x6e\x64\x20\x31\x36");if(a.asset.multisignature.min>a.asset.multisignature.keysgroup.length+1)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6d\x69\x6e\x2e\x20\x4d\x75\x73\x74\x20\x62\x65\x20\x6c\x65\x73\x73\x20\x74\x68\x61\x6e\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70\x20\x73\x69\x7a\x65");if(a.asset.multisignature.lifetime<1||a.asset.multisignature.lifetime>72)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6c\x69\x66\x65\x74\x69\x6d\x65\x2e\x20\x4d\x75\x73\x74\x20\x62\x65\x20\x62\x65\x74\x77\x65\x65\x6e\x20\x31\x20\x61\x6e\x64\x20\x37\x32");if(this.ready(a,b))try{for(e=0;e<a.asset.multisignature.keysgroup.length;e++){if(f=!1,a.signatures)for(g=0;g<a.signatures.length&&!f;g++)f="\x2d"!==a.asset.multisignature.keysgroup[e][0]&&"\x2b"!==a.asset.multisignature.keysgroup[e][0]?!1:i.logic.transaction.verifySignature(a,a.asset.multisignature.keysgroup[e].substring(1),a.signatures[g]);if(!f)return setImmediate(c,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x69\x6e\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70")}}catch(h){return i.logger.error(h.stack),setImmediate(c,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x69\x6e\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70")}return-1!==a.asset.multisignature.keysgroup.indexOf("\x2b"+b.publicKey)?setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70\x2e\x20\x43\x61\x6e\x20\x6e\x6f\x74\x20\x63\x6f\x6e\x74\x61\x69\x6e\x20\x73\x65\x6e\x64\x65\x72"):void d.eachSeries(a.asset.multisignature.keysgroup,function(a,b){var e,c=a[0],d=a.slice(1);if("\x2b"!==c)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6d\x61\x74\x68\x20\x6f\x70\x65\x72\x61\x74\x6f\x72\x20\x69\x6e\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70");try{if(e=new Buffer(d,"\x68\x65\x78"),32!==e.length)return setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79\x20\x69\x6e\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70")}catch(f){return i.logger.error(f.stack),setImmediate(b,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79\x20\x69\x6e\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70")}return setImmediate(b)},function(b){if(b)return setImmediate(c,b);var d=a.asset.multisignature.keysgroup.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[]);return d.length!==a.asset.multisignature.keysgroup.length?setImmediate(c,"\x45\x6e\x63\x6f\x75\x6e\x74\x65\x72\x65\x64\x20\x64\x75\x70\x6c\x69\x63\x61\x74\x65\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79\x20\x69\x6e\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6b\x65\x79\x73\x67\x72\x6f\x75\x70"):setImmediate(c,null,a)})},k.prototype.process=function(a,b,c){return setImmediate(c,null,a)},k.prototype.getBytes=function(a){var f,c=new Buffer(a.asset.multisignature.keysgroup.join(""),"\x75\x74\x66\x38"),d=new e(2+c.length,!0);for(d.writeByte(a.asset.multisignature.min),d.writeByte(a.asset.multisignature.lifetime),f=0;f<c.length;f++)d.writeByte(c[f]);return d.flip(),d.toBuffer()},k.prototype.apply=function(a,b,c,e){j.unconfirmedSignatures[c.address]=!1,this.scope.account.merge(c.address,{multisignatures:a.asset.multisignature.keysgroup,multimin:a.asset.multisignature.min,multilifetime:a.asset.multisignature.lifetime,blockId:b.id,round:h.rounds.calc(b.height)},function(b){return b?setImmediate(e,b):void d.eachSeries(a.asset.multisignature.keysgroup,function(a,b){var c=a.substring(1),d=h.accounts.generateAddressByPublicKey(c);h.accounts.setAccountAndGet({address:d,publicKey:c},function(a){return setImmediate(b,a)})},e)})},k.prototype.undo=function(a,b,c,d){var e=g.reverse(a.asset.multisignature.keysgroup);j.unconfirmedSignatures[c.address]=!0,this.scope.account.merge(c.address,{multisignatures:e,multimin:-a.asset.multisignature.min,multilifetime:-a.asset.multisignature.lifetime,blockId:b.id,round:h.rounds.calc(b.height)},function(a){return setImmediate(d,a)})},k.prototype.applyUnconfirmed=function(a,b,c){return j.unconfirmedSignatures[b.address]?setImmediate(c,"\x53\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x6f\x6e\x20\x74\x68\x69\x73\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x69\x73\x20\x70\x65\x6e\x64\x69\x6e\x67\x20\x63\x6f\x6e\x66\x69\x72\x6d\x61\x74\x69\x6f\x6e"):Array.isArray(b.multisignatures)&&b.multisignatures.length?setImmediate(c,"\x41\x63\x63\x6f\x75\x6e\x74\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x68\x61\x73\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x65\x6e\x61\x62\x6c\x65\x64"):(j.unconfirmedSignatures[b.address]=!0,void this.scope.account.merge(b.address,{u_multisignatures:a.asset.multisignature.keysgroup,u_multimin:a.asset.multisignature.min,u_multilifetime:a.asset.multisignature.lifetime},function(){return setImmediate(c)}))},k.prototype.undoUnconfirmed=function(a,b,c){var d=g.reverse(a.asset.multisignature.keysgroup);j.unconfirmedSignatures[b.address]=!1,
this.scope.account.merge(b.address,{u_multisignatures:d,u_multimin:-a.asset.multisignature.min,u_multilifetime:-a.asset.multisignature.lifetime},function(a){return setImmediate(c,a)})},k.prototype.schema={id:"\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65",type:"\x6f\x62\x6a\x65\x63\x74",properties:{min:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:15},keysgroup:{type:"\x61\x72\x72\x61\x79",minLength:1,maxLength:16},lifetime:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:72}},required:["\x6d\x69\x6e","\x6b\x65\x79\x73\x67\x72\x6f\x75\x70","\x6c\x69\x66\x65\x74\x69\x6d\x65"]},k.prototype.objectNormalize=function(a){var b=i.schema.validate(a.asset.multisignature,k.prototype.schema);if(!b)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");return a},k.prototype.dbRead=function(a){if(a.m_keysgroup){var b={min:a.m_min,lifetime:a.m_lifetime};return"\x73\x74\x72\x69\x6e\x67"==typeof a.m_keysgroup?b.keysgroup=a.m_keysgroup.split("\x2c"):b.keysgroup=[],{multisignature:b}}return null},k.prototype.dbTable="\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",k.prototype.dbFields=["\x6d\x69\x6e","\x6c\x69\x66\x65\x74\x69\x6d\x65","\x6b\x65\x79\x73\x67\x72\x6f\x75\x70","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64"],k.prototype.dbSave=function(a){return{table:this.dbTable,fields:this.dbFields,values:{min:a.asset.multisignature.min,lifetime:a.asset.multisignature.lifetime,keysgroup:a.asset.multisignature.keysgroup.join("\x2c"),transactionId:a.id}}},k.prototype.afterSave=function(a,b){return i.network.io.sockets.emit("\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2f\x63\x68\x61\x6e\x67\x65",{}),setImmediate(b)},k.prototype.ready=function(a,b){return Array.isArray(a.signatures)?Array.isArray(b.multisignatures)&&b.multisignatures.length?a.signatures.length>=b.multimin:a.signatures.length===a.asset.multisignature.keysgroup.length:!1},a.exports=k}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x6f\x75\x74\x54\x72\x61\x6e\x73\x66\x65\x72\x2e\x6a\x73",function(a,b,c){"use strict";function i(){}var f,g,d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),e=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x64\x61\x70\x70\x73\x2e\x6a\x73"),h={};h.unconfirmedOutTansfers={},i.prototype.bind=function(a){f=a.modules,g=a.library},i.prototype.create=function(a,b){return b.recipientId=a.recipientId,b.amount=a.amount,b.asset.outTransfer={dappId:a.dappId,transactionId:a.transactionId},b},i.prototype.calculateFee=function(){return d.fees.send},i.prototype.verify=function(a,b,c){return a.recipientId?a.amount?a.asset&&a.asset.outTransfer?/^[0-9]+$/.test(a.asset.outTransfer.dappId)?/^[0-9]+$/.test(a.asset.outTransfer.transactionId)?setImmediate(c,null,a):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6f\x75\x74\x54\x72\x61\x6e\x73\x66\x65\x72\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64"):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6f\x75\x74\x54\x72\x61\x6e\x73\x66\x65\x72\x20\x64\x61\x70\x70\x49\x64"):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x73\x73\x65\x74"):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x6d\x6f\x75\x6e\x74"):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x63\x69\x70\x69\x65\x6e\x74")},i.prototype.process=function(a,b,c){g.db.one(e.countByTransactionId,{id:a.asset.outTransfer.dappId}).then(function(b){return 0===b.count?setImmediate(c,"\x41\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64\x3a\x20"+a.asset.outTransfer.dappId):h.unconfirmedOutTansfers[a.asset.outTransfer.transactionId]?setImmediate(c,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x69\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x70\x72\x6f\x63\x65\x73\x73\x65\x64\x3a\x20"+a.asset.outTransfer.transactionId):void g.db.one(e.countByOutTransactionId,{transactionId:a.asset.outTransfer.transactionId}).then(function(b){return b.count>0?setImmediate(c,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x69\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x3a\x20"+a.asset.outTransfer.transactionId):setImmediate(c,null,a)})["\x63\x61\x74\x63\x68"](function(a){return setImmediate(c,a)})})["\x63\x61\x74\x63\x68"](function(a){return setImmediate(c,a)})},i.prototype.getBytes=function(a){var b,c,d;try{b=new Buffer([]),c=new Buffer(a.asset.outTransfer.dappId,"\x75\x74\x66\x38"),d=new Buffer(a.asset.outTransfer.transactionId,"\x75\x74\x66\x38"),b=Buffer.concat([b,c,d])}catch(e){throw e}return b},i.prototype.apply=function(a,b,c,d){h.unconfirmedOutTansfers[a.asset.outTransfer.transactionId]=!1,f.accounts.setAccountAndGet({address:a.recipientId},function(c){return c?setImmediate(d,c):void f.accounts.mergeAccountAndGet({address:a.recipientId,balance:a.amount,u_balance:a.amount,blockId:b.id,round:f.rounds.calc(b.height)},function(a){return setImmediate(d,a)})})},i.prototype.undo=function(a,b,c,d){h.unconfirmedOutTansfers[a.asset.outTransfer.transactionId]=!0,f.accounts.setAccountAndGet({address:a.recipientId},function(c){return c?setImmediate(d,c):void f.accounts.mergeAccountAndGet({address:a.recipientId,balance:-a.amount,u_balance:-a.amount,blockId:b.id,round:f.rounds.calc(b.height)},function(a){return setImmediate(d,a)})})},i.prototype.applyUnconfirmed=function(a,b,c){return h.unconfirmedOutTansfers[a.asset.outTransfer.transactionId]=!0,setImmediate(c)},i.prototype.undoUnconfirmed=function(a,b,c){return h.unconfirmedOutTansfers[a.asset.outTransfer.transactionId]=!1,setImmediate(c)},i.prototype.schema={id:"\x4f\x75\x74\x54\x72\x61\x6e\x73\x66\x65\x72",object:!0,properties:{dappId:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},transactionId:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x64\x61\x70\x70\x49\x64","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64"]},i.prototype.objectNormalize=function(a){var b=g.schema.validate(a.asset.outTransfer,i.prototype.schema);if(!b)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x6f\x75\x74\x54\x72\x61\x6e\x73\x66\x65\x72\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");return a},i.prototype.dbRead=function(a){if(a.ot_dappId){var b={dappId:a.ot_dappId,transactionId:a.ot_outTransactionId};return{outTransfer:b}}return null},i.prototype.dbTable="\x6f\x75\x74\x74\x72\x61\x6e\x73\x66\x65\x72",i.prototype.dbFields=["\x64\x61\x70\x70\x49\x64","\x6f\x75\x74\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64"],i.prototype.dbSave=function(a){return{table:this.dbTable,fields:this.dbFields,values:{dappId:a.asset.outTransfer.dappId,outTransactionId:a.asset.outTransfer.transactionId,transactionId:a.id}}},i.prototype.afterSave=function(a,b){f.dapps.message(a.asset.outTransfer.dappId,{topic:"\x77\x69\x74\x68\x64\x72\x61\x77\x61\x6c",message:{transactionId:a.id}},function(a){return a&&g.logger.debug(a),setImmediate(b)})},i.prototype.ready=function(a,b){return Array.isArray(b.multisignatures)&&b.multisignatures.length?Array.isArray(a.signatures)?a.signatures.length>=b.multimin:!1:!0},a.exports=i}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x72\x6f\x75\x6e\x64\x2e\x6a\x73",function(a,b,c){"use strict";function g(a,b){this.scope=a,this.t=b}function h(a){this.roundFees=Math.floor(a.__private.feesByRound[a.round])||0,this.roundRewards=a.__private.rewardsByRound[a.round]||[]}var d=c("\x70\x67\x2d\x70\x72\x6f\x6d\x69\x73\x65"),e=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),f=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x72\x6f\x75\x6e\x64\x73\x2e\x6a\x73");g.prototype.mergeBlockGenerator=function(){return this.t.none(this.scope.modules.accounts.mergeAccountAndGet({publicKey:this.scope.block.generatorPublicKey,producedblocks:this.scope.backwards?-1:1,blockId:this.scope.block.id,round:this.scope.round}))},g.prototype.updateMissedBlocks=function(){return 0===this.scope.outsiders.length?this.t:this.t.none(f.updateMissedBlocks,[this.scope.outsiders])},g.prototype.getVotes=function(){return this.t.query(f.getVotes,{round:this.scope.round})},g.prototype.updateVotes=function(){var a=this;return a.getVotes(a.scope.round).then(function(b){var c=b.map(function(b){return d.as.format(f.updateVotes,{address:a.scope.modules.accounts.generateAddressByPublicKey(b.delegate),amount:Math.floor(b.amount)})}).join("");return c.length>0?a.t.none(c):a.t})},g.prototype.flushRound=function(){return this.t.none(f.flush,{round:this.scope.round})},g.prototype.truncateBlocks=function(){return this.t.none(f.truncateBlocks,{height:this.scope.block.height})},g.prototype.applyRound=function(){var c,d,e,a=new h(this.scope),b=[];for(c=0;c<this.scope.delegates.length;c++)d=this.scope.delegates[c],e=a.at(c),b.push(this.scope.modules.accounts.mergeAccountAndGet({publicKey:d,balance:this.scope.backwards?-e.balance:e.balance,u_balance:this.scope.backwards?-e.balance:e.balance,blockId:this.scope.block.id,round:this.scope.round,fees:this.scope.backwards?-e.fees:e.fees,rewards:this.scope.backwards?-e.rewards:e.rewards})),c===this.scope.delegates.length-1&&b.push(this.scope.modules.accounts.mergeAccountAndGet({publicKey:d,balance:this.scope.backwards?-e.feesRemaining:e.feesRemaining,u_balance:this.scope.backwards?-e.feesRemaining:e.feesRemaining,blockId:this.scope.block.id,round:this.scope.round,fees:this.scope.backwards?-e.feesRemaining:e.feesRemaining}));return this.t.none(b.join(""))},g.prototype.land=function(){return this.scope.__private.ticking=!0,this.updateVotes().then(this.updateMissedBlocks.bind(this)).then(this.flushRound.bind(this)).then(this.applyRound.bind(this)).then(this.updateVotes.bind(this)).then(this.flushRound.bind(this)).then(function(){return this.scope.__private.ticking=!1,this.t}.bind(this))},h.prototype.at=function(a){var b=Math.floor(this.roundFees/e.delegates),c=this.roundFees-b*e.delegates,d=Math.floor(this.roundRewards[a])||0;return{fees:b,feesRemaining:c,rewards:d,balance:b+d}},a.exports=g}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x2e\x6a\x73",function(a,b,c){"use strict";function h(){}var f,g,d=c("\x62\x79\x74\x65\x62\x75\x66\x66\x65\x72"),e=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73");h.prototype.bind=function(a){f=a.modules,g=a.library},h.prototype.create=function(a,b){return b.recipientId=null,b.amount=0,b.asset.signature={publicKey:a.secondKeypair.publicKey.toString("\x68\x65\x78")},b},h.prototype.calculateFee=function(){return e.fees.secondsignature},h.prototype.verify=function(a,b,c){if(!a.asset||!a.asset.signature)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x73\x73\x65\x74");if(0!==a.amount)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x6d\x6f\x75\x6e\x74");try{if(!a.asset.signature.publicKey||32!==new Buffer(a.asset.signature.publicKey,"\x68\x65\x78").length)return setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79")}catch(d){return g.logger.error(d.stack),setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79")}return setImmediate(c,null,a)},h.prototype.process=function(a,b,c){return setImmediate(c,null,a)},h.prototype.getBytes=function(a){var b,c,e;try{for(b=new d(32,!0),c=new Buffer(a.asset.signature.publicKey,"\x68\x65\x78"),e=0;e<c.length;e++)b.writeByte(c[e]);b.flip()}catch(f){throw f}return b.toBuffer()},h.prototype.apply=function(a,b,c,d){f.accounts.setAccountAndGet({address:c.address,secondSignature:1,u_secondSignature:0,secondPublicKey:a.asset.signature.publicKey},d)},h.prototype.undo=function(a,b,c,d){f.accounts.setAccountAndGet({address:c.address,secondSignature:0,u_secondSignature:1,secondPublicKey:null},d)},h.prototype.applyUnconfirmed=function(a,b,c){return b.u_secondSignature||b.secondSignature?setImmediate(c,"\x46\x61\x69\x6c\x65\x64\x20\x73\x65\x63\x6f\x6e\x64\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x3a\x20"+a.id):void f.accounts.setAccountAndGet({address:b.address,u_secondSignature:1},c)},h.prototype.undoUnconfirmed=function(a,b,c){f.accounts.setAccountAndGet({address:b.address,u_secondSignature:0},c)},h.prototype.schema={id:"\x53\x69\x67\x6e\x61\x74\x75\x72\x65",object:!0,properties:{publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"]},h.prototype.objectNormalize=function(a){var b=g.schema.validate(a.asset.signature,h.prototype.schema);if(!b)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");return a},h.prototype.dbRead=function(a){if(a.s_publicKey){var b={transactionId:a.t_id,publicKey:a.s_publicKey};return{signature:b}}return null},h.prototype.dbTable="\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",h.prototype.dbFields=["\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64","\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"],h.prototype.dbSave=function(a){var b;try{b=new Buffer(a.asset.signature.publicKey,"\x68\x65\x78")}catch(c){throw c}return{table:this.dbTable,fields:this.dbFields,values:{transactionId:a.id,publicKey:b}}},h.prototype.ready=function(a,b){return Array.isArray(b.multisignatures)&&b.multisignatures.length?Array.isArray(a.signatures)?a.signatures.length>=b.multimin:!1:!0},a.exports=h}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x2e\x6a\x73",function(a,b,c){"use strict";function n(a,b){return this.scope=a,m=this.scope.genesisblock,b?setImmediate(b,null,this):void 0}function o(a){return Math.floor(a/j.delegates)+(a%j.delegates>0?1:0)}var d=c("\x6c\x6f\x64\x61\x73\x68"),e=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x62\x69\x67\x6e\x75\x6d\x2e\x6a\x73"),f=c("\x62\x79\x74\x65\x62\x75\x66\x66\x65\x72"),g=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),h=c("\x63\x72\x79\x70\x74\x6f"),i=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x65\x78\x63\x65\x70\x74\x69\x6f\x6e\x73\x2e\x6a\x73"),j=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x6c\x6f\x74\x73\x2e\x6a\x73"),k=c("\x2e\x2e\x2f\x73\x71\x6c\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x6a\x73"),l={},m=null;l.types={},n.prototype.create=function(a){if(!l.types[a.type])throw"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type;if(!a.sender)throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x65\x6e\x64\x65\x72";if(!a.keypair)throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x6b\x65\x79\x70\x61\x69\x72";var b={type:a.type,amount:0,senderPublicKey:a.sender.publicKey,requesterPublicKey:a.requester?a.requester.publicKey.toString("\x68\x65\x78"):null,timestamp:j.getTime(),asset:{}};return b=l.types[b.type].create.call(this,a,b),b.signature=this.sign(a.keypair,b),a.sender.secondSignature&&a.secondKeypair&&(b.signSignature=this.sign(a.secondKeypair,b)),b.id=this.getId(b),b.fee=l.types[b.type].calculateFee.call(this,b,a.sender)||!1,b},n.prototype.attachAssetType=function(a,b){if(b&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.create&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.getBytes&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.calculateFee&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.verify&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.objectNormalize&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.dbRead&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.apply&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.undo&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.applyUnconfirmed&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.undoUnconfirmed&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.ready&&"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof b.process)return l.types[a]=b,b;throw"\x49\x6e\x76\x61\x6c\x69\x64\x20\x69\x6e\x73\x74\x61\x6e\x63\x65\x20\x69\x6e\x74\x65\x72\x66\x61\x63\x65"},n.prototype.sign=function(a,b){var c=this.getHash(b);return this.scope.ed.sign(c,a).toString("\x68\x65\x78")},n.prototype.multisign=function(a,b){var c=this.getBytes(b,!0,!0),d=h.createHash("\x73\x68\x61\x32\x35\x36").update(c).digest();return this.scope.ed.sign(d,a).toString("\x68\x65\x78")},n.prototype.getId=function(a){var d,f,b=this.getHash(a),c=new Buffer(8);for(d=0;8>d;d++)c[d]=b[7-d];return f=""+e.fromBuffer(c)},n.prototype.getHash=function(a){return h.createHash("\x73\x68\x61\x32\x35\x36").update(this.getBytes(a)).digest()},n.prototype.getBytes=function(a,b,c){var d,g,h,i,j,k,m,n,o;if(!l.types[a.type])throw"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type;try{for(g=l.types[a.type].getBytes.call(this,a,b,c),h=g?g.length:0,d=new f(213+h,!0),d.writeByte(a.type),d.writeInt(a.timestamp),j=new Buffer(a.senderPublicKey,"\x68\x65\x78"),i=0;i<j.length;i++)d.writeByte(j[i]);if(a.requesterPublicKey)for(k=new Buffer(a.requesterPublicKey,"\x68\x65\x78"),i=0;i<k.length;i++)d.writeByte(k[i]);if(a.recipientId)for(m=a.recipientId.slice(0,-1),m=e(m).toBuffer({size:8}),i=0;8>i;i++)d.writeByte(m[i]||0);else for(i=0;8>i;i++)d.writeByte(0);if(d.writeLong(a.amount),h>0)for(i=0;h>i;i++)d.writeByte(g[i]);if(!b&&a.signature)for(n=new Buffer(a.signature,"\x68\x65\x78"),i=0;i<n.length;i++)d.writeByte(n[i]);if(!c&&a.signSignature)for(o=new Buffer(a.signSignature,"\x68\x65\x78"),i=0;i<o.length;i++)d.writeByte(o[i]);d.flip()}catch(p){throw p}return d.toBuffer()},n.prototype.ready=function(a,b){if(!l.types[a.type])throw"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type;return b?l.types[a.type].ready.call(this,a,b):!1},n.prototype.process=function(a,b,c,d){if("\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof c&&(d=c),!l.types[a.type])return setImmediate(d,"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type);var e;try{e=this.getId(a)}catch(f){return this.scope.logger.error(f.stack),setImmediate(d,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x67\x65\x74\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x69\x64")}return a.id&&a.id!==e?setImmediate(d,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x69\x64"):(a.id=e,b?(a.senderId=b.address,a.requesterPublicKey&&b.multisignatures.indexOf(a.requesterPublicKey)<0?setImmediate(d,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79"):this.verifySignature(a,a.requesterPublicKey||a.senderPublicKey,a.signature)?void l.types[a.type].process.call(this,a,b,function(a,b){return a?setImmediate(d,a):void this.scope.db.one(k.countById,{id:b.id}).then(function(a){return a.count>0?setImmediate(d,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x69\x73\x20\x61\x6c\x72\x65\x61\x64\x79\x20\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x3a\x20"+b.id,b,!0):setImmediate(d,null,b)})["\x63\x61\x74\x63\x68"](function(a){return this.scope.logger.error(a.stack),setImmediate(d,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x23\x70\x72\x6f\x63\x65\x73\x73\x20\x65\x72\x72\x6f\x72")})}.bind(this)):setImmediate(d,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65")):setImmediate(d,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x73\x65\x6e\x64\x65\x72"))},n.prototype.verify=function(a,b,c,d){var k,m,n,o,p,e=!1,f=null;if("\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof c&&(d=c),!l.types[a.type])return setImmediate(d,"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type);if(!b)return setImmediate(d,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x73\x65\x6e\x64\x65\x72");if(b.publicKey&&b.publicKey!==a.senderPublicKey){if(f=["\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x65\x6e\x64\x65\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79\x3a",a.senderPublicKey,"\x65\x78\x70\x65\x63\x74\x65\x64\x3a",b.publicKey].join("\x20"),!(i.senderPublicKey.indexOf(a.id)>-1))return setImmediate(d,f);this.scope.logger.debug(f),this.scope.logger.debug(JSON.stringify(a))}if((a.senderId+"").toUpperCase()!==(b.address+"").toUpperCase())return setImmediate(d,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x73\x65\x6e\x64\x65\x72\x20\x61\x64\x64\x72\x65\x73\x73");if(a.requesterPublicKey&&b.multisignatures.indexOf(a.requesterPublicKey)<0)return setImmediate(d,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x70\x75\x62\x6c\x69\x63\x20\x6b\x65\x79");try{e=!1,e=this.verifySignature(a,a.requesterPublicKey||a.senderPublicKey,a.signature)}catch(h){return this.scope.logger.error(h.stack),setImmediate(d,""+h)}if(!e){if(f="\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65",!(i.signatures.indexOf(a.id)>-1))return setImmediate(d,f);this.scope.logger.debug(f),this.scope.logger.debug(JSON.stringify(a)),e=!0,f=null}if(c.secondSignature||b.secondSignature){try{e=!1,e=this.verifySecondSignature(a,c.secondPublicKey||b.secondPublicKey,a.signSignature)}catch(h){return setImmediate(d,""+h)}if(!e)return setImmediate(d,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x73\x65\x63\x6f\x6e\x64\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65")}if(a.signatures&&a.signatures.length&&(k=a.signatures.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[]),k.length!==a.signatures.length))return setImmediate(d,"\x45\x6e\x63\x6f\x75\x6e\x74\x65\x72\x65\x64\x20\x64\x75\x70\x6c\x69\x63\x61\x74\x65\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x20\x69\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e");if(m=b.multisignatures||b.u_multisignatures||[],0===m.length&&a.asset&&a.asset.multisignature&&a.asset.multisignature.keysgroup&&(m=a.asset.multisignature.keysgroup.map(function(a){return a.slice(1)})),a.requesterPublicKey&&m.push(a.senderPublicKey),a.signatures)for(n=0;n<a.signatures.length;n++){for(e=!1,o=0;o<m.length;o++)a.requesterPublicKey&&m[o]===a.requesterPublicKey||this.verifySignature(a,m[o],a.signatures[n])&&(e=!0);if(!e)return setImmediate(d,"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x65\x72\x69\x66\x79\x20\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65")}return p=l.types[a.type].calculateFee.call(this,a,b)||!1,p&&a.fee===p?a.amount<0||a.amount>g.totalAmount||(a.amount+"").indexOf("\x2e")>=0||(""+a.amount).indexOf("\x65")>=0?setImmediate(d,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x6d\x6f\x75\x6e\x74"):j.getSlotNumber(a.timestamp)>j.getSlotNumber()?setImmediate(d,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x69\x6d\x65\x73\x74\x61\x6d\x70"):void l.types[a.type].verify.call(this,a,b,function(a){return setImmediate(d,a)}):setImmediate(d,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x66\x65\x65")},n.prototype.verifySignature=function(a,b,c){var d,e;if(!l.types[a.type])throw"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type;if(!c)return!1;try{e=this.getBytes(a,!0,!0),d=this.verifyBytes(e,b,c)}catch(f){throw f}return d},n.prototype.verifySecondSignature=function(a,b,c){var d,e;if(!l.types[a.type])throw"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type;if(!c)return!1;try{e=this.getBytes(a,!1,!0),d=this.verifyBytes(e,b,c)}catch(f){throw f}return d},n.prototype.verifyBytes=function(a,b,c){var d,e,f,g,i,j;try{for(e=new Buffer(a.length),f=0;f<e.length;f++)e[f]=a[f];g=h.createHash("\x73\x68\x61\x32\x35\x36").update(e).digest(),i=new Buffer(c,"\x68\x65\x78"),j=new Buffer(b,"\x68\x65\x78"),d=this.scope.ed.verify(g,i||"\x20",j||"\x20")}catch(k){throw k}return d},n.prototype.apply=function(a,b,c,d){var f,g;return l.types[a.type]?this.ready(a,c)?(f=e(""+a.amount).plus(""+a.fee),g=e(""+c.balance).lessThan(f),a.blockId!==m.block.id&&g?setImmediate(d,["\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x65\x6e\x6f\x75\x67\x68\x20\x4c\x53\x4b\x3a",c.address,"\x62\x61\x6c\x61\x6e\x63\x65\x3a",e(c.u_balance||0).div(Math.pow(10,8))].join("\x20")):(f=f.toNumber(),void this.scope.account.merge(c.address,{balance:-f,blockId:b.id,round:o(b.height)},function(c,e){return c?setImmediate(d,c):void l.types[a.type].apply.call(this,a,b,e,function(a){return a?void this.scope.account.merge(e.address,{balance:f,blockId:b.id,round:o(b.height)},function(a){return setImmediate(d,a)}):setImmediate(d)}.bind(this))}.bind(this)))):setImmediate(d,"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x69\x73\x20\x6e\x6f\x74\x20\x72\x65\x61\x64\x79"):setImmediate(d,"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type)},n.prototype.undo=function(a,b,c,d){if(!l.types[a.type])return setImmediate(d,"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type);var e=a.amount+a.fee;this.scope.account.merge(c.address,{balance:e,blockId:b.id,round:o(b.height)},function(c,f){return c?setImmediate(d,c):void l.types[a.type].undo.call(this,a,b,f,function(a){return a?void this.scope.account.merge(f.address,{balance:e,blockId:b.id,round:o(b.height)},function(a){return setImmediate(d,a)}):setImmediate(d)}.bind(this))}.bind(this))},n.prototype.applyUnconfirmed=function(a,b,c,d){var f,g;return"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof c&&(d=c),l.types[a.type]?a.requesterPublicKey||!b.secondSignature||a.signSignature||a.blockId===m.block.id?!a.requesterPublicKey&&!b.secondSignature&&a.signSignature&&a.signSignature.length>0?setImmediate(d,"\x53\x65\x6e\x64\x65\x72\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x61\x20\x73\x65\x63\x6f\x6e\x64\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65"):a.requesterPublicKey&&c.secondSignature&&!a.signSignature?setImmediate(d,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x72\x65\x71\x75\x65\x73\x74\x65\x72\x20\x73\x65\x63\x6f\x6e\x64\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65"):a.requesterPublicKey&&!c.secondSignature&&a.signSignature&&a.signSignature.length>0?setImmediate(d,"\x52\x65\x71\x75\x65\x73\x74\x65\x72\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x61\x20\x73\x65\x63\x6f\x6e\x64\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65"):(f=e(""+a.amount).plus(""+a.fee),g=e(""+b.u_balance).lessThan(f),a.blockId!==m.block.id&&g?setImmediate(d,["\x41\x63\x63\x6f\x75\x6e\x74\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x68\x61\x76\x65\x20\x65\x6e\x6f\x75\x67\x68\x20\x4c\x53\x4b\x3a",b.address,"\x62\x61\x6c\x61\x6e\x63\x65\x3a",e(b.balance||0).div(Math.pow(10,8))].join("\x20")):(f=f.toNumber(),void this.scope.account.merge(b.address,{u_balance:-f},function(b,c){return b?setImmediate(d,b):void l.types[a.type].applyUnconfirmed.call(this,a,c,function(a){return a?void this.scope.account.merge(c.address,{u_balance:f},function(b){return setImmediate(d,b||a)}):setImmediate(d)}.bind(this))}.bind(this)))):setImmediate(d,"\x4d\x69\x73\x73\x69\x6e\x67\x20\x73\x65\x6e\x64\x65\x72\x20\x73\x65\x63\x6f\x6e\x64\x20\x73\x69\x67\x6e\x61\x74\x75\x72\x65"):setImmediate(d,"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type)},n.prototype.undoUnconfirmed=function(a,b,c){if(!l.types[a.type])return setImmediate(c,"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type);var d=a.amount+a.fee;this.scope.account.merge(b.address,{u_balance:d},function(b,e){return b?setImmediate(c,b):void l.types[a.type].undoUnconfirmed.call(this,a,e,function(a){return a?void this.scope.account.merge(e.address,{u_balance:-d},function(b){return setImmediate(c,b||a)}):setImmediate(c)}.bind(this))}.bind(this))},n.prototype.dbTable="\x74\x72\x73",n.prototype.dbFields=["\x69\x64","\x62\x6c\x6f\x63\x6b\x49\x64","\x74\x79\x70\x65","\x74\x69\x6d\x65\x73\x74\x61\x6d\x70","\x73\x65\x6e\x64\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79","\x72\x65\x71\x75\x65\x73\x74\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79","\x73\x65\x6e\x64\x65\x72\x49\x64","\x72\x65\x63\x69\x70\x69\x65\x6e\x74\x49\x64","\x61\x6d\x6f\x75\x6e\x74","\x66\x65\x65","\x73\x69\x67\x6e\x61\x74\x75\x72\x65","\x73\x69\x67\x6e\x53\x69\x67\x6e\x61\x74\x75\x72\x65","\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73"],n.prototype.dbSave=function(a){var b,c,d,e,g,h;if(!l.types[a.type])throw"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type;try{b=new Buffer(a.senderPublicKey,"\x68\x65\x78"),c=new Buffer(a.signature,"\x68\x65\x78"),d=a.signSignature?new Buffer(a.signSignature,"\x68\x65\x78"):null,e=a.requesterPublicKey?new Buffer(a.requesterPublicKey,"\x68\x65\x78"):null}catch(f){throw f}return g=[{table:this.dbTable,fields:this.dbFields,values:{id:a.id,blockId:a.blockId,type:a.type,timestamp:a.timestamp,senderPublicKey:b,requesterPublicKey:e,senderId:a.senderId,recipientId:a.recipientId||null,amount:a.amount,fee:a.fee,signature:c,signSignature:d,signatures:a.signatures?a.signatures.join("\x2c"):null}}],h=l.types[a.type].dbSave(a),h&&g.push(h),g},n.prototype.afterSave=function(a,b){var c=l.types[a.type];return c?"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof c.afterSave?c.afterSave.call(this,a,b):setImmediate(b):setImmediate(b,"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type)},n.prototype.schema={id:"\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67"},height:{type:"\x69\x6e\x74\x65\x67\x65\x72"},blockId:{type:"\x73\x74\x72\x69\x6e\x67"},type:{type:"\x69\x6e\x74\x65\x67\x65\x72"},timestamp:{type:"\x69\x6e\x74\x65\x67\x65\x72"},senderPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},requesterPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},senderId:{type:"\x73\x74\x72\x69\x6e\x67"},recipientId:{type:"\x73\x74\x72\x69\x6e\x67"},amount:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:g.totalAmount},fee:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:g.totalAmount},signature:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x73\x69\x67\x6e\x61\x74\x75\x72\x65"},signSignature:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x73\x69\x67\x6e\x61\x74\x75\x72\x65"},asset:{type:"\x6f\x62\x6a\x65\x63\x74"}},required:["\x74\x79\x70\x65","\x74\x69\x6d\x65\x73\x74\x61\x6d\x70","\x73\x65\x6e\x64\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79","\x73\x69\x67\x6e\x61\x74\x75\x72\x65"]},n.prototype.objectNormalize=function(a){var b,c;if(!l.types[a.type])throw"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+a.type;for(b in a)(null===a[b]||void 0===a[b])&&delete a[b];if(c=this.scope.schema.validate(a,n.prototype.schema),!c)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");try{a=l.types[a.type].objectNormalize.call(this,a)}catch(d){throw d}return a},n.prototype.dbRead=function(a){var b,c;if(a.t_id){if(b={id:a.t_id,height:a.b_height,blockId:a.b_id||a.t_blockId,type:parseInt(a.t_type),timestamp:parseInt(a.t_timestamp),senderPublicKey:a.t_senderPublicKey,requesterPublicKey:a.t_requesterPublicKey,senderId:a.t_senderId,recipientId:a.t_recipientId,amount:parseInt(a.t_amount),fee:parseInt(a.t_fee),signature:a.t_signature,signSignature:a.t_signSignature,signatures:a.t_signatures?a.t_signatures.split("\x2c"):[],
confirmations:parseInt(a.confirmations),asset:{}},!l.types[b.type])throw"\x55\x6e\x6b\x6e\x6f\x77\x6e\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x74\x79\x70\x65\x20"+b.type;return c=l.types[b.type].dbRead.call(this,a),c&&(b.asset=d.extend(b.asset,c)),b}return null},a.exports=n}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x74\x72\x61\x6e\x73\x66\x65\x72\x2e\x6a\x73",function(a,b,c){"use strict";function g(){}var e,f,d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73");g.prototype.bind=function(a){e=a.modules,f=a.library},g.prototype.create=function(a,b){return b.recipientId=a.recipientId,b.amount=a.amount,b},g.prototype.calculateFee=function(){return d.fees.send},g.prototype.verify=function(a,b,c){var d=/^[0-9]{1,21}[L|l]$/g;return a.recipientId&&d.test(a.recipientId)?a.amount<=0?setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x6d\x6f\x75\x6e\x74"):setImmediate(c,null,a):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x63\x69\x70\x69\x65\x6e\x74")},g.prototype.process=function(a,b,c){return setImmediate(c,null,a)},g.prototype.getBytes=function(){return null},g.prototype.apply=function(a,b,c,d){e.accounts.setAccountAndGet({address:a.recipientId},function(c){return c?setImmediate(d,c):void e.accounts.mergeAccountAndGet({address:a.recipientId,balance:a.amount,u_balance:a.amount,blockId:b.id,round:e.rounds.calc(b.height)},function(a){return setImmediate(d,a)})})},g.prototype.undo=function(a,b,c,d){e.accounts.setAccountAndGet({address:a.recipientId},function(c){return c?setImmediate(d,c):void e.accounts.mergeAccountAndGet({address:a.recipientId,balance:-a.amount,u_balance:-a.amount,blockId:b.id,round:e.rounds.calc(b.height)},function(a){return setImmediate(d,a)})})},g.prototype.applyUnconfirmed=function(a,b,c){return setImmediate(c)},g.prototype.undoUnconfirmed=function(a,b,c){return setImmediate(c)},g.prototype.objectNormalize=function(a){return delete a.blockId,a},g.prototype.dbRead=function(){return null},g.prototype.dbSave=function(){return null},g.prototype.ready=function(a,b){return Array.isArray(b.multisignatures)&&b.multisignatures.length?Array.isArray(a.signatures)?a.signatures.length>=b.multimin:!1:!0},a.exports=g}),c.register("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x76\x6f\x74\x65\x2e\x6a\x73",function(a,b,c){"use strict";function i(){}var g,h,d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73"),e=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x65\x78\x63\x65\x70\x74\x69\x6f\x6e\x73\x2e\x6a\x73"),f=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x69\x66\x66\x2e\x6a\x73");i.prototype.bind=function(a){g=a.modules,h=a.library},i.prototype.create=function(a,b){return b.recipientId=a.sender.address,b.asset.votes=a.votes,b},i.prototype.calculateFee=function(){return d.fees.vote},i.prototype.verify=function(a,b,c){return a.recipientId!==a.senderId?setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x72\x65\x63\x69\x70\x69\x65\x6e\x74"):a.asset&&a.asset.votes?Array.isArray(a.asset.votes)?a.asset.votes.length?a.asset.votes&&a.asset.votes.length>33?setImmediate(c,"\x56\x6f\x74\x69\x6e\x67\x20\x6c\x69\x6d\x69\x74\x20\x65\x78\x63\x65\x65\x64\x65\x64\x2e\x20\x4d\x61\x78\x69\x6d\x75\x6d\x20\x69\x73\x20\x33\x33\x20\x76\x6f\x74\x65\x73\x20\x70\x65\x72\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e"):void g.delegates.checkDelegates(a.senderPublicKey,a.asset.votes,function(b){return b&&e.votes.indexOf(a.id)>-1&&(h.logger.debug(b),h.logger.debug(JSON.stringify(a)),b=null),setImmediate(c,b,a)}):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x76\x6f\x74\x65\x73\x2e\x20\x4d\x75\x73\x74\x20\x6e\x6f\x74\x20\x62\x65\x20\x65\x6d\x70\x74\x79"):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x76\x6f\x74\x65\x73\x2e\x20\x4d\x75\x73\x74\x20\x62\x65\x20\x61\x6e\x20\x61\x72\x72\x61\x79"):setImmediate(c,"\x49\x6e\x76\x61\x6c\x69\x64\x20\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x20\x61\x73\x73\x65\x74")},i.prototype.process=function(a,b,c){return setImmediate(c,null,a)},i.prototype.getBytes=function(a){var b;try{b=a.asset.votes?new Buffer(a.asset.votes.join(""),"\x75\x74\x66\x38"):null}catch(c){throw c}return b},i.prototype.apply=function(a,b,c,d){this.scope.account.merge(c.address,{delegates:a.asset.votes,blockId:b.id,round:g.rounds.calc(b.height)},function(a){return setImmediate(d,a)})},i.prototype.undo=function(a,b,c,d){if(null===a.asset.votes)return setImmediate(d);var e=f.reverse(a.asset.votes);this.scope.account.merge(c.address,{delegates:e,blockId:b.id,round:g.rounds.calc(b.height)},function(a){return setImmediate(d,a)})},i.prototype.applyUnconfirmed=function(a,b,c){g.delegates.checkUnconfirmedDelegates(a.senderPublicKey,a.asset.votes,function(d){if(d){if(!(e.votes.indexOf(a.id)>-1))return setImmediate(c,d);h.logger.debug(d),h.logger.debug(JSON.stringify(a)),d=null}this.scope.account.merge(b.address,{u_delegates:a.asset.votes},function(a){return setImmediate(c,a)})}.bind(this))},i.prototype.undoUnconfirmed=function(a,b,c){if(null===a.asset.votes)return setImmediate(c);var d=f.reverse(a.asset.votes);this.scope.account.merge(b.address,{u_delegates:d},function(a){return setImmediate(c,a)})},i.prototype.schema={id:"\x56\x6f\x74\x65",type:"\x6f\x62\x6a\x65\x63\x74",properties:{votes:{type:"\x61\x72\x72\x61\x79",minLength:1,maxLength:d.activeDelegates,uniqueItems:!0}},required:["\x76\x6f\x74\x65\x73"]},i.prototype.objectNormalize=function(a){var b=h.schema.validate(a.asset,i.prototype.schema);if(!b)throw"\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x76\x61\x6c\x69\x64\x61\x74\x65\x20\x76\x6f\x74\x65\x20\x73\x63\x68\x65\x6d\x61\x3a\x20"+this.scope.schema.getLastErrors().map(function(a){return a.message}).join("\x2c\x20");return a},i.prototype.dbRead=function(a){if(a.v_votes){var b=a.v_votes.split("\x2c");return{votes:b}}return null},i.prototype.dbTable="\x76\x6f\x74\x65\x73",i.prototype.dbFields=["\x76\x6f\x74\x65\x73","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64"],i.prototype.dbSave=function(a){return{table:this.dbTable,fields:this.dbFields,values:{votes:Array.isArray(a.asset.votes)?a.asset.votes.join("\x2c"):null,transactionId:a.id}}},i.prototype.ready=function(a,b){return Array.isArray(b.multisignatures)&&b.multisignatures.length?Array.isArray(a.signatures)?a.signatures.length>=b.multimin:!1:!0},a.exports=i}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x6a\x73",function(a){"use strict";a.exports={open:{id:"\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x6f\x70\x65\x6e\x41\x63\x63\x6f\x75\x6e\x74",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100}},required:["\x73\x65\x63\x72\x65\x74"]},getBalance:{id:"\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x67\x65\x74\x42\x61\x6c\x61\x6e\x63\x65",type:"\x6f\x62\x6a\x65\x63\x74",properties:{address:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x61\x64\x64\x72\x65\x73\x73"]},getPublicKey:{id:"\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x67\x65\x74\x50\x75\x62\x6c\x69\x63\x6b\x65\x79",type:"\x6f\x62\x6a\x65\x63\x74",properties:{address:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x61\x64\x64\x72\x65\x73\x73"]},generatePublicKey:{id:"\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x67\x65\x6e\x65\x72\x61\x74\x65\x50\x75\x62\x6c\x69\x63\x6b\x65\x79",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x73\x65\x63\x72\x65\x74"]},getDelegates:{id:"\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x67\x65\x74\x44\x65\x6c\x65\x67\x61\x74\x65\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{address:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x61\x64\x64\x72\x65\x73\x73"]},addDelegates:{id:"\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x61\x64\x64\x44\x65\x6c\x65\x67\x61\x74\x65\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},secondSecret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}}},getAccount:{id:"\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x67\x65\x74\x41\x63\x63\x6f\x75\x6e\x74",type:"\x6f\x62\x6a\x65\x63\x74",properties:{address:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x61\x64\x64\x72\x65\x73\x73"]},top:{id:"\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x74\x6f\x70",type:"\x6f\x62\x6a\x65\x63\x74",properties:{limit:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:100},offset:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0}}}}}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x62\x6c\x6f\x63\x6b\x73\x2e\x6a\x73",function(a,b,c){"use strict";var d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73");a.exports={loadBlocksFromPeer:{id:"\x62\x6c\x6f\x63\x6b\x73\x2e\x6c\x6f\x61\x64\x42\x6c\x6f\x63\x6b\x73\x46\x72\x6f\x6d\x50\x65\x65\x72",type:"\x61\x72\x72\x61\x79"},getBlock:{id:"\x62\x6c\x6f\x63\x6b\x73\x2e\x67\x65\x74\x42\x6c\x6f\x63\x6b",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x69\x64"]},getBlocks:{id:"\x62\x6c\x6f\x63\x6b\x73\x2e\x67\x65\x74\x42\x6c\x6f\x63\x6b\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{limit:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:100},orderBy:{type:"\x73\x74\x72\x69\x6e\x67"},offset:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},generatorPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},totalAmount:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:d.totalAmount},totalFee:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:d.totalAmount},reward:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},previousBlock:{type:"\x73\x74\x72\x69\x6e\x67"},height:{type:"\x69\x6e\x74\x65\x67\x65\x72"}}}}}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x64\x61\x70\x70\x73\x2e\x6a\x73",function(a,b,c){"use strict";var d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73");a.exports={put:{id:"\x64\x61\x70\x70\x73\x2e\x70\x75\x74",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},secondSecret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},category:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:8},name:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:32},description:{type:"\x73\x74\x72\x69\x6e\x67",minLength:0,maxLength:160},tags:{type:"\x73\x74\x72\x69\x6e\x67",minLength:0,maxLength:160},type:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},link:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:2e3},icon:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:2e3}},required:["\x73\x65\x63\x72\x65\x74","\x74\x79\x70\x65","\x6e\x61\x6d\x65","\x63\x61\x74\x65\x67\x6f\x72\x79"]},get:{id:"\x64\x61\x70\x70\x73\x2e\x67\x65\x74",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x69\x64"]},list:{id:"\x64\x61\x70\x70\x73\x2e\x6c\x69\x73\x74",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:20},category:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},name:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:32},type:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},link:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:2e3},icon:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:2e3},limit:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:100},offset:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},orderBy:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}}},launch:{id:"\x64\x61\x70\x70\x73\x2e\x6c\x61\x75\x6e\x63\x68",type:"\x6f\x62\x6a\x65\x63\x74",properties:{params:{type:"\x61\x72\x72\x61\x79",minLength:1},id:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},master:{type:"\x73\x74\x72\x69\x6e\x67",minLength:0}},required:["\x69\x64"]},addTransactions:{id:"\x64\x61\x70\x70\x73\x2e\x61\x64\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},amount:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:d.totalAmount},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},secondSecret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},dappId:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:20},multisigAccountPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x73\x65\x63\x72\x65\x74","\x61\x6d\x6f\x75\x6e\x74","\x64\x61\x70\x70\x49\x64"]},sendWithdrawal:{id:"\x64\x61\x70\x70\x73\x2e\x73\x65\x6e\x64\x57\x69\x74\x68\x64\x72\x61\x77\x61\x6c",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},amount:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:d.totalAmount},recipientId:{type:"\x73\x74\x72\x69\x6e\x67",minLength:2,maxLength:22},secondSecret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},dappId:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:20},transactionId:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:20},multisigAccountPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x73\x65\x63\x72\x65\x74","\x72\x65\x63\x69\x70\x69\x65\x6e\x74\x49\x64","\x61\x6d\x6f\x75\x6e\x74","\x64\x61\x70\x70\x49\x64","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64"]},search:{id:"\x64\x61\x70\x70\x73\x2e\x73\x65\x61\x72\x63\x68",type:"\x6f\x62\x6a\x65\x63\x74",properties:{q:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},category:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:8},installed:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:1}},required:["\x71"]},install:{id:"\x64\x61\x70\x70\x73\x2e\x69\x6e\x73\x74\x61\x6c\x6c",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},master:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x69\x64"]},uninstall:{id:"\x64\x61\x70\x70\x73\x2e\x75\x6e\x69\x6e\x73\x74\x61\x6c\x6c",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},master:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x69\x64"]},stop:{id:"\x64\x61\x70\x70\x73\x2e\x73\x74\x6f\x70",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},master:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x69\x64"]}}}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x6a\x73",function(a,b,c){"use strict";var d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73");a.exports={enableForging:{id:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x65\x6e\x61\x62\x6c\x65\x46\x6f\x72\x67\x69\x6e\x67",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x73\x65\x63\x72\x65\x74"]},disableForging:{id:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x64\x69\x73\x61\x62\x6c\x65\x46\x6f\x72\x67\x69\x6e\x67",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x73\x65\x63\x72\x65\x74"]},forgingStatus:{id:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x66\x6f\x72\x67\x69\x6e\x67\x53\x74\x61\x74\x75\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"]},getDelegate:{id:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x67\x65\x74\x44\x65\x6c\x65\x67\x61\x74\x65",type:"\x6f\x62\x6a\x65\x63\x74",properties:{publicKey:{type:"\x73\x74\x72\x69\x6e\x67"},username:{type:"\x73\x74\x72\x69\x6e\x67"}}},search:{id:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x73\x65\x61\x72\x63\x68",type:"\x6f\x62\x6a\x65\x63\x74",properties:{q:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:20},limit:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:100}},required:["\x71"]},getVoters:{id:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x67\x65\x74\x56\x6f\x74\x65\x72\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"]},getDelegates:{id:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x67\x65\x74\x44\x65\x6c\x65\x67\x61\x74\x65\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{orderBy:{type:"\x73\x74\x72\x69\x6e\x67"},limit:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:d.activeDelegates},offset:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0}}},getForgedByAccount:{id:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x67\x65\x74\x46\x6f\x72\x67\x65\x64\x42\x79\x41\x63\x63\x6f\x75\x6e\x74",type:"\x6f\x62\x6a\x65\x63\x74",properties:{generatorPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x67\x65\x6e\x65\x72\x61\x74\x6f\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79"]},addDelegate:{id:"\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x61\x64\x64\x44\x65\x6c\x65\x67\x61\x74\x65",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},secondSecret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},username:{type:"\x73\x74\x72\x69\x6e\x67"}},required:["\x73\x65\x63\x72\x65\x74"]}}}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x6c\x6f\x61\x64\x65\x72\x2e\x6a\x73",function(a){"use strict";a.exports={loadSignatures:{id:"\x6c\x6f\x61\x64\x65\x72\x2e\x6c\x6f\x61\x64\x53\x69\x67\x6e\x61\x74\x75\x72\x65\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{signatures:{type:"\x61\x72\x72\x61\x79",uniqueItems:!0}},required:["\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73"]},loadUnconfirmedTransactions:{id:"\x6c\x6f\x61\x64\x65\x72\x2e\x6c\x6f\x61\x64\x55\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{transactions:{type:"\x61\x72\x72\x61\x79",uniqueItems:!0}},required:["\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73"]},getNetwork:{peers:{id:"\x6c\x6f\x61\x64\x65\x72\x2e\x67\x65\x74\x4e\x65\x74\x77\x6f\x72\x6b\x2e\x70\x65\x65\x72\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{peers:{type:"\x61\x72\x72\x61\x79",uniqueItems:!0}},required:["\x70\x65\x65\x72\x73"]},peer:{id:"\x6c\x6f\x61\x64\x65\x72\x2e\x67\x65\x74\x4e\x65\x74\x77\x6f\x72\x6b\x2e\x70\x65\x65\x72",type:"\x6f\x62\x6a\x65\x63\x74",properties:{ip:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x69\x70"},port:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:65535},state:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:3},os:{type:"\x73\x74\x72\x69\x6e\x67"},version:{type:"\x73\x74\x72\x69\x6e\x67"}},required:["\x69\x70","\x70\x6f\x72\x74","\x73\x74\x61\x74\x65"]},height:{id:"\x6c\x6f\x61\x64\x65\x72\x2e\x67\x65\x74\x4e\x65\x74\x77\x6f\x72\x6b\x2e\x68\x65\x69\x67\x68\x74",type:"\x6f\x62\x6a\x65\x63\x74",properties:{height:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0}},required:["\x68\x65\x69\x67\x68\x74"]}}}}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73",function(a){"use strict";a.exports={getAccounts:{id:"\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x67\x65\x74\x41\x63\x63\x6f\x75\x6e\x74\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"]},pending:{id:"\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x70\x65\x6e\x64\x69\x6e\x67",type:"\x6f\x62\x6a\x65\x63\x74",properties:{publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"]},sign:{id:"\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x73\x69\x67\x6e",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},secondSecret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},transactionId:{type:"\x73\x74\x72\x69\x6e\x67"}},required:["\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64","\x73\x65\x63\x72\x65\x74"]},addMultisignature:{id:"\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x61\x64\x64\x4d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},secondSecret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},min:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:16},lifetime:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:72},keysgroup:{type:"\x61\x72\x72\x61\x79",minLength:1,maxLength:10}},required:["\x6d\x69\x6e","\x6c\x69\x66\x65\x74\x69\x6d\x65","\x6b\x65\x79\x73\x67\x72\x6f\x75\x70","\x73\x65\x63\x72\x65\x74"]}}}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x70\x65\x65\x72\x73\x2e\x6a\x73",function(a){"use strict";a.exports={updatePeersList:{peers:{id:"\x70\x65\x65\x72\x2e\x75\x70\x64\x61\x74\x65\x50\x65\x65\x72\x73\x4c\x69\x73\x74\x2e\x70\x65\x65\x72\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{peers:{type:"\x61\x72\x72\x61\x79",uniqueItems:!0}},required:["\x70\x65\x65\x72\x73"]},peer:{id:"\x70\x65\x65\x72\x2e\x75\x70\x64\x61\x74\x65\x50\x65\x65\x72\x73\x4c\x69\x73\x74\x2e\x70\x65\x65\x72",type:"\x6f\x62\x6a\x65\x63\x74",properties:{ip:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x69\x70"},port:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:65535},state:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:3},os:{type:"\x73\x74\x72\x69\x6e\x67",maxLength:64},version:{type:"\x73\x74\x72\x69\x6e\x67",maxLength:11}},required:["\x69\x70","\x70\x6f\x72\x74","\x73\x74\x61\x74\x65"]}},getPeers:{id:"\x70\x65\x65\x72\x2e\x67\x65\x74\x50\x65\x65\x72\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{port:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:65535},state:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:3},os:{type:"\x73\x74\x72\x69\x6e\x67",maxLength:64},version:{type:"\x73\x74\x72\x69\x6e\x67",maxLength:11},orderBy:{type:"\x73\x74\x72\x69\x6e\x67"},limit:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:100},offset:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0}}},getPeer:{id:"\x70\x65\x65\x72\x2e\x67\x65\x74\x50\x65\x65\x72",type:"\x6f\x62\x6a\x65\x63\x74",properties:{ip:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x69\x70"},port:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:65535}},required:["\x69\x70","\x70\x6f\x72\x74"]}}}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73",function(a){"use strict";a.exports={addSignature:{id:"\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x61\x64\x64\x53\x69\x67\x6e\x61\x74\x75\x72\x65",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},secondSecret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},multisigAccountPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x73\x65\x63\x72\x65\x74","\x73\x65\x63\x6f\x6e\x64\x53\x65\x63\x72\x65\x74"]}}}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x6a\x73",function(a,b,c){"use strict";var d=c("\x2e\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x6f\x6e\x73\x74\x61\x6e\x74\x73\x2e\x6a\x73");a.exports={getTransactions:{id:"\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x67\x65\x74\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{blockId:{type:"\x73\x74\x72\x69\x6e\x67"},limit:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:100},type:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:10},orderBy:{type:"\x73\x74\x72\x69\x6e\x67"},offset:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0},senderPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},ownerPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},ownerAddress:{type:"\x73\x74\x72\x69\x6e\x67"},senderId:{type:"\x73\x74\x72\x69\x6e\x67"},recipientId:{type:"\x73\x74\x72\x69\x6e\x67"},amount:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:d.fixedPoint},fee:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:0,maximum:d.fixedPoint}}},getTransaction:{id:"\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x67\x65\x74\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x69\x64"]},getUnconfirmedTransaction:{id:"\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x67\x65\x74\x55\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",type:"\x6f\x62\x6a\x65\x63\x74",properties:{id:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1}},required:["\x69\x64"]},getUnconfirmedTransactions:{id:"\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x67\x65\x74\x55\x6e\x63\x6f\x6e\x66\x69\x72\x6d\x65\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{senderPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},address:{type:"\x73\x74\x72\x69\x6e\x67"}}},addTransactions:{id:"\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x61\x64\x64\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{secret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},amount:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:d.totalAmount},recipientId:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1},publicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"},secondSecret:{type:"\x73\x74\x72\x69\x6e\x67",minLength:1,maxLength:100},multisigAccountPublicKey:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x70\x75\x62\x6c\x69\x63\x4b\x65\x79"}},required:["\x73\x65\x63\x72\x65\x74","\x61\x6d\x6f\x75\x6e\x74","\x72\x65\x63\x69\x70\x69\x65\x6e\x74\x49\x64"]}}}),c.register("\x2e\x2f\x73\x63\x68\x65\x6d\x61\x2f\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x6a\x73",function(a){"use strict";a.exports={headers:{id:"\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x68\x65\x61\x64\x65\x72\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{port:{type:"\x69\x6e\x74\x65\x67\x65\x72",minimum:1,maximum:65535},os:{type:"\x73\x74\x72\x69\x6e\x67",maxLength:64},nethash:{type:"\x73\x74\x72\x69\x6e\x67",maxLength:64},version:{type:"\x73\x74\x72\x69\x6e\x67",maxLength:11}},required:["\x70\x6f\x72\x74","\x6e\x65\x74\x68\x61\x73\x68","\x76\x65\x72\x73\x69\x6f\x6e"]},commonBlock:{id:"\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x63\x6f\x6d\x6d\x6f\x6e\x42\x6c\x6f\x63\x6b",type:"\x6f\x62\x6a\x65\x63\x74",properties:{ids:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x63\x73\x76"}},required:["\x69\x64\x73"]},blocks:{id:"\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x62\x6c\x6f\x63\x6b\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{lastBlockId:{type:"\x73\x74\x72\x69\x6e\x67"}}},signatures:{id:"\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73",type:"\x6f\x62\x6a\x65\x63\x74",properties:{signature:{type:"\x6f\x62\x6a\x65\x63\x74",properties:{transaction:{type:"\x73\x74\x72\x69\x6e\x67"},signature:{type:"\x73\x74\x72\x69\x6e\x67",format:"\x73\x69\x67\x6e\x61\x74\x75\x72\x65"}},required:["\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e","\x73\x69\x67\x6e\x61\x74\x75\x72\x65"]}},required:["\x73\x69\x67\x6e\x61\x74\x75\x72\x65"]}}}),c.register("\x2e\x2f\x73\x71\x6c\x2f\x62\x6c\x6f\x63\x6b\x73\x2e\x6a\x73",function(a){"use strict";var d={sortFields:["\x69\x64","\x74\x69\x6d\x65\x73\x74\x61\x6d\x70","\x68\x65\x69\x67\x68\x74","\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b","\x74\x6f\x74\x61\x6c\x41\x6d\x6f\x75\x6e\x74","\x74\x6f\x74\x61\x6c\x46\x65\x65","\x72\x65\x77\x61\x72\x64","\x6e\x75\x6d\x62\x65\x72\x4f\x66\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73","\x67\x65\x6e\x65\x72\x61\x74\x6f\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79"],getGenesisBlockId:"\x53\x45\x4c\x45\x43\x54\x20\x22\x69\x64\x22\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d",deleteBlock:"\x44\x45\x4c\x45\x54\x45\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d\x3b",countList:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x22\x62\x5f\x69\x64\x22\x29\x3a\x3a\x69\x6e\x74\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x5f\x6c\x69\x73\x74",a.where.length?"\x57\x48\x45\x52\x45\x20"+a.where.join("\x20\x41\x4e\x44\x20"):""].filter(Boolean).join("\x20")},list:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x2a\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x5f\x6c\x69\x73\x74",a.where.length?"\x57\x48\x45\x52\x45\x20"+a.where.join("\x20\x41\x4e\x44\x20"):"",a.sortField?"\x4f\x52\x44\x45\x52\x20\x42\x59\x20"+[a.sortField,a.sortMethod].join("\x20"):"","\x4c\x49\x4d\x49\x54\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d\x20\x4f\x46\x46\x53\x45\x54\x20\x24\x7b\x6f\x66\x66\x73\x65\x74\x7d"].filter(Boolean).join("\x20")},getById:"\x53\x45\x4c\x45\x43\x54\x20\x2a\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x5f\x6c\x69\x73\x74\x20\x57\x48\x45\x52\x45\x20\x22\x62\x5f\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d",getIdSequence:"\x53\x45\x4c\x45\x43\x54\x20\x28\x41\x52\x52\x41\x59\x5f\x41\x47\x47\x28\x22\x69\x64\x22\x20\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x41\x53\x43\x29\x29\x5b\x31\x5d\x20\x41\x53\x20\x22\x69\x64\x22\x2c\x20\x4d\x49\x4e\x28\x22\x68\x65\x69\x67\x68\x74\x22\x29\x20\x41\x53\x20\x22\x68\x65\x69\x67\x68\x74\x22\x2c\x20\x43\x41\x53\x54\x28\x22\x68\x65\x69\x67\x68\x74\x22\x20\x2f\x20\x24\x7b\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x7d\x20\x41\x53\x20\x49\x4e\x54\x45\x47\x45\x52\x29\x20\x2b\x20\x28\x43\x41\x53\x45\x20\x57\x48\x45\x4e\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x25\x20\x24\x7b\x61\x63\x74\x69\x76\x65\x44\x65\x6c\x65\x67\x61\x74\x65\x73\x7d\x20\x3e\x20\x30\x20\x54\x48\x45\x4e\x20\x31\x20\x45\x4c\x53\x45\x20\x30\x20\x45\x4e\x44\x29\x20\x41\x53\x20\x22\x72\x6f\x75\x6e\x64\x22\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x3c\x3d\x20\x24\x7b\x68\x65\x69\x67\x68\x74\x7d\x20\x47\x52\x4f\x55\x50\x20\x42\x59\x20\x22\x72\x6f\x75\x6e\x64\x22\x20\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x44\x45\x53\x43\x20\x4c\x49\x4d\x49\x54\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d",getCommonBlock:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x22\x69\x64\x22\x29\x3a\x3a\x69\x6e\x74\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d",a.previousBlock?"\x41\x4e\x44\x20\x22\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b\x22\x20\x3d\x20\x24\x7b\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b\x7d":"","\x41\x4e\x44\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x3d\x20\x24\x7b\x68\x65\x69\x67\x68\x74\x7d"].filter(Boolean).join("\x20")},countByRowId:"\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x22\x72\x6f\x77\x49\x64\x22\x29\x3a\x3a\x69\x6e\x74\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73",
getHeightByLastId:"\x53\x45\x4c\x45\x43\x54\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x6c\x61\x73\x74\x49\x64\x7d",loadBlocksData:function(a){var b;return a.id||a.lastId||(b="\x57\x48\x45\x52\x45\x20\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x20\x3c\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d"),["\x53\x45\x4c\x45\x43\x54\x20\x2a\x20\x46\x52\x4f\x4d\x20\x66\x75\x6c\x6c\x5f\x62\x6c\x6f\x63\x6b\x73\x5f\x6c\x69\x73\x74",b,a.id||a.lastId?"\x57\x48\x45\x52\x45":"",a.id?"\x22\x62\x5f\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d":"",a.id&&a.lastId?"\x20\x41\x4e\x44\x20":"",a.lastId?"\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x20\x3e\x20\x24\x7b\x68\x65\x69\x67\x68\x74\x7d\x20\x41\x4e\x44\x20\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x20\x3c\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d":"","\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x2c\x20\x22\x74\x5f\x72\x6f\x77\x49\x64\x22"].filter(Boolean).join("\x20")},loadBlocksOffset:"\x53\x45\x4c\x45\x43\x54\x20\x2a\x20\x46\x52\x4f\x4d\x20\x66\x75\x6c\x6c\x5f\x62\x6c\x6f\x63\x6b\x73\x5f\x6c\x69\x73\x74\x20\x57\x48\x45\x52\x45\x20\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x20\x3e\x3d\x20\x24\x7b\x6f\x66\x66\x73\x65\x74\x7d\x20\x41\x4e\x44\x20\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x20\x3c\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d\x20\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x2c\x20\x22\x74\x5f\x72\x6f\x77\x49\x64\x22",loadLastBlock:"\x53\x45\x4c\x45\x43\x54\x20\x2a\x20\x46\x52\x4f\x4d\x20\x66\x75\x6c\x6c\x5f\x62\x6c\x6f\x63\x6b\x73\x5f\x6c\x69\x73\x74\x20\x57\x48\x45\x52\x45\x20\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x20\x3d\x20\x28\x53\x45\x4c\x45\x43\x54\x20\x4d\x41\x58\x28\x22\x68\x65\x69\x67\x68\x74\x22\x29\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x29\x20\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x22\x62\x5f\x68\x65\x69\x67\x68\x74\x22\x2c\x20\x22\x74\x5f\x72\x6f\x77\x49\x64\x22",getBlockId:"\x53\x45\x4c\x45\x43\x54\x20\x22\x69\x64\x22\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d",getTransactionId:"\x53\x45\x4c\x45\x43\x54\x20\x22\x69\x64\x22\x20\x46\x52\x4f\x4d\x20\x74\x72\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d",simpleDeleteAfterBlock:"\x44\x45\x4c\x45\x54\x45\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x3e\x3d\x20\x28\x53\x45\x4c\x45\x43\x54\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d\x29\x3b"};a.exports=d}),c.register("\x2e\x2f\x73\x71\x6c\x2f\x64\x61\x70\x70\x73\x2e\x6a\x73",function(a){"use strict";var d={sortFields:["\x74\x79\x70\x65","\x6e\x61\x6d\x65","\x63\x61\x74\x65\x67\x6f\x72\x79","\x6c\x69\x6e\x6b"],countByTransactionId:"\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x2a\x29\x3a\x3a\x69\x6e\x74\x20\x41\x53\x20\x22\x63\x6f\x75\x6e\x74\x22\x20\x46\x52\x4f\x4d\x20\x64\x61\x70\x70\x73\x20\x57\x48\x45\x52\x45\x20\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d",countByOutTransactionId:"\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x2a\x29\x3a\x3a\x69\x6e\x74\x20\x41\x53\x20\x22\x63\x6f\x75\x6e\x74\x22\x20\x46\x52\x4f\x4d\x20\x6f\x75\x74\x74\x72\x61\x6e\x73\x66\x65\x72\x20\x57\x48\x45\x52\x45\x20\x22\x6f\x75\x74\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x3d\x20\x24\x7b\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x7d",getExisting:"\x53\x45\x4c\x45\x43\x54\x20\x22\x6e\x61\x6d\x65\x22\x2c\x20\x22\x6c\x69\x6e\x6b\x22\x20\x46\x52\x4f\x4d\x20\x64\x61\x70\x70\x73\x20\x57\x48\x45\x52\x45\x20\x28\x22\x6e\x61\x6d\x65\x22\x20\x3d\x20\x24\x7b\x6e\x61\x6d\x65\x7d\x20\x4f\x52\x20\x22\x6c\x69\x6e\x6b\x22\x20\x3d\x20\x24\x7b\x6c\x69\x6e\x6b\x7d\x29\x20\x41\x4e\x44\x20\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x21\x3d\x20\x24\x7b\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x7d",search:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x2c\x20\x22\x6e\x61\x6d\x65\x22\x2c\x20\x22\x64\x65\x73\x63\x72\x69\x70\x74\x69\x6f\x6e\x22\x2c\x20\x22\x74\x61\x67\x73\x22\x2c\x20\x22\x6c\x69\x6e\x6b\x22\x2c\x20\x22\x74\x79\x70\x65\x22\x2c\x20\x22\x63\x61\x74\x65\x67\x6f\x72\x79\x22\x2c\x20\x22\x69\x63\x6f\x6e\x22","\x46\x52\x4f\x4d\x20\x64\x61\x70\x70\x73\x20\x57\x48\x45\x52\x45\x20\x74\x6f\x5f\x74\x73\x76\x65\x63\x74\x6f\x72\x28\x22\x6e\x61\x6d\x65\x22\x20\x7c\x7c\x20\x27\x20\x27\x20\x7c\x7c\x20\x22\x64\x65\x73\x63\x72\x69\x70\x74\x69\x6f\x6e\x22\x20\x7c\x7c\x20\x27\x20\x27\x20\x7c\x7c\x20\x22\x74\x61\x67\x73\x22\x29\x20\x40\x40\x20\x74\x6f\x5f\x74\x73\x71\x75\x65\x72\x79\x28\x24\x7b\x71\x7d\x29",a.category?"\x41\x4e\x44\x20\x22\x63\x61\x74\x65\x67\x6f\x72\x79\x22\x20\x3d\x20\x24\x7b\x63\x61\x74\x65\x67\x6f\x72\x79\x7d":"","\x4c\x49\x4d\x49\x54\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d"].filter(Boolean).join("\x20")},get:"\x53\x45\x4c\x45\x43\x54\x20\x22\x6e\x61\x6d\x65\x22\x2c\x20\x22\x64\x65\x73\x63\x72\x69\x70\x74\x69\x6f\x6e\x22\x2c\x20\x22\x74\x61\x67\x73\x22\x2c\x20\x22\x6c\x69\x6e\x6b\x22\x2c\x20\x22\x74\x79\x70\x65\x22\x2c\x20\x22\x63\x61\x74\x65\x67\x6f\x72\x79\x22\x2c\x20\x22\x69\x63\x6f\x6e\x22\x2c\x20\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x46\x52\x4f\x4d\x20\x64\x61\x70\x70\x73\x20\x57\x48\x45\x52\x45\x20\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d",getByIds:"\x53\x45\x4c\x45\x43\x54\x20\x22\x6e\x61\x6d\x65\x22\x2c\x20\x22\x64\x65\x73\x63\x72\x69\x70\x74\x69\x6f\x6e\x22\x2c\x20\x22\x74\x61\x67\x73\x22\x2c\x20\x22\x6c\x69\x6e\x6b\x22\x2c\x20\x22\x74\x79\x70\x65\x22\x2c\x20\x22\x63\x61\x74\x65\x67\x6f\x72\x79\x22\x2c\x20\x22\x69\x63\x6f\x6e\x22\x2c\x20\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x46\x52\x4f\x4d\x20\x64\x61\x70\x70\x73\x20\x57\x48\x45\x52\x45\x20\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x49\x4e\x20\x28\x24\x31\x3a\x63\x73\x76\x29",list:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x22\x6e\x61\x6d\x65\x22\x2c\x20\x22\x64\x65\x73\x63\x72\x69\x70\x74\x69\x6f\x6e\x22\x2c\x20\x22\x74\x61\x67\x73\x22\x2c\x20\x22\x6c\x69\x6e\x6b\x22\x2c\x20\x22\x74\x79\x70\x65\x22\x2c\x20\x22\x63\x61\x74\x65\x67\x6f\x72\x79\x22\x2c\x20\x22\x69\x63\x6f\x6e\x22\x2c\x20\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x46\x52\x4f\x4d\x20\x64\x61\x70\x70\x73",a.where.length?"\x57\x48\x45\x52\x45\x20"+a.where.join("\x20\x4f\x52\x20"):"",a.sortField?"\x4f\x52\x44\x45\x52\x20\x42\x59\x20"+[a.sortField,a.sortMethod].join("\x20"):"","\x4c\x49\x4d\x49\x54\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d\x20\x4f\x46\x46\x53\x45\x54\x20\x24\x7b\x6f\x66\x66\x73\x65\x74\x7d"].filter(Boolean).join("\x20")},getGenesis:"\x53\x45\x4c\x45\x43\x54\x20\x62\x2e\x22\x68\x65\x69\x67\x68\x74\x22\x20\x41\x53\x20\x22\x68\x65\x69\x67\x68\x74\x22\x2c\x20\x62\x2e\x22\x69\x64\x22\x20\x41\x53\x20\x22\x69\x64\x22\x2c\x20\x74\x2e\x22\x73\x65\x6e\x64\x65\x72\x49\x64\x22\x20\x41\x53\x20\x22\x61\x75\x74\x68\x6f\x72\x49\x64\x22\x20\x46\x52\x4f\x4d\x20\x74\x72\x73\x20\x74\x20\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x62\x6c\x6f\x63\x6b\x73\x20\x62\x20\x4f\x4e\x20\x74\x2e\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x3d\x20\x62\x2e\x22\x69\x64\x22\x20\x57\x48\x45\x52\x45\x20\x74\x2e\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d",getCommonBlock:"\x53\x45\x4c\x45\x43\x54\x20\x62\x2e\x22\x68\x65\x69\x67\x68\x74\x22\x20\x41\x53\x20\x22\x68\x65\x69\x67\x68\x74\x22\x2c\x20\x74\x2e\x22\x69\x64\x22\x20\x41\x53\x20\x22\x69\x64\x22\x2c\x20\x74\x2e\x22\x73\x65\x6e\x64\x65\x72\x49\x64\x22\x20\x41\x53\x20\x22\x73\x65\x6e\x64\x65\x72\x49\x64\x22\x2c\x20\x74\x2e\x22\x61\x6d\x6f\x75\x6e\x74\x22\x20\x41\x53\x20\x22\x61\x6d\x6f\x75\x6e\x74\x22\x20\x46\x52\x4f\x4d\x20\x74\x72\x73\x20\x74\x20\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x62\x6c\x6f\x63\x6b\x73\x20\x62\x20\x4f\x4e\x20\x74\x2e\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x3d\x20\x62\x2e\x22\x69\x64\x22\x20\x41\x4e\x44\x20\x74\x2e\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d\x20\x41\x4e\x44\x20\x74\x2e\x22\x74\x79\x70\x65\x22\x20\x3d\x20\x24\x7b\x74\x79\x70\x65\x7d\x20\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x69\x6e\x74\x72\x61\x6e\x73\x66\x65\x72\x20\x64\x74\x20\x4f\x4e\x20\x64\x74\x2e\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x3d\x20\x74\x2e\x22\x69\x64\x22\x20\x41\x4e\x44\x20\x64\x74\x2e\x22\x64\x61\x70\x70\x69\x64\x22\x20\x3d\x20\x24\x7b\x64\x61\x70\x70\x69\x64\x7d",getWithdrawalLastTransaction:"\x53\x45\x4c\x45\x43\x54\x20\x6f\x74\x2e\x22\x6f\x75\x74\x54\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x46\x52\x4f\x4d\x20\x74\x72\x73\x20\x74\x20\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x62\x6c\x6f\x63\x6b\x73\x20\x62\x20\x4f\x4e\x20\x74\x2e\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x3d\x20\x62\x2e\x22\x69\x64\x22\x20\x41\x4e\x44\x20\x74\x2e\x22\x74\x79\x70\x65\x22\x20\x3d\x20\x24\x7b\x74\x79\x70\x65\x7d\x20\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x6f\x75\x74\x74\x72\x61\x6e\x73\x66\x65\x72\x20\x6f\x74\x20\x4f\x4e\x20\x6f\x74\x2e\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x3d\x20\x74\x2e\x22\x69\x64\x22\x20\x41\x4e\x44\x20\x6f\x74\x2e\x22\x64\x61\x70\x70\x49\x64\x22\x20\x3d\x20\x24\x7b\x64\x61\x70\x70\x69\x64\x7d\x20\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x62\x2e\x22\x68\x65\x69\x67\x68\x74\x22\x20\x44\x45\x53\x43\x20\x4c\x49\x4d\x49\x54\x20\x31",getBalanceTransactions:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x74\x2e\x22\x69\x64\x22\x20\x41\x53\x20\x22\x69\x64\x22\x2c\x20\x45\x4e\x43\x4f\x44\x45\x28\x74\x2e\x22\x73\x65\x6e\x64\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x2c\x20\x27\x68\x65\x78\x27\x29\x20\x41\x53\x20\x22\x73\x65\x6e\x64\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x2c\x20\x74\x2e\x22\x61\x6d\x6f\x75\x6e\x74\x22\x20\x41\x53\x20\x22\x61\x6d\x6f\x75\x6e\x74\x22\x20\x46\x52\x4f\x4d\x20\x74\x72\x73\x20\x74","\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x62\x6c\x6f\x63\x6b\x73\x20\x62\x20\x4f\x4e\x20\x74\x2e\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x3d\x20\x62\x2e\x22\x69\x64\x22\x20\x41\x4e\x44\x20\x74\x2e\x22\x74\x79\x70\x65\x22\x20\x3d\x20\x24\x7b\x74\x79\x70\x65\x7d","\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x69\x6e\x74\x72\x61\x6e\x73\x66\x65\x72\x20\x64\x74\x20\x4f\x4e\x20\x64\x74\x2e\x22\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64\x22\x20\x3d\x20\x74\x2e\x22\x69\x64\x22\x20\x41\x4e\x44\x20\x64\x74\x2e\x22\x64\x61\x70\x70\x49\x64\x22\x20\x3d\x20\x24\x7b\x64\x61\x70\x70\x69\x64\x7d",a.lastId?"\x57\x48\x45\x52\x45\x20\x62\x2e\x22\x68\x65\x69\x67\x68\x74\x22\x20\x3e\x20\x28\x53\x45\x4c\x45\x43\x54\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x69\x62\x20\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x74\x72\x73\x20\x69\x74\x20\x4f\x4e\x20\x69\x62\x2e\x22\x69\x64\x22\x20\x3d\x20\x69\x74\x2e\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x41\x4e\x44\x20\x69\x74\x2e\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x6c\x61\x73\x74\x49\x64\x7d\x29":"","\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x62\x2e\x22\x68\x65\x69\x67\x68\x74\x22"].filter(Boolean).join("\x20")}};a.exports=d}),c.register("\x2e\x2f\x73\x71\x6c\x2f\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x6a\x73",function(a,b,c){"use strict";var d=c("\x70\x67\x2d\x70\x72\x6f\x6d\x69\x73\x65"),e={sortFields:["\x75\x73\x65\x72\x6e\x61\x6d\x65","\x61\x64\x64\x72\x65\x73\x73","\x70\x75\x62\x6c\x69\x63\x4b\x65\x79","\x76\x6f\x74\x65","\x6d\x69\x73\x73\x65\x64\x62\x6c\x6f\x63\x6b\x73","\x70\x72\x6f\x64\x75\x63\x65\x64\x62\x6c\x6f\x63\x6b\x73"],count:"\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x2a\x29\x3a\x3a\x69\x6e\x74\x20\x46\x52\x4f\x4d\x20\x64\x65\x6c\x65\x67\x61\x74\x65\x73",search:function(a){var b=["\x53\x45\x4c\x45\x43\x54\x20\x6d\x2e\x22\x75\x73\x65\x72\x6e\x61\x6d\x65\x22\x2c\x20\x6d\x2e\x22\x61\x64\x64\x72\x65\x73\x73\x22\x2c\x20\x45\x4e\x43\x4f\x44\x45\x28\x6d\x2e\x22\x70\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x2c\x20\x27\x68\x65\x78\x27\x29\x20\x41\x53\x20\x22\x70\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x2c\x20\x6d\x2e\x22\x76\x6f\x74\x65\x22\x2c\x20\x6d\x2e\x22\x70\x72\x6f\x64\x75\x63\x65\x64\x62\x6c\x6f\x63\x6b\x73\x22\x2c\x20\x6d\x2e\x22\x6d\x69\x73\x73\x65\x64\x62\x6c\x6f\x63\x6b\x73\x22\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x6d\x20\x57\x48\x45\x52\x45\x20\x6d\x2e\x22\x69\x73\x44\x65\x6c\x65\x67\x61\x74\x65\x22\x20\x3d\x20\x31\x20\x41\x4e\x44\x20\x6d\x2e\x22\x75\x73\x65\x72\x6e\x61\x6d\x65\x22\x20\x4c\x49\x4b\x45\x20\x24\x7b\x71\x7d","\x4f\x52\x44\x45\x52\x20\x42\x59\x20"+[a.sortField,a.sortMethod].join("\x20"),"\x4c\x49\x4d\x49\x54\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d"].join("\x20");return a.q="\x25"+(a.q+"").toLowerCase()+"\x25",d.as.format(b,a)},insertFork:"\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x66\x6f\x72\x6b\x73\x5f\x73\x74\x61\x74\x20\x28\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x2c\x20\x22\x62\x6c\x6f\x63\x6b\x54\x69\x6d\x65\x73\x74\x61\x6d\x70\x22\x2c\x20\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x2c\x20\x22\x62\x6c\x6f\x63\x6b\x48\x65\x69\x67\x68\x74\x22\x2c\x20\x22\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b\x22\x2c\x20\x22\x63\x61\x75\x73\x65\x22\x29\x20\x56\x41\x4c\x55\x45\x53\x20\x28\x24\x7b\x64\x65\x6c\x65\x67\x61\x74\x65\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x7d\x2c\x20\x24\x7b\x62\x6c\x6f\x63\x6b\x54\x69\x6d\x65\x73\x74\x61\x6d\x70\x7d\x2c\x20\x24\x7b\x62\x6c\x6f\x63\x6b\x49\x64\x7d\x2c\x20\x24\x7b\x62\x6c\x6f\x63\x6b\x48\x65\x69\x67\x68\x74\x7d\x2c\x20\x24\x7b\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b\x7d\x2c\x20\x24\x7b\x63\x61\x75\x73\x65\x7d\x29\x3b",getVoters:"\x53\x45\x4c\x45\x43\x54\x20\x41\x52\x52\x41\x59\x5f\x41\x47\x47\x28\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x22\x29\x20\x41\x53\x20\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x73\x22\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x32\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x20\x57\x48\x45\x52\x45\x20\x22\x64\x65\x70\x65\x6e\x64\x65\x6e\x74\x49\x64\x22\x20\x3d\x20\x24\x7b\x70\x75\x62\x6c\x69\x63\x4b\x65\x79\x7d"};a.exports=e}),c.register("\x2e\x2f\x73\x71\x6c\x2f\x6c\x6f\x61\x64\x65\x72\x2e\x6a\x73",function(a){"use strict";var d={countBlocks:"\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x22\x72\x6f\x77\x49\x64\x22\x29\x3a\x3a\x69\x6e\x74\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73",countMemAccounts:"\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x2a\x29\x3a\x3a\x69\x6e\x74\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x57\x48\x45\x52\x45\x20\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x3d\x20\x28\x53\x45\x4c\x45\x43\x54\x20\x22\x69\x64\x22\x20\x46\x52\x4f\x4d\x20\x22\x62\x6c\x6f\x63\x6b\x73\x22\x20\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x44\x45\x53\x43\x20\x4c\x49\x4d\x49\x54\x20\x31\x29",getMemRounds:"\x53\x45\x4c\x45\x43\x54\x20\x22\x72\x6f\x75\x6e\x64\x22\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64\x20\x47\x52\x4f\x55\x50\x20\x42\x59\x20\x22\x72\x6f\x75\x6e\x64\x22",updateMemAccounts:"\x55\x50\x44\x41\x54\x45\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x53\x45\x54\x20\x22\x75\x5f\x69\x73\x44\x65\x6c\x65\x67\x61\x74\x65\x22\x20\x3d\x20\x22\x69\x73\x44\x65\x6c\x65\x67\x61\x74\x65\x22\x2c\x20\x22\x75\x5f\x73\x65\x63\x6f\x6e\x64\x53\x69\x67\x6e\x61\x74\x75\x72\x65\x22\x20\x3d\x20\x22\x73\x65\x63\x6f\x6e\x64\x53\x69\x67\x6e\x61\x74\x75\x72\x65\x22\x2c\x20\x22\x75\x5f\x75\x73\x65\x72\x6e\x61\x6d\x65\x22\x20\x3d\x20\x22\x75\x73\x65\x72\x6e\x61\x6d\x65\x22\x2c\x20\x22\x75\x5f\x62\x61\x6c\x61\x6e\x63\x65\x22\x20\x3d\x20\x22\x62\x61\x6c\x61\x6e\x63\x65\x22\x2c\x20\x22\x75\x5f\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x22\x20\x3d\x20\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x22\x2c\x20\x22\x75\x5f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x22\x20\x3d\x20\x22\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x22\x3b",getOrphanedMemAccounts:"\x53\x45\x4c\x45\x43\x54\x20\x61\x2e\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x2c\x20\x62\x2e\x22\x69\x64\x22\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x61\x20\x4c\x45\x46\x54\x20\x4f\x55\x54\x45\x52\x20\x4a\x4f\x49\x4e\x20\x62\x6c\x6f\x63\x6b\x73\x20\x62\x20\x4f\x4e\x20\x62\x2e\x22\x69\x64\x22\x20\x3d\x20\x61\x2e\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x57\x48\x45\x52\x45\x20\x61\x2e\x22\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x49\x53\x20\x4e\x4f\x54\x20\x4e\x55\x4c\x4c\x20\x41\x4e\x44\x20\x62\x2e\x22\x69\x64\x22\x20\x49\x53\x20\x4e\x55\x4c\x4c",getDelegates:"\x53\x45\x4c\x45\x43\x54\x20\x45\x4e\x43\x4f\x44\x45\x28\x22\x70\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x2c\x20\x27\x68\x65\x78\x27\x29\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x73\x44\x65\x6c\x65\x67\x61\x74\x65\x22\x20\x3d\x20\x31"};a.exports=d}),c.register("\x2e\x2f\x73\x71\x6c\x2f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73",function(a){"use strict";var d={getAccounts:"\x53\x45\x4c\x45\x43\x54\x20\x41\x52\x52\x41\x59\x5f\x41\x47\x47\x28\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x22\x29\x20\x41\x53\x20\x22\x61\x63\x63\x6f\x75\x6e\x74\x49\x64\x22\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x32\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x20\x57\x48\x45\x52\x45\x20\x22\x64\x65\x70\x65\x6e\x64\x65\x6e\x74\x49\x64\x22\x20\x3d\x20\x24\x7b\x70\x75\x62\x6c\x69\x63\x4b\x65\x79\x7d"};a.exports=d}),c.register("\x2e\x2f\x73\x71\x6c\x2f\x70\x65\x65\x72\x73\x2e\x6a\x73",function(a){"use strict";var d={sortFields:["\x69\x70","\x70\x6f\x72\x74","\x73\x74\x61\x74\x65","\x6f\x73","\x76\x65\x72\x73\x69\x6f\x6e"],count:"\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x2a\x29\x3a\x3a\x69\x6e\x74\x20\x46\x52\x4f\x4d\x20\x70\x65\x65\x72\x73",banManager:"\x55\x50\x44\x41\x54\x45\x20\x70\x65\x65\x72\x73\x20\x53\x45\x54\x20\x22\x73\x74\x61\x74\x65\x22\x20\x3d\x20\x31\x2c\x20\x22\x63\x6c\x6f\x63\x6b\x22\x20\x3d\x20\x6e\x75\x6c\x6c\x20\x57\x48\x45\x52\x45\x20\x28\x22\x73\x74\x61\x74\x65\x22\x20\x3d\x20\x30\x20\x41\x4e\x44\x20\x22\x63\x6c\x6f\x63\x6b\x22\x20\x2d\x20\x24\x7b\x6e\x6f\x77\x7d\x20\x3c\x20\x30\x29\x3b",getByFilter:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x22\x69\x70\x22\x2c\x20\x22\x70\x6f\x72\x74\x22\x2c\x20\x22\x73\x74\x61\x74\x65\x22\x2c\x20\x22\x6f\x73\x22\x2c\x20\x22\x76\x65\x72\x73\x69\x6f\x6e\x22\x20\x46\x52\x4f\x4d\x20\x70\x65\x65\x72\x73",a.where.length?"\x57\x48\x45\x52\x45\x20"+a.where.join("\x20\x41\x4e\x44\x20"):"",a.sortField?"\x4f\x52\x44\x45\x52\x20\x42\x59\x20"+[a.sortField,a.sortMethod].join("\x20"):"\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x72\x61\x6e\x64\x6f\x6d\x28\x29","\x4c\x49\x4d\x49\x54\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d\x20\x4f\x46\x46\x53\x45\x54\x20\x24\x7b\x6f\x66\x66\x73\x65\x74\x7d"].filter(Boolean).join("\x20")},randomList:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x70\x2e\x22\x69\x70\x22\x2c\x20\x70\x2e\x22\x70\x6f\x72\x74\x22\x2c\x20\x70\x2e\x22\x73\x74\x61\x74\x65\x22\x2c\x20\x70\x2e\x22\x6f\x73\x22\x2c\x20\x70\x2e\x22\x76\x65\x72\x73\x69\x6f\x6e\x22\x20\x46\x52\x4f\x4d\x20\x70\x65\x65\x72\x73\x20\x70",a.dappid?"\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x70\x65\x65\x72\x73\x5f\x64\x61\x70\x70\x20\x41\x53\x20\x70\x64\x20\x4f\x4e\x20\x70\x2e\x22\x69\x64\x22\x20\x3d\x20\x70\x64\x2e\x22\x70\x65\x65\x72\x49\x64\x22\x20\x41\x4e\x44\x20\x70\x64\x2e\x22\x64\x61\x70\x70\x69\x64\x22\x20\x3d\x20\x24\x7b\x64\x61\x70\x70\x69\x64\x7d":"","\x57\x48\x45\x52\x45\x20\x70\x2e\x22\x73\x74\x61\x74\x65\x22\x20\x3e\x20\x30\x20\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x52\x41\x4e\x44\x4f\x4d\x28\x29\x20\x4c\x49\x4d\x49\x54\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d"].filter(Boolean).join("\x20")},state:"\x55\x50\x44\x41\x54\x45\x20\x70\x65\x65\x72\x73\x20\x53\x45\x54\x20\x22\x73\x74\x61\x74\x65\x22\x20\x3d\x20\x24\x7b\x73\x74\x61\x74\x65\x7d\x2c\x20\x22\x63\x6c\x6f\x63\x6b\x22\x20\x3d\x20\x24\x7b\x63\x6c\x6f\x63\x6b\x7d\x20\x57\x48\x45\x52\x45\x20\x22\x69\x70\x22\x20\x3d\x20\x24\x7b\x69\x70\x7d\x20\x41\x4e\x44\x20\x22\x70\x6f\x72\x74\x22\x20\x3d\x20\x24\x7b\x70\x6f\x72\x74\x7d\x3b",remove:"\x44\x45\x4c\x45\x54\x45\x20\x46\x52\x4f\x4d\x20\x70\x65\x65\x72\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x70\x22\x20\x3d\x20\x24\x7b\x69\x70\x7d\x20\x41\x4e\x44\x20\x22\x70\x6f\x72\x74\x22\x20\x3d\x20\x24\x7b\x70\x6f\x72\x74\x7d\x3b",getByIdPort:"\x53\x45\x4c\x45\x43\x54\x20\x22\x69\x64\x22\x20\x46\x52\x4f\x4d\x20\x70\x65\x65\x72\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x70\x22\x20\x3d\x20\x24\x7b\x69\x70\x7d\x20\x41\x4e\x44\x20\x22\x70\x6f\x72\x74\x22\x20\x3d\x20\x24\x7b\x70\x6f\x72\x74\x7d",addDapp:"\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x70\x65\x65\x72\x73\x5f\x64\x61\x70\x70\x20\x28\x22\x70\x65\x65\x72\x49\x64\x22\x2c\x20\x22\x64\x61\x70\x70\x69\x64\x22\x29\x20\x56\x41\x4c\x55\x45\x53\x20\x28\x24\x7b\x70\x65\x65\x72\x49\x64\x7d\x2c\x20\x24\x7b\x64\x61\x70\x70\x49\x64\x7d\x29\x20\x4f\x4e\x20\x43\x4f\x4e\x46\x4c\x49\x43\x54\x20\x44\x4f\x20\x4e\x4f\x54\x48\x49\x4e\x47\x3b",insert:"\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x70\x65\x65\x72\x73\x20\x28\x22\x69\x70\x22\x2c\x20\x22\x70\x6f\x72\x74\x22\x2c\x20\x22\x73\x74\x61\x74\x65\x22\x2c\x20\x22\x6f\x73\x22\x2c\x20\x22\x76\x65\x72\x73\x69\x6f\x6e\x22\x29\x20\x56\x41\x4c\x55\x45\x53\x20\x28\x24\x7b\x69\x70\x7d\x2c\x20\x24\x7b\x70\x6f\x72\x74\x7d\x2c\x20\x24\x7b\x73\x74\x61\x74\x65\x7d\x2c\x20\x24\x7b\x6f\x73\x7d\x2c\x20\x24\x7b\x76\x65\x72\x73\x69\x6f\x6e\x7d\x29\x20\x4f\x4e\x20\x43\x4f\x4e\x46\x4c\x49\x43\x54\x20\x44\x4f\x20\x4e\x4f\x54\x48\x49\x4e\x47\x3b",insertSeed:"\x49\x4e\x53\x45\x52\x54\x20\x49\x4e\x54\x4f\x20\x70\x65\x65\x72\x73\x28\x22\x69\x70\x22\x2c\x20\x22\x70\x6f\x72\x74\x22\x2c\x20\x22\x73\x74\x61\x74\x65\x22\x29\x20\x56\x41\x4c\x55\x45\x53\x28\x24\x7b\x69\x70\x7d\x2c\x20\x24\x7b\x70\x6f\x72\x74\x7d\x2c\x20\x24\x7b\x73\x74\x61\x74\x65\x7d\x29\x20\x4f\x4e\x20\x43\x4f\x4e\x46\x4c\x49\x43\x54\x20\x44\x4f\x20\x4e\x4f\x54\x48\x49\x4e\x47\x3b",update:function(a){return["\x55\x50\x44\x41\x54\x45\x20\x70\x65\x65\x72\x73\x20\x53\x45\x54\x20\x22\x6f\x73\x22\x20\x3d\x20\x24\x7b\x6f\x73\x7d\x2c\x20\x22\x76\x65\x72\x73\x69\x6f\x6e\x22\x20\x3d\x20\x24\x7b\x76\x65\x72\x73\x69\x6f\x6e\x7d",void 0!==a.state?"\x2c\x20\x22\x73\x74\x61\x74\x65\x22\x20\x3d\x20\x43\x41\x53\x45\x20\x57\x48\x45\x4e\x20\x22\x73\x74\x61\x74\x65\x22\x20\x3d\x20\x30\x20\x54\x48\x45\x4e\x20\x22\x73\x74\x61\x74\x65\x22\x20\x45\x4c\x53\x45\x20\x24\x7b\x73\x74\x61\x74\x65\x7d\x20\x45\x4e\x44":"","\x57\x48\x45\x52\x45\x20\x22\x69\x70\x22\x20\x3d\x20\x24\x7b\x69\x70\x7d\x20\x61\x6e\x64\x20\x22\x70\x6f\x72\x74\x22\x20\x3d\x20\x24\x7b\x70\x6f\x72\x74\x7d\x3b"].join("\x20")}};a.exports=d}),c.register("\x2e\x2f\x73\x71\x6c\x2f\x72\x6f\x75\x6e\x64\x73\x2e\x6a\x73",function(a){"use strict";var d={flush:"\x44\x45\x4c\x45\x54\x45\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64\x20\x57\x48\x45\x52\x45\x20\x22\x72\x6f\x75\x6e\x64\x22\x20\x3d\x20\x28\x24\x7b\x72\x6f\x75\x6e\x64\x7d\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74\x3b",truncateBlocks:"\x44\x45\x4c\x45\x54\x45\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x3e\x20\x28\x24\x7b\x68\x65\x69\x67\x68\x74\x7d\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74\x3b",updateMissedBlocks:"\x55\x50\x44\x41\x54\x45\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x53\x45\x54\x20\x22\x6d\x69\x73\x73\x65\x64\x62\x6c\x6f\x63\x6b\x73\x22\x20\x3d\x20\x22\x6d\x69\x73\x73\x65\x64\x62\x6c\x6f\x63\x6b\x73\x22\x20\x2b\x20\x31\x20\x57\x48\x45\x52\x45\x20\x22\x61\x64\x64\x72\x65\x73\x73\x22\x20\x49\x4e\x20\x28\x24\x31\x3a\x63\x73\x76\x29\x3b",getVotes:"\x53\x45\x4c\x45\x43\x54\x20\x64\x2e\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x22\x2c\x20\x64\x2e\x22\x61\x6d\x6f\x75\x6e\x74\x22\x20\x46\x52\x4f\x4d\x20\x28\x53\x45\x4c\x45\x43\x54\x20\x6d\x2e\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x22\x2c\x20\x53\x55\x4d\x28\x6d\x2e\x22\x61\x6d\x6f\x75\x6e\x74\x22\x29\x20\x41\x53\x20\x22\x61\x6d\x6f\x75\x6e\x74\x22\x2c\x20\x22\x72\x6f\x75\x6e\x64\x22\x20\x46\x52\x4f\x4d\x20\x6d\x65\x6d\x5f\x72\x6f\x75\x6e\x64\x20\x6d\x20\x47\x52\x4f\x55\x50\x20\x42\x59\x20\x6d\x2e\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x22\x2c\x20\x6d\x2e\x22\x72\x6f\x75\x6e\x64\x22\x29\x20\x41\x53\x20\x64\x20\x57\x48\x45\x52\x45\x20\x22\x72\x6f\x75\x6e\x64\x22\x20\x3d\x20\x28\x24\x7b\x72\x6f\x75\x6e\x64\x7d\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74",updateVotes:"\x55\x50\x44\x41\x54\x45\x20\x6d\x65\x6d\x5f\x61\x63\x63\x6f\x75\x6e\x74\x73\x20\x53\x45\x54\x20\x22\x76\x6f\x74\x65\x22\x20\x3d\x20\x22\x76\x6f\x74\x65\x22\x20\x2b\x20\x28\x24\x7b\x61\x6d\x6f\x75\x6e\x74\x7d\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74\x20\x57\x48\x45\x52\x45\x20\x22\x61\x64\x64\x72\x65\x73\x73\x22\x20\x3d\x20\x24\x7b\x61\x64\x64\x72\x65\x73\x73\x7d\x3b",summedRound:"\x53\x45\x4c\x45\x43\x54\x20\x53\x55\x4d\x28\x62\x2e\x22\x74\x6f\x74\x61\x6c\x46\x65\x65\x22\x29\x3a\x3a\x62\x69\x67\x69\x6e\x74\x20\x41\x53\x20\x22\x66\x65\x65\x73\x22\x2c\x20\x41\x52\x52\x41\x59\x5f\x41\x47\x47\x28\x62\x2e\x22\x72\x65\x77\x61\x72\x64\x22\x29\x20\x41\x53\x20\x22\x72\x65\x77\x61\x72\x64\x73\x22\x2c\x20\x41\x52\x52\x41\x59\x5f\x41\x47\x47\x28\x45\x4e\x43\x4f\x44\x45\x28\x62\x2e\x22\x67\x65\x6e\x65\x72\x61\x74\x6f\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79\x22\x2c\x20\x27\x68\x65\x78\x27\x29\x29\x20\x41\x53\x20\x22\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x22\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x62\x20\x57\x48\x45\x52\x45\x20\x28\x53\x45\x4c\x45\x43\x54\x20\x28\x43\x41\x53\x54\x28\x62\x2e\x22\x68\x65\x69\x67\x68\x74\x22\x20\x2f\x20\x24\x7b\x61\x63\x74\x69\x76\x65\x44\x65\x6c\x65\x67\x61\x74\x65\x73\x7d\x20\x41\x53\x20\x49\x4e\x54\x45\x47\x45\x52\x29\x20\x2b\x20\x28\x43\x41\x53\x45\x20\x57\x48\x45\x4e\x20\x62\x2e\x22\x68\x65\x69\x67\x68\x74\x22\x20\x25\x20\x24\x7b\x61\x63\x74\x69\x76\x65\x44\x65\x6c\x65\x67\x61\x74\x65\x73\x7d\x20\x3e\x20\x30\x20\x54\x48\x45\x4e\x20\x31\x20\x45\x4c\x53\x45\x20\x30\x20\x45\x4e\x44\x29\x29\x29\x20\x3d\x20\x24\x7b\x72\x6f\x75\x6e\x64\x7d"};a.exports=d}),c.register("\x2e\x2f\x73\x71\x6c\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x6a\x73",function(a){"use strict";var d={sortFields:["\x69\x64","\x62\x6c\x6f\x63\x6b\x49\x64","\x61\x6d\x6f\x75\x6e\x74","\x66\x65\x65","\x74\x79\x70\x65","\x74\x69\x6d\x65\x73\x74\x61\x6d\x70","\x73\x65\x6e\x64\x65\x72\x50\x75\x62\x6c\x69\x63\x4b\x65\x79","\x73\x65\x6e\x64\x65\x72\x49\x64","\x72\x65\x63\x69\x70\x69\x65\x6e\x74\x49\x64","\x63\x6f\x6e\x66\x69\x72\x6d\x61\x74\x69\x6f\x6e\x73","\x68\x65\x69\x67\x68\x74"],countById:"\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x22\x69\x64\x22\x29\x3a\x3a\x69\x6e\x74\x20\x41\x53\x20\x22\x63\x6f\x75\x6e\x74\x22\x20\x46\x52\x4f\x4d\x20\x74\x72\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d",countList:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x43\x4f\x55\x4e\x54\x28\x22\x74\x5f\x69\x64\x22\x29\x20\x46\x52\x4f\x4d\x20\x74\x72\x73\x5f\x6c\x69\x73\x74","\x49\x4e\x4e\x45\x52\x20\x4a\x4f\x49\x4e\x20\x62\x6c\x6f\x63\x6b\x73\x20\x62\x20\x4f\x4e\x20\x22\x74\x5f\x62\x6c\x6f\x63\x6b\x49\x64\x22\x20\x3d\x20\x62\x2e\x22\x69\x64\x22",a.where.length||a.owner?"\x57\x48\x45\x52\x45":"",a.where.length?"\x28"+a.where.join("\x20\x4f\x52\x20")+"\x29":"",a.where.length&&a.owner?"\x20\x41\x4e\x44\x20"+a.owner:a.owner].filter(Boolean).join("\x20")},list:function(a){return["\x53\x45\x4c\x45\x43\x54\x20\x2a\x20\x46\x52\x4f\x4d\x20\x74\x72\x73\x5f\x6c\x69\x73\x74",a.where.length||a.owner?"\x57\x48\x45\x52\x45":"",a.where.length?"\x28"+a.where.join("\x20\x4f\x52\x20")+"\x29":"",a.where.length&&a.owner?"\x20\x41\x4e\x44\x20"+a.owner:a.owner,a.sortField?"\x4f\x52\x44\x45\x52\x20\x42\x59\x20"+[a.sortField,a.sortMethod].join("\x20"):"","\x4c\x49\x4d\x49\x54\x20\x24\x7b\x6c\x69\x6d\x69\x74\x7d\x20\x4f\x46\x46\x53\x45\x54\x20\x24\x7b\x6f\x66\x66\x73\x65\x74\x7d"].filter(Boolean).join("\x20")},getById:"\x53\x45\x4c\x45\x43\x54\x20\x2a\x20\x46\x52\x4f\x4d\x20\x74\x72\x73\x5f\x6c\x69\x73\x74\x20\x57\x48\x45\x52\x45\x20\x22\x74\x5f\x69\x64\x22\x20\x3d\x20\x24\x7b\x69\x64\x7d"};a.exports=d}),c.register("\x2e\x2f\x73\x71\x6c\x2f\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x6a\x73",function(a){"use strict";var d={getCommonBlock:"\x53\x45\x4c\x45\x43\x54\x20\x4d\x41\x58\x28\x22\x68\x65\x69\x67\x68\x74\x22\x29\x20\x41\x53\x20\x22\x68\x65\x69\x67\x68\x74\x22\x2c\x20\x22\x69\x64\x22\x2c\x20\x22\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b\x22\x2c\x20\x22\x74\x69\x6d\x65\x73\x74\x61\x6d\x70\x22\x20\x46\x52\x4f\x4d\x20\x62\x6c\x6f\x63\x6b\x73\x20\x57\x48\x45\x52\x45\x20\x22\x69\x64\x22\x20\x49\x4e\x20\x28\x24\x31\x3a\x63\x73\x76\x29\x20\x47\x52\x4f\x55\x50\x20\x42\x59\x20\x22\x69\x64\x22\x20\x4f\x52\x44\x45\x52\x20\x42\x59\x20\x22\x68\x65\x69\x67\x68\x74\x22\x20\x44\x45\x53\x43"};a.exports=d}),c.register("\x2e\x2f\x61\x70\x70\x2e\x6a\x73",function(a,b,c){"use strict";var r,s,t,u,d=c("\x2e\x2f\x63\x6f\x6e\x66\x69\x67\x2e\x6a\x73\x6f\x6e"),e=c("\x61\x73\x79\x6e\x63"),f=c("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x63\x68\x65\x63\x6b\x49\x70\x49\x6e\x4c\x69\x73\x74\x2e\x6a\x73"),h=(c("\x65\x78\x74\x65\x6e\x64"),c("\x66\x73")),i=c("\x2e\x2f\x67\x65\x6e\x65\x73\x69\x73\x42\x6c\x6f\x63\x6b\x2e\x6a\x73\x6f\x6e"),k=(c("\x68\x74\x74\x70\x73"),c("\x2e\x2f\x6c\x6f\x67\x67\x65\x72\x2e\x6a\x73")),l=c("\x2e\x2f\x70\x61\x63\x6b\x61\x67\x65\x2e\x6a\x73\x6f\x6e"),m=c("\x70\x61\x74\x68"),n=c("\x63\x6f\x6d\x6d\x61\x6e\x64\x65\x72"),o=c("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x73\x65\x71\x75\x65\x6e\x63\x65\x2e\x6a\x73"),q=(c("\x75\x74\x69\x6c"),c("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x7a\x5f\x73\x63\x68\x65\x6d\x61\x2e\x6a\x73"));process.stdin.resume(),r=h.readFileSync(m.join(__dirname,"\x62\x75\x69\x6c\x64"),"\x75\x74\x66\x38"),"\x75\x6e\x64\x65\x66\x69\x6e\x65\x64"!=typeof gc&&setInterval(function(){gc()},6e4),n.version(l.version).option("\x2d\x63\x2c\x20\x2d\x2d\x63\x6f\x6e\x66\x69\x67\x20\x3c\x70\x61\x74\x68\x3e","\x63\x6f\x6e\x66\x69\x67\x20\x66\x69\x6c\x65\x20\x70\x61\x74\x68").option("\x2d\x70\x2c\x20\x2d\x2d\x70\x6f\x72\x74\x20\x3c\x70\x6f\x72\x74\x3e","\x6c\x69\x73\x74\x65\x6e\x69\x6e\x67\x20\x70\x6f\x72\x74\x20\x6e\x75\x6d\x62\x65\x72").option("\x2d\x61\x2c\x20\x2d\x2d\x61\x64\x64\x72\x65\x73\x73\x20\x3c\x69\x70\x3e","\x6c\x69\x73\x74\x65\x6e\x69\x6e\x67\x20\x68\x6f\x73\x74\x20\x6e\x61\x6d\x65\x20\x6f\x72\x20\x69\x70").option("\x2d\x78\x2c\x20\x2d\x2d\x70\x65\x65\x72\x73\x20\x5b\x70\x65\x65\x72\x73\x2e\x2e\x2e\x5d","\x70\x65\x65\x72\x73\x20\x6c\x69\x73\x74").option("\x2d\x6c\x2c\x20\x2d\x2d\x6c\x6f\x67\x20\x3c\x6c\x65\x76\x65\x6c\x3e","\x6c\x6f\x67\x20\x6c\x65\x76\x65\x6c").option("\x2d\x73\x2c\x20\x2d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x20\x3c\x72\x6f\x75\x6e\x64\x3e","\x76\x65\x72\x69\x66\x79\x20\x73\x6e\x61\x70\x73\x68\x6f\x74").parse(process.argv),n.config&&(d=c(m.resolve(process.cwd(),n.config))),n.port&&(d.port=n.port),n.address&&(d.address=n.address),n.peers&&("\x73\x74\x72\x69\x6e\x67"==typeof n.peers?d.peers.list=n.peers.split("\x2c").map(function(a){return a=a.split("\x3a"),{ip:a.shift(),port:a.shift()||d.port}}):d.peers.list=[]),n.log&&(d.consoleLogLevel=n.log),n.snapshot&&(d.loading.snapshot=Math.abs(Math.floor(n.snapshot))),s={db:d.db,modules:{server:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x73\x65\x72\x76\x65\x72\x2e\x6a\x73",accounts:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x61\x63\x63\x6f\x75\x6e\x74\x73\x2e\x6a\x73",transactions:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x73\x2e\x6a\x73",blocks:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x62\x6c\x6f\x63\x6b\x73\x2e\x6a\x73",signatures:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73",transport:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x74\x72\x61\x6e\x73\x70\x6f\x72\x74\x2e\x6a\x73",
loader:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x6c\x6f\x61\x64\x65\x72\x2e\x6a\x73",system:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x73\x79\x73\x74\x65\x6d\x2e\x6a\x73",peers:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x70\x65\x65\x72\x73\x2e\x6a\x73",delegates:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x64\x65\x6c\x65\x67\x61\x74\x65\x73\x2e\x6a\x73",rounds:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x72\x6f\x75\x6e\x64\x73\x2e\x6a\x73",multisignatures:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x6d\x75\x6c\x74\x69\x73\x69\x67\x6e\x61\x74\x75\x72\x65\x73\x2e\x6a\x73",dapps:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x64\x61\x70\x70\x73\x2e\x6a\x73",crypto:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x63\x72\x79\x70\x74\x6f\x2e\x6a\x73",sql:"\x2e\x2f\x6d\x6f\x64\x75\x6c\x65\x73\x2f\x73\x71\x6c\x2e\x6a\x73"}},t=new k({echo:d.consoleLogLevel,errorLevel:d.fileLogLevel,filename:d.logFileName}),u=c("\x64\x6f\x6d\x61\x69\x6e").create(),u.on("\x65\x72\x72\x6f\x72",function(a){t.fatal("\x44\x6f\x6d\x61\x69\x6e\x20\x6d\x61\x73\x74\x65\x72",{message:a.message,stack:a.stack}),process.exit(0)}),u.run(function(){var a=[];e.auto({config:function(a){try{d.nethash=new Buffer(i.payloadHash,"\x68\x65\x78").toString("\x68\x65\x78")}catch(b){throw t.error("\x46\x61\x69\x6c\x65\x64\x20\x74\x6f\x20\x61\x73\x73\x69\x67\x6e\x20\x6e\x65\x74\x68\x61\x73\x68\x20\x66\x72\x6f\x6d\x20\x67\x65\x6e\x65\x73\x69\x73\x20\x62\x6c\x6f\x63\x6b"),Error(b)}if(d.dapp.masterrequired&&!d.dapp.masterpassword){var e=c("\x72\x61\x6e\x64\x6f\x6d\x73\x74\x72\x69\x6e\x67");d.dapp.masterpassword=e.generate({length:12,readable:!0,charset:"\x61\x6c\x70\x68\x61\x6e\x75\x6d\x65\x72\x69\x63"}),null!=d.loading.snapshot&&delete d.loading.snapshot,h.writeFile("\x2e\x2f\x63\x6f\x6e\x66\x69\x67\x2e\x6a\x73\x6f\x6e",JSON.stringify(d,null,4),"\x75\x74\x66\x38",function(b){a(b,d)})}else a(null,d)},logger:function(a){a(null,t)},build:function(a){a(null,r)},genesisblock:function(a){a(null,{block:i})},"public":function(a){a(null,m.join(__dirname,"\x70\x75\x62\x6c\x69\x63"))},schema:function(a){a(null,new q)},network:["\x63\x6f\x6e\x66\x69\x67",function(a,b){var j,k,l,m,n,o,e=c("\x65\x78\x70\x72\x65\x73\x73"),f=c("\x63\x6f\x6d\x70\x72\x65\x73\x73\x69\x6f\x6e"),g=c("\x63\x6f\x72\x73"),i=e();c("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x65\x71\x75\x65\x73\x74\x2d\x6c\x69\x6d\x69\x74\x65\x72")(i,d),i.use(f({level:6})),i.use(g()),i.options("\x2a",g()),j=c("\x68\x74\x74\x70").createServer(i),k=c("\x73\x6f\x63\x6b\x65\x74\x2e\x69\x6f")(j),a.config.ssl.enabled&&(l=h.readFileSync(a.config.ssl.options.key),m=h.readFileSync(a.config.ssl.options.cert),n=c("\x68\x74\x74\x70\x73").createServer({key:l,cert:m,ciphers:"\x45\x43\x44\x48\x45\x2d\x52\x53\x41\x2d\x41\x45\x53\x31\x32\x38\x2d\x47\x43\x4d\x2d\x53\x48\x41\x32\x35\x36\x3a\x45\x43\x44\x48\x45\x2d\x45\x43\x44\x53\x41\x2d\x41\x45\x53\x31\x32\x38\x2d\x47\x43\x4d\x2d\x53\x48\x41\x32\x35\x36\x3a\x45\x43\x44\x48\x45\x2d\x52\x53\x41\x2d\x41\x45\x53\x32\x35\x36\x2d\x47\x43\x4d\x2d\x53\x48\x41\x33\x38\x34\x3a\x45\x43\x44\x48\x45\x2d\x45\x43\x44\x53\x41\x2d\x41\x45\x53\x32\x35\x36\x2d\x47\x43\x4d\x2d\x53\x48\x41\x33\x38\x34\x3a\x44\x48\x45\x2d\x52\x53\x41\x2d\x41\x45\x53\x31\x32\x38\x2d\x47\x43\x4d\x2d\x53\x48\x41\x32\x35\x36\x3a\x45\x43\x44\x48\x45\x2d\x52\x53\x41\x2d\x41\x45\x53\x31\x32\x38\x2d\x53\x48\x41\x32\x35\x36\x3a\x44\x48\x45\x2d\x52\x53\x41\x2d\x41\x45\x53\x31\x32\x38\x2d\x53\x48\x41\x32\x35\x36\x3a\x45\x43\x44\x48\x45\x2d\x52\x53\x41\x2d\x41\x45\x53\x32\x35\x36\x2d\x53\x48\x41\x33\x38\x34\x3a\x44\x48\x45\x2d\x52\x53\x41\x2d\x41\x45\x53\x32\x35\x36\x2d\x53\x48\x41\x33\x38\x34\x3a\x45\x43\x44\x48\x45\x2d\x52\x53\x41\x2d\x41\x45\x53\x32\x35\x36\x2d\x53\x48\x41\x32\x35\x36\x3a\x44\x48\x45\x2d\x52\x53\x41\x2d\x41\x45\x53\x32\x35\x36\x2d\x53\x48\x41\x32\x35\x36\x3a\x48\x49\x47\x48\x3a\x21\x61\x4e\x55\x4c\x4c\x3a\x21\x65\x4e\x55\x4c\x4c\x3a\x21\x45\x58\x50\x4f\x52\x54\x3a\x21\x44\x45\x53\x3a\x21\x52\x43\x34\x3a\x21\x4d\x44\x35\x3a\x21\x50\x53\x4b\x3a\x21\x53\x52\x50\x3a\x21\x43\x41\x4d\x45\x4c\x4c\x49\x41"},i),o=c("\x73\x6f\x63\x6b\x65\x74\x2e\x69\x6f")(n)),b(null,{express:e,app:i,server:j,io:k,https:n,https_io:o})}],dbSequence:["\x6c\x6f\x67\x67\x65\x72",function(a,b){var c=new o({onWarning:function(b){a.logger.warn("\x44\x42\x20\x71\x75\x65\x75\x65",b)}});b(null,c)}],sequence:["\x6c\x6f\x67\x67\x65\x72",function(a,b){var c=new o({onWarning:function(b){a.logger.warn("\x4d\x61\x69\x6e\x20\x71\x75\x65\x75\x65",b)}});b(null,c)}],balancesSequence:["\x6c\x6f\x67\x67\x65\x72",function(a,b){var c=new o({onWarning:function(b){a.logger.warn("\x42\x61\x6c\x61\x6e\x63\x65\x20\x71\x75\x65\x75\x65",b)}});b(null,c)}],connect:["\x63\x6f\x6e\x66\x69\x67","\x70\x75\x62\x6c\x69\x63","\x67\x65\x6e\x65\x73\x69\x73\x62\x6c\x6f\x63\x6b","\x6c\x6f\x67\x67\x65\x72","\x62\x75\x69\x6c\x64","\x6e\x65\x74\x77\x6f\x72\x6b",function(a,b){var j,d=c("\x70\x61\x74\x68"),e=c("\x62\x6f\x64\x79\x2d\x70\x61\x72\x73\x65\x72"),g=c("\x6d\x65\x74\x68\x6f\x64\x2d\x6f\x76\x65\x72\x72\x69\x64\x65"),i=(c("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x72\x65\x71\x75\x65\x73\x74\x2d\x73\x61\x6e\x69\x74\x69\x7a\x65\x72"),c("\x65\x78\x70\x72\x65\x73\x73\x2d\x71\x75\x65\x72\x79\x2d\x69\x6e\x74"));a.network.app.engine("\x68\x74\x6d\x6c",c("\x65\x6a\x73").renderFile),a.network.app.use(c("\x65\x78\x70\x72\x65\x73\x73\x2d\x64\x6f\x6d\x61\x69\x6e\x2d\x6d\x69\x64\x64\x6c\x65\x77\x61\x72\x65")),a.network.app.set("\x76\x69\x65\x77\x20\x65\x6e\x67\x69\x6e\x65","\x65\x6a\x73"),a.network.app.set("\x76\x69\x65\x77\x73",d.join(__dirname,"\x70\x75\x62\x6c\x69\x63")),a.network.app.use(a.network.express["\x73\x74\x61\x74\x69\x63"](d.join(__dirname,"\x70\x75\x62\x6c\x69\x63"))),a.network.app.use(e.raw({limit:"\x32\x6d\x62"})),a.network.app.use(e.urlencoded({extended:!0,limit:"\x32\x6d\x62",parameterLimit:5e3})),a.network.app.use(e.json({limit:"\x32\x6d\x62"})),a.network.app.use(g()),j=["\x69\x64","\x6e\x61\x6d\x65","\x6c\x61\x73\x74\x42\x6c\x6f\x63\x6b\x49\x64","\x62\x6c\x6f\x63\x6b\x49\x64","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x49\x64","\x61\x64\x64\x72\x65\x73\x73","\x72\x65\x63\x69\x70\x69\x65\x6e\x74\x49\x64","\x73\x65\x6e\x64\x65\x72\x49\x64","\x70\x72\x65\x76\x69\x6f\x75\x73\x42\x6c\x6f\x63\x6b"],a.network.app.use(i({parser:function(a,b,c){return j.indexOf(c)>=0?a:isNaN(a)||parseInt(a)!=a||isNaN(parseInt(a,b))?a:parseInt(a)}})),a.network.app.use(c("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x7a\x5f\x73\x63\x68\x65\x6d\x61\x2d\x65\x78\x70\x72\x65\x73\x73\x2e\x6a\x73")(a.schema)),a.network.app.use(function(b,c,d){var e=b.url.split("\x2f"),g=b.headers["\x78\x2d\x66\x6f\x72\x77\x61\x72\x64\x65\x64\x2d\x66\x6f\x72"]||b.connection.remoteAddress;t.log(b.method+"\x20"+b.url+"\x20\x66\x72\x6f\x6d\x20"+g),c.setHeader("\x58\x2d\x46\x72\x61\x6d\x65\x2d\x4f\x70\x74\x69\x6f\x6e\x73","\x44\x45\x4e\x59"),c.setHeader("\x43\x6f\x6e\x74\x65\x6e\x74\x2d\x53\x65\x63\x75\x72\x69\x74\x79\x2d\x50\x6f\x6c\x69\x63\x79","\x66\x72\x61\x6d\x65\x2d\x61\x6e\x63\x65\x73\x74\x6f\x72\x73\x20\x27\x6e\x6f\x6e\x65\x27"),e.length>1?"\x61\x70\x69"===e[1]?f(a.config.api.access.whiteList,g,!0)?d():c.sendStatus(403):"\x70\x65\x65\x72"===e[1]&&f(a.config.peers.blackList,g,!1)?c.sendStatus(403):d():d()}),a.network.server.listen(a.config.port,a.config.address,function(c){a.logger.info("\x4c\x69\x73\x6b\x20\x73\x74\x61\x72\x74\x65\x64\x3a\x20"+a.config.address+"\x3a"+a.config.port),c?b(c,a.network):a.config.ssl.enabled?a.network.https.listen(a.config.ssl.options.port,a.config.ssl.options.address,function(c){a.logger.info("\x4c\x69\x73\x6b\x20\x68\x74\x74\x70\x73\x20\x73\x74\x61\x72\x74\x65\x64\x3a\x20"+a.config.ssl.options.address+"\x3a"+a.config.ssl.options.port),b(c,a.network)}):b(null,a.network)})}],ed:function(a){a(null,c("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x65\x64\x2e\x6a\x73"))},bus:["\x65\x64",function(b,d){var e=c("\x63\x68\x61\x6e\x67\x65\x2d\x63\x61\x73\x65"),f=function(){this.message=function(){var c,b=[];Array.prototype.push.apply(b,arguments),c=b.shift(),a.forEach(function(a){var d="\x6f\x6e"+e.pascalCase(c);"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof a[d]&&a[d].apply(a[d],b)})}};d(null,new f)}],db:function(a){var b=c("\x2e\x2f\x68\x65\x6c\x70\x65\x72\x73\x2f\x64\x61\x74\x61\x62\x61\x73\x65\x2e\x6a\x73");b.connect(s.db,t,a)},logic:["\x64\x62","\x62\x75\x73","\x73\x63\x68\x65\x6d\x61","\x67\x65\x6e\x65\x73\x69\x73\x62\x6c\x6f\x63\x6b",function(a,b){var d=c("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e\x2e\x6a\x73"),f=c("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x62\x6c\x6f\x63\x6b\x2e\x6a\x73"),g=c("\x2e\x2f\x6c\x6f\x67\x69\x63\x2f\x61\x63\x63\x6f\x75\x6e\x74\x2e\x6a\x73");e.auto({bus:function(b){b(null,a.bus)},db:function(b){b(null,a.db)},ed:function(b){b(null,a.ed)},logger:function(a){a(null,t)},schema:function(b){b(null,a.schema)},genesisblock:function(a){a(null,{block:i})},account:["\x64\x62","\x62\x75\x73","\x65\x64","\x73\x63\x68\x65\x6d\x61","\x67\x65\x6e\x65\x73\x69\x73\x62\x6c\x6f\x63\x6b",function(a,b){new g(a,b)}],transaction:["\x64\x62","\x62\x75\x73","\x65\x64","\x73\x63\x68\x65\x6d\x61","\x67\x65\x6e\x65\x73\x69\x73\x62\x6c\x6f\x63\x6b","\x61\x63\x63\x6f\x75\x6e\x74",function(a,b){new d(a,b)}],block:["\x64\x62","\x62\x75\x73","\x65\x64","\x73\x63\x68\x65\x6d\x61","\x67\x65\x6e\x65\x73\x69\x73\x62\x6c\x6f\x63\x6b","\x61\x63\x63\x6f\x75\x6e\x74","\x74\x72\x61\x6e\x73\x61\x63\x74\x69\x6f\x6e",function(a,b){new f(a,b)}]},b)}],modules:["\x6e\x65\x74\x77\x6f\x72\x6b","\x63\x6f\x6e\x6e\x65\x63\x74","\x63\x6f\x6e\x66\x69\x67","\x6c\x6f\x67\x67\x65\x72","\x62\x75\x73","\x73\x65\x71\x75\x65\x6e\x63\x65","\x64\x62\x53\x65\x71\x75\x65\x6e\x63\x65","\x62\x61\x6c\x61\x6e\x63\x65\x73\x53\x65\x71\x75\x65\x6e\x63\x65","\x64\x62","\x6c\x6f\x67\x69\x63",function(b,d){var f={};Object.keys(s.modules).forEach(function(d){f[d]=function(e){var f=c("\x64\x6f\x6d\x61\x69\x6e").create();f.on("\x65\x72\x72\x6f\x72",function(a){b.logger.fatal("\x44\x6f\x6d\x61\x69\x6e\x20"+d,{message:a.message,stack:a.stack})}),f.run(function(){var f,g;t.debug("\x4c\x6f\x61\x64\x69\x6e\x67\x20\x6d\x6f\x64\x75\x6c\x65",d),f=c(s.modules[d]),g=new f(e,b),a.push(g)})}}),e.parallel(f,function(a,b){d(a,b)})}],ready:["\x6d\x6f\x64\x75\x6c\x65\x73","\x62\x75\x73",function(a,b){a.bus.message("\x62\x69\x6e\x64",a.modules),b()}]},function(b,c){b?t.fatal(b):(c.logger.info("\x4d\x6f\x64\x75\x6c\x65\x73\x20\x72\x65\x61\x64\x79\x20\x61\x6e\x64\x20\x6c\x61\x75\x6e\x63\x68\x65\x64"),process.once("\x63\x6c\x65\x61\x6e\x75\x70",function(){c.logger.info("\x43\x6c\x65\x61\x6e\x69\x6e\x67\x20\x75\x70\x2e\x2e\x2e"),e.eachSeries(a,function(a,b){"\x66\x75\x6e\x63\x74\x69\x6f\x6e"==typeof a.cleanup?a.cleanup(b):setImmediate(b)},function(a){a?c.logger.error(a):c.logger.info("\x43\x6c\x65\x61\x6e\x65\x64\x20\x75\x70\x20\x73\x75\x63\x63\x65\x73\x73\x66\x75\x6c\x6c\x79"),process.exit(1)})}),process.once("\x53\x49\x47\x54\x45\x52\x4d",function(){process.emit("\x63\x6c\x65\x61\x6e\x75\x70")}),process.once("\x65\x78\x69\x74",function(){process.emit("\x63\x6c\x65\x61\x6e\x75\x70")}),process.once("\x53\x49\x47\x49\x4e\x54",function(){process.emit("\x63\x6c\x65\x61\x6e\x75\x70")}))})}),process.on("\x75\x6e\x63\x61\x75\x67\x68\x74\x45\x78\x63\x65\x70\x74\x69\x6f\x6e",function(a){t.fatal("\x53\x79\x73\x74\x65\x6d\x20\x65\x72\x72\x6f\x72",{message:a.message,stack:a.stack}),process.emit("\x63\x6c\x65\x61\x6e\x75\x70")})}),b.exports=c("\x2e\x2f\x61\x70\x70\x2e\x6a\x73")}(require,module);